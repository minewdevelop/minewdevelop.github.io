<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MinewModuleKit Programming Guide for Android | Minew mobile</title>
    <meta name="description" content="A documention site for minew mobile SDKs">
    
    
    <link rel="preload" href="/assets/css/0.styles.ca1b5866.css" as="style"><link rel="preload" href="/assets/js/app.a01fb809.js" as="script"><link rel="preload" href="/assets/js/8.0c28f7da.js" as="script"><link rel="prefetch" href="/assets/js/10.e2a86036.js"><link rel="prefetch" href="/assets/js/2.0bf7600d.js"><link rel="prefetch" href="/assets/js/3.f6dc4958.js"><link rel="prefetch" href="/assets/js/4.a7775134.js"><link rel="prefetch" href="/assets/js/5.2b963b60.js"><link rel="prefetch" href="/assets/js/6.d487b4d3.js"><link rel="prefetch" href="/assets/js/7.358db2b1.js"><link rel="prefetch" href="/assets/js/9.b35cc178.js"><link rel="prefetch" href="/assets/js/11.47018335.js"><link rel="prefetch" href="/assets/js/12.7fc3bf68.js"><link rel="prefetch" href="/assets/js/13.542f537a.js"><link rel="prefetch" href="/assets/js/14.eb9b367c.js"><link rel="prefetch" href="/assets/js/15.f22229cb.js"><link rel="prefetch" href="/assets/js/16.0680fce0.js"><link rel="prefetch" href="/assets/js/17.f14053da.js"><link rel="prefetch" href="/assets/js/18.7c849573.js"><link rel="prefetch" href="/assets/js/19.63b17b4c.js"><link rel="prefetch" href="/assets/js/20.9b19d5b3.js"><link rel="prefetch" href="/assets/js/21.e163a637.js"><link rel="prefetch" href="/assets/js/22.2cfd09f9.js"><link rel="prefetch" href="/assets/js/23.4d29e84b.js"><link rel="prefetch" href="/assets/js/24.b75cf7fd.js"><link rel="prefetch" href="/assets/js/25.c023be9e.js"><link rel="prefetch" href="/assets/js/26.b7a504ac.js"><link rel="prefetch" href="/assets/js/27.3659652a.js"><link rel="prefetch" href="/assets/js/28.234363b1.js"><link rel="prefetch" href="/assets/js/29.c5c75945.js"><link rel="prefetch" href="/assets/js/30.40e5e2dc.js"><link rel="prefetch" href="/assets/js/31.fe2e4acd.js"><link rel="prefetch" href="/assets/js/32.7aa30448.js"><link rel="prefetch" href="/assets/js/33.80e87a66.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.53980843.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ca1b5866.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/minewLogo.png" alt="Minew mobile" class="logo"> <span class="site-name can-hide">Minew mobile</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">iOS</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/iOS/iOS_BeaconPlus_Software_Development_Kit_Guide.html" class="nav-link">BeaconPlus</a></li><li class="dropdown-item"><!----> <a href="/iOS/iOS_MinewTrackerKit_Software_Development_Kit_Guide.html" class="nav-link">TrackerKit</a></li><li class="dropdown-item"><!----> <a href="/iOS/iOS_MinewModuleKit_Software_Development_Kit_Guide.html" class="nav-link">ModuleKit</a></li><li class="dropdown-item"><!----> <a href="/iOS/iOS_Beacon_Software_Development_Kit_Guide.html" class="nav-link">Beacon</a></li><li class="dropdown-item"><!----> <a href="/iOS/iOS_BeaconAdmin_Software_Development_Kit_Guide.html" class="nav-link">BeaconAdmin</a></li><li class="dropdown-item"><!----> <a href="/iOS/iOS_Keyfinder_Software_Development_Kit_Guide.html" class="nav-link">Keyfinder</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Android</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Android/Android_BeaconPlus_Software_Development_Kit_Guide.html" class="nav-link">BeaconPlus</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_MinewTrackerKit_Software_Development_Kit_Guide.html" class="nav-link">TrackerKit</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_MinewModuleKit_Software_Development_Kit_Guide.html" class="nav-link router-link-exact-active router-link-active">ModuleKit</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_Beacon_Software_Development_Kit_Guide.html" class="nav-link">Beacon</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_BeaconAdmin_Software_Development_Kit_Guide.html" class="nav-link">BeaconAdmin</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_Keyfinder_Software_Development_Kit_Guide.html" class="nav-link">Keyfinder</a></li></ul></div></div><div class="nav-item"><a href="/keepintouch.html" class="nav-link">Contact us</a></div><div class="nav-item"><a href="/about.html" class="nav-link">About</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">语言切换</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Android/Android_MinewModuleKit_Software_Development_Kit_Guide.html" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_MinewModuleKit_Software_Development_Kit_Guide.html" class="nav-link">简体中文</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">iOS</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/iOS/iOS_BeaconPlus_Software_Development_Kit_Guide.html" class="nav-link">BeaconPlus</a></li><li class="dropdown-item"><!----> <a href="/iOS/iOS_MinewTrackerKit_Software_Development_Kit_Guide.html" class="nav-link">TrackerKit</a></li><li class="dropdown-item"><!----> <a href="/iOS/iOS_MinewModuleKit_Software_Development_Kit_Guide.html" class="nav-link">ModuleKit</a></li><li class="dropdown-item"><!----> <a href="/iOS/iOS_Beacon_Software_Development_Kit_Guide.html" class="nav-link">Beacon</a></li><li class="dropdown-item"><!----> <a href="/iOS/iOS_BeaconAdmin_Software_Development_Kit_Guide.html" class="nav-link">BeaconAdmin</a></li><li class="dropdown-item"><!----> <a href="/iOS/iOS_Keyfinder_Software_Development_Kit_Guide.html" class="nav-link">Keyfinder</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Android</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Android/Android_BeaconPlus_Software_Development_Kit_Guide.html" class="nav-link">BeaconPlus</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_MinewTrackerKit_Software_Development_Kit_Guide.html" class="nav-link">TrackerKit</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_MinewModuleKit_Software_Development_Kit_Guide.html" class="nav-link router-link-exact-active router-link-active">ModuleKit</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_Beacon_Software_Development_Kit_Guide.html" class="nav-link">Beacon</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_BeaconAdmin_Software_Development_Kit_Guide.html" class="nav-link">BeaconAdmin</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_Keyfinder_Software_Development_Kit_Guide.html" class="nav-link">Keyfinder</a></li></ul></div></div><div class="nav-item"><a href="/keepintouch.html" class="nav-link">Contact us</a></div><div class="nav-item"><a href="/about.html" class="nav-link">About</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">语言切换</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Android/Android_MinewModuleKit_Software_Development_Kit_Guide.html" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_MinewModuleKit_Software_Development_Kit_Guide.html" class="nav-link">简体中文</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>MinewModuleKit Programming Guide for Android</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/Android/Android_MinewModuleKit_Software_Development_Kit_Guide.html#minewmodulekit-programming-guide-for-android" class="sidebar-link">MinewModuleKit Programming Guide for Android</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Android/Android_MinewModuleKit_Software_Development_Kit_Guide.html#preworks" class="sidebar-link">PreWorks</a></li><li class="sidebar-sub-header"><a href="/Android/Android_MinewModuleKit_Software_Development_Kit_Guide.html#start-developing" class="sidebar-link">Start Developing</a></li><li class="sidebar-sub-header"><a href="/Android/Android_MinewModuleKit_Software_Development_Kit_Guide.html#tables" class="sidebar-link">Tables</a></li></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h2 id="minewmodulekit-programming-guide-for-android"><a href="#minewmodulekit-programming-guide-for-android" aria-hidden="true" class="header-anchor">#</a> MinewModuleKit Programming Guide for Android</h2> <p>This SDK only supports the module device producted by Minew. The developers can handle all bluetooth operations between iPhone and modules. such as: scan modules, connect modules, write data to modules, receive data from modules and so on.</p> <h3 id="preworks"><a href="#preworks" aria-hidden="true" class="header-anchor">#</a> PreWorks</h3> <p>This framework is very simple: the MTModuleManager is device managing Class, always using shared instance when the APP is running. the MTModule is device instance Class, the SDK will create instances for devices. the developer can use the MTModule instance for operate module devices.</p> <p>The framework is as the screenshot below:</p> <p><img src="/assets/img/design.ac742719.png" alt="设计说明"></p> <p><em>MTModuleManager：</em> Device managing class, you can scan module devices around, and connect to the modules.</p> <p>MTModule：the Module instance class, when the manager found a physical module device it will create a module instance for the device, the instance is correspond to the module device.</p> <h3 id="start-developing"><a href="#start-developing" aria-hidden="true" class="header-anchor">#</a> Start Developing</h3> <h5 id="environment："><a href="#environment：" aria-hidden="true" class="header-anchor">#</a> Environment：</h5> <ul><li>Android Studio</li></ul> <h5 id="import-to-project"><a href="#import-to-project" aria-hidden="true" class="header-anchor">#</a> Import to project:</h5> <ol><li><p>Please copy the MTModuleKit.jar file of the development kit to the libs directory and add dependencies to the build.gradle file of the corresponding module.As the screenshot below:</p> <p><img src="data:image/png;base64,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" alt="添加framework"></p></li> <li><p>Add bluetooth permissions and corresponding component registration under the AndroidManifest.xml file.As follows:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    <span class="token operator">&lt;</span>uses<span class="token operator">-</span>permission android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">&quot;android.permission.ACCESS_COARSE_LOCATION&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>uses<span class="token operator">-</span>permission android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">&quot;android.permission.ACCESS_FINE_LOCATION&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>uses<span class="token operator">-</span>permission android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">&quot;android.permission.BLUETOOTH&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>uses<span class="token operator">-</span>permission android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">&quot;android.permission.BLUETOOTH_ADMIN&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>uses<span class="token operator">-</span>permission android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">&quot;android.permission.READ_PHONE_STATE&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Bluetooth scanning in Android-6.0 or above requires dynamic application of geographical permission, as follows:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>ContextCompat<span class="token punctuation">.</span><span class="token function">checkSelfPermission</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> Manifest<span class="token punctuation">.</span>permission<span class="token punctuation">.</span>ACCESS_COARSE_LOCATION<span class="token punctuation">)</span>
                <span class="token operator">!=</span> PackageManager<span class="token punctuation">.</span>PERMISSION_GRANTED<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            ActivityCompat<span class="token punctuation">.</span><span class="token function">requestPermissions</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>
                    <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span>Manifest<span class="token punctuation">.</span>permission<span class="token punctuation">.</span>ACCESS_COARSE_LOCATION<span class="token punctuation">}</span><span class="token punctuation">,</span> PERMISSION_COARSE_LOCATION<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ol> <h4 id="start-developing-2"><a href="#start-developing-2" aria-hidden="true" class="header-anchor">#</a> Start Developing</h4> <h4 id="scan-devices"><a href="#scan-devices" aria-hidden="true" class="header-anchor">#</a> Scan devices</h4> <p>First you need to get a single instance of the MTModuleManager, then check the current bluetooth status of the phone, and then you can scan the device.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Get the Manager instance</span>
MTModuleManager mMTModuleManager<span class="token operator">=</span>MTModuleManager<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//Get the bluetooth status of the phone</span>
BluetoothState bluetoothState <span class="token operator">=</span> MTModuleManager<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">checkBluetoothState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//response for status</span>
        <span class="token keyword">switch</span> <span class="token punctuation">(</span>bluetoothState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> BluetoothStateNotSupported<span class="token operator">:</span>
                <span class="token comment">//Not support</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> BluetoothStatePowerOff<span class="token operator">:</span>
                <span class="token comment">//Power off</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> BluetoothStatePowerOn<span class="token operator">:</span>
            	<span class="token comment">//Power on and start scan</span>
            	MTModuleManager<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">startScan</span><span class="token punctuation">(</span>mScanMTModuleCallback<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>Please Note: only the phone bluetooth power on can the SDK works well.</p> <h5 id="connect-to-the-device"><a href="#connect-to-the-device" aria-hidden="true" class="header-anchor">#</a> connect to the device</h5> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// get the module</span>
MTModule mtModule <span class="token operator">=</span> mtModules<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// listen to the changes of device connection</span>
<span class="token comment">// ！！！writing data to device needs connected status.</span>
MTModuleManager<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setModuleChangeConnection</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ModuleChangeConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token annotation punctuation">@Override</span>
       <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onDeviceChangeStatus</span><span class="token punctuation">(</span><span class="token keyword">final</span> MTModule device<span class="token punctuation">,</span> ConnectionState status<span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">switch</span> <span class="token punctuation">(</span>status<span class="token punctuation">)</span> <span class="token punctuation">{</span>
               <span class="token keyword">case</span> DeviceLinkStatus_Connected<span class="token operator">:</span>
                   <span class="token keyword">break</span><span class="token punctuation">;</span>
               <span class="token keyword">case</span> DeviceLinkStatus_ConnectFailed<span class="token operator">:</span>
               <span class="token keyword">case</span> DeviceLinkStatus_Disconnect<span class="token operator">:</span>
                   <span class="token keyword">break</span><span class="token punctuation">;</span>
           <span class="token punctuation">}</span>
       <span class="token punctuation">}</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// connect to a module device.</span>
MTModuleManager<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>mtModule<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h5 id="write-data-to-device"><a href="#write-data-to-device" aria-hidden="true" class="header-anchor">#</a> Write data to device</h5> <p>From last step, you can write or receive data from device when the device connected to the phone.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// write data to device</span>
<span class="token comment">// at first, make the data you want to write</span>
<span class="token comment">// This is a 4 bytes data: 0x01,0x02,0x03,0x04.</span>
<span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0x01</span><span class="token punctuation">,</span><span class="token number">0x02</span><span class="token punctuation">,</span><span class="token number">0x03</span><span class="token punctuation">,</span><span class="token number">0x04</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// then write the bytes above to device</span>
<span class="token comment">// you can get a writing result from the WriteCallback.</span>
module<span class="token punctuation">.</span><span class="token function">writeData</span><span class="token punctuation">(</span>bytes<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">WriteCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">write</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token keyword">boolean</span> success<span class="token punctuation">,</span> ModuleException exception<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>success<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">//write data successfully.</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				<span class="token comment">//write data failed.</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h5 id="receiving-data-from-device"><a href="#receiving-data-from-device" aria-hidden="true" class="header-anchor">#</a> Receiving data from device.</h5> <p>We don't know when the device send data, so please implementate the callback.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// the data receiving callback.</span>
module<span class="token punctuation">.</span><span class="token function">setMTModuleListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MTModuleListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">didReceiveData</span><span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h5 id="read-system-infomation-from-device"><a href="#read-system-infomation-from-device" aria-hidden="true" class="header-anchor">#</a> Read system infomation from device</h5> <p>If the firmware contains system information, you can obtain it by following methods:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>// Obtain the system information corresponding to the device
HashMap&lt;String, String&gt; systemInfos = mMTModule.getSystemInfos();
systemInfos.get(Constants.MANUFACTURER);
systemInfos.get(Constants.MODLENUMBER);
systemInfos.get(Constants.SOFTWARE_VERSION);
systemInfos.get(Constants.HARDWARE_VERSION);
systemInfos.get(Constants.FIRMWARE_VERSION);
systemInfos.get(Constants.SERIALNUMBER);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>The system information is controlled by firmware version, and the supported firmware versions are:</p> <table><thead><tr><th>Firmware Verison(Verison)</th> <th>Support or not</th></tr></thead> <tbody><tr><td>Version &lt; 1.6.0</td> <td>No</td></tr> <tr><td>1.6.0 &lt;= Version &lt; 2.0.0</td> <td>Yes</td></tr> <tr><td>2.0.0 &lt;= Version &lt; 2.3.0</td> <td>No</td></tr> <tr><td>2.3.0 &lt;= Version &lt; 3.0.0</td> <td>Yes</td></tr> <tr><td>3.0.0 &lt;= Version &lt; 3.1.0</td> <td>No</td></tr> <tr><td>3.1.0 &lt;= Version</td> <td>Yes</td></tr></tbody></table> <h3 id="tables"><a href="#tables" aria-hidden="true" class="header-anchor">#</a> Tables</h3> <h5 id="mtmodulemanager-s-properties"><a href="#mtmodulemanager-s-properties" aria-hidden="true" class="header-anchor">#</a> MTModuleManager's properties</h5> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>mBluetoothState</td> <td>BluetoothState</td> <td>the phone's bluetooth status</td></tr> <tr><td>scannedModules</td> <td>LinkedList</td> <td>the scanned devices.</td></tr> <tr><td>connectedModules</td> <td>HashMap</td> <td>the connected devices.</td></tr></tbody></table> <h5 id="mtmodule"><a href="#mtmodule" aria-hidden="true" class="header-anchor">#</a> MTModule</h5> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>name</td> <td>String</td> <td>the bluetooth name</td></tr> <tr><td>macAddress</td> <td>String</td> <td>the mac address</td></tr> <tr><td>advertisingData</td> <td>byte[]</td> <td>the advertisement data</td></tr> <tr><td>lastUpdate</td> <td>long</td> <td>last scanned timestamp</td></tr> <tr><td>connection</td> <td>ConnectionState</td> <td>the connection status</td></tr> <tr><td>rssi</td> <td>int</td> <td>the RSSI</td></tr></tbody></table></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:: </span> <span class="time">9/5/2018, 4:58:02 PM</span></div></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/8.0c28f7da.js" defer></script><script src="/assets/js/app.a01fb809.js" defer></script>
  </body>
</html>
