<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>BeaconPlus Android Software Development Kit Guide | Minew mobile</title>
    <meta name="description" content="A documention site for minew mobile SDKs">
    
    
    <link rel="preload" href="/assets/css/0.styles.ca1b5866.css" as="style"><link rel="preload" href="/assets/js/app.a01fb809.js" as="script"><link rel="preload" href="/assets/js/5.2b963b60.js" as="script"><link rel="prefetch" href="/assets/js/10.e2a86036.js"><link rel="prefetch" href="/assets/js/2.0bf7600d.js"><link rel="prefetch" href="/assets/js/3.f6dc4958.js"><link rel="prefetch" href="/assets/js/4.a7775134.js"><link rel="prefetch" href="/assets/js/6.d487b4d3.js"><link rel="prefetch" href="/assets/js/7.358db2b1.js"><link rel="prefetch" href="/assets/js/8.0c28f7da.js"><link rel="prefetch" href="/assets/js/9.b35cc178.js"><link rel="prefetch" href="/assets/js/11.47018335.js"><link rel="prefetch" href="/assets/js/12.7fc3bf68.js"><link rel="prefetch" href="/assets/js/13.542f537a.js"><link rel="prefetch" href="/assets/js/14.eb9b367c.js"><link rel="prefetch" href="/assets/js/15.f22229cb.js"><link rel="prefetch" href="/assets/js/16.0680fce0.js"><link rel="prefetch" href="/assets/js/17.f14053da.js"><link rel="prefetch" href="/assets/js/18.7c849573.js"><link rel="prefetch" href="/assets/js/19.63b17b4c.js"><link rel="prefetch" href="/assets/js/20.9b19d5b3.js"><link rel="prefetch" href="/assets/js/21.e163a637.js"><link rel="prefetch" href="/assets/js/22.2cfd09f9.js"><link rel="prefetch" href="/assets/js/23.4d29e84b.js"><link rel="prefetch" href="/assets/js/24.b75cf7fd.js"><link rel="prefetch" href="/assets/js/25.c023be9e.js"><link rel="prefetch" href="/assets/js/26.b7a504ac.js"><link rel="prefetch" href="/assets/js/27.3659652a.js"><link rel="prefetch" href="/assets/js/28.234363b1.js"><link rel="prefetch" href="/assets/js/29.c5c75945.js"><link rel="prefetch" href="/assets/js/30.40e5e2dc.js"><link rel="prefetch" href="/assets/js/31.fe2e4acd.js"><link rel="prefetch" href="/assets/js/32.7aa30448.js"><link rel="prefetch" href="/assets/js/33.80e87a66.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.53980843.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ca1b5866.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/minewLogo.png" alt="Minew mobile" class="logo"> <span class="site-name can-hide">Minew mobile</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">iOS</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/iOS/iOS_BeaconPlus_Software_Development_Kit_Guide.html" class="nav-link">BeaconPlus</a></li><li class="dropdown-item"><!----> <a href="/iOS/iOS_MinewTrackerKit_Software_Development_Kit_Guide.html" class="nav-link">TrackerKit</a></li><li class="dropdown-item"><!----> <a href="/iOS/iOS_MinewModuleKit_Software_Development_Kit_Guide.html" class="nav-link">ModuleKit</a></li><li class="dropdown-item"><!----> <a href="/iOS/iOS_Beacon_Software_Development_Kit_Guide.html" class="nav-link">Beacon</a></li><li class="dropdown-item"><!----> <a href="/iOS/iOS_BeaconAdmin_Software_Development_Kit_Guide.html" class="nav-link">BeaconAdmin</a></li><li class="dropdown-item"><!----> <a href="/iOS/iOS_Keyfinder_Software_Development_Kit_Guide.html" class="nav-link">Keyfinder</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Android</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Android/Android_BeaconPlus_Software_Development_Kit_Guide.html" class="nav-link router-link-exact-active router-link-active">BeaconPlus</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_MinewTrackerKit_Software_Development_Kit_Guide.html" class="nav-link">TrackerKit</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_MinewModuleKit_Software_Development_Kit_Guide.html" class="nav-link">ModuleKit</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_Beacon_Software_Development_Kit_Guide.html" class="nav-link">Beacon</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_BeaconAdmin_Software_Development_Kit_Guide.html" class="nav-link">BeaconAdmin</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_Keyfinder_Software_Development_Kit_Guide.html" class="nav-link">Keyfinder</a></li></ul></div></div><div class="nav-item"><a href="/keepintouch.html" class="nav-link">Contact us</a></div><div class="nav-item"><a href="/about.html" class="nav-link">About</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">语言切换</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Android/Android_BeaconPlus_Software_Development_Kit_Guide.html" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_BeaconPlus_Software_Development_Kit_Guide.html" class="nav-link">简体中文</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">iOS</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/iOS/iOS_BeaconPlus_Software_Development_Kit_Guide.html" class="nav-link">BeaconPlus</a></li><li class="dropdown-item"><!----> <a href="/iOS/iOS_MinewTrackerKit_Software_Development_Kit_Guide.html" class="nav-link">TrackerKit</a></li><li class="dropdown-item"><!----> <a href="/iOS/iOS_MinewModuleKit_Software_Development_Kit_Guide.html" class="nav-link">ModuleKit</a></li><li class="dropdown-item"><!----> <a href="/iOS/iOS_Beacon_Software_Development_Kit_Guide.html" class="nav-link">Beacon</a></li><li class="dropdown-item"><!----> <a href="/iOS/iOS_BeaconAdmin_Software_Development_Kit_Guide.html" class="nav-link">BeaconAdmin</a></li><li class="dropdown-item"><!----> <a href="/iOS/iOS_Keyfinder_Software_Development_Kit_Guide.html" class="nav-link">Keyfinder</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Android</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Android/Android_BeaconPlus_Software_Development_Kit_Guide.html" class="nav-link router-link-exact-active router-link-active">BeaconPlus</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_MinewTrackerKit_Software_Development_Kit_Guide.html" class="nav-link">TrackerKit</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_MinewModuleKit_Software_Development_Kit_Guide.html" class="nav-link">ModuleKit</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_Beacon_Software_Development_Kit_Guide.html" class="nav-link">Beacon</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_BeaconAdmin_Software_Development_Kit_Guide.html" class="nav-link">BeaconAdmin</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_Keyfinder_Software_Development_Kit_Guide.html" class="nav-link">Keyfinder</a></li></ul></div></div><div class="nav-item"><a href="/keepintouch.html" class="nav-link">Contact us</a></div><div class="nav-item"><a href="/about.html" class="nav-link">About</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">语言切换</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Android/Android_BeaconPlus_Software_Development_Kit_Guide.html" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_BeaconPlus_Software_Development_Kit_Guide.html" class="nav-link">简体中文</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>BeaconPlus Android Software Development Kit Guide</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/Android/Android_BeaconPlus_Software_Development_Kit_Guide.html#design-instructions" class="sidebar-link">Design instructions</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Android/Android_BeaconPlus_Software_Development_Kit_Guide.html#overall-structure" class="sidebar-link">Overall structure</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Android/Android_BeaconPlus_Software_Development_Kit_Guide.html#get-started" class="sidebar-link">Get Started</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Android/Android_BeaconPlus_Software_Development_Kit_Guide.html#prepare" class="sidebar-link">Prepare</a></li><li class="sidebar-sub-header"><a href="/Android/Android_BeaconPlus_Software_Development_Kit_Guide.html#start-developing" class="sidebar-link">Start Developing</a></li></ul></li><li><a href="/Android/Android_BeaconPlus_Software_Development_Kit_Guide.html#notes" class="sidebar-link">Notes</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Android/Android_BeaconPlus_Software_Development_Kit_Guide.html#change-log" class="sidebar-link">Change log</a><ul class="sidebar-sub-headers"></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="beaconplus-android-software-development-kit-guide"><a href="#beaconplus-android-software-development-kit-guide" aria-hidden="true" class="header-anchor">#</a> BeaconPlus Android Software Development Kit Guide</h1> <ul><li><strong>Updating...</strong></li></ul> <p>This SDK only support devices based on miniBeaconPlus firmware, it doesn't compatible with previous devices, such as iBeacon, eddystone and etc. BeaconSET+ SDK support more feature than BeaconSET SDK. We encountered some issues in the development process, So, please read the document carefully in order to help you get started as soon as possible. At the same time, this document will also inform the notes and issues.</p> <p>please read the part of this document which you need,  part 1 we will explain the architecture of this SDK, part 2 will help developers to get started, part 3 will explain notes in your developing progress, part 4 you can get error codes and descriptions.</p> <h2 id="design-instructions"><a href="#design-instructions" aria-hidden="true" class="header-anchor">#</a> Design instructions</h2> <p>We divide the communications between SDK and devices into two stages: Scanning stage, Connection stage. For ease of understanding, let's take a look at the related classes and the relationships between them.</p> <p><strong>MTCentralManager:</strong> global manager, check system's bluetooth status, listen status changes, the most important is scan and connect to devices;</p> <p><strong>MTPeripheral:</strong> instance of devices, MTCentralManager will create an MTPeripheral instance while it found a physical device, a device corresponds to an instance. every MTPeripheral instance has a MTFrameHandler property and a MTConnectionHandler property(These two properties are explained below);</p> <p><strong>MTFrameHandler:</strong> Advertisement frame analysis, it can analyze all frames from advertisement data of a device. in other words, it's the core of the scanning stage;</p> <p><strong>MTConnectionHandler:</strong> connection Operator. this class control all the operation of device in connection stage.</p> <p>**MinewFrame:**data frame, every minewframe(or subclass) instance corresponds to a data frame, usually created by &quot;MTFrameHandler&quot;, if a device advertises mutiple data frames(such as iBeacon, UID, URL) &quot;MTFrameHandler&quot; will create multiple corresponding MinewFrame instances.</p> <p><strong>MTOTAManager:</strong> OTA, use this class for update device's firmware only.</p> <h2 id="overall-structure"><a href="#overall-structure" aria-hidden="true" class="header-anchor">#</a> Overall structure</h2> <p><img src="/assets/img/BeaconSET+.bcc1157c.png" alt="BeaconSET+"></p> <h4 id="advertisement-stage"><a href="#advertisement-stage" aria-hidden="true" class="header-anchor">#</a> Advertisement Stage</h4> <p>in this stage, <strong>MTCentralManager</strong> will scan and analyze the advertisement data of miniBeaconPlus devices, <strong>MTCentralManager</strong> will create <strong>&quot;MTPeripheral&quot;</strong> instance for every physical devices, developers can get all advertisement data by its <strong>MTFrameHandler</strong> property.</p> <h4 id="connection-stage"><a href="#connection-stage" aria-hidden="true" class="header-anchor">#</a> Connection Stage</h4> <p>After a <strong>MTPeripheral</strong> connected, developer can make some changes of the device by <strong>MTConnectionHandler</strong>(a Property of <strong>MTPeripheral</strong> instance).</p> <h4 id="ota-operations"><a href="#ota-operations" aria-hidden="true" class="header-anchor">#</a> OTA Operations</h4> <p>In general, OTA operations is complicated, so we encapsulates the <strong>MTOTAManager</strong> to perform firmware update operations, please note developer can update devices only in connection status.</p> <h2 id="get-started"><a href="#get-started" aria-hidden="true" class="header-anchor">#</a> Get Started</h2> <h3 id="prepare"><a href="#prepare" aria-hidden="true" class="header-anchor">#</a> Prepare</h3> <h4 id="development-environment"><a href="#development-environment" aria-hidden="true" class="header-anchor">#</a> Development environment:</h4> <ul><li>Android Studio</li> <li>minSdkVersion 18</li></ul> <h4 id="import-to-project"><a href="#import-to-project" aria-hidden="true" class="header-anchor">#</a> Import to Project</h4> <ol><li><p>Copy the development kit MTBeaconPlus.jar file into the libs directory and add dependencies in build.gradle. As shown below:</p> <p><img src="data:image/png;base64,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" alt="make jar"></p> <p><img src="data:image/png;base64,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" alt="add jar"></p> <p>After the 20180502 version, the dfu function will use external dependencies. Please add under build.gradle</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code></code></pre> <div class="line-numbers-wrapper"></div></div></li></ol> <ul><li>// Add dependency library
dependencies {</li></ul> <ul><li><pre><code>  compile files('libs/MTBeaconPlus.jar')
</code></pre></li> <li><pre><code>  compile 'no.nordicsemi.android:dfu:1.6.1'
</code></pre></li></ul> <ul><li><pre><code>  implementation files('libs/MTBeaconPlus.jar')
</code></pre></li> <li><pre><code>  implementation 'no.nordicsemi.android:dfu:1.6.1'
</code></pre>
}<div class="language- line-numbers-mode"><pre class="language-text"><code>
Otherwise it will crash when dfu.add code to proguard-rules.pro file:

```java
-keep public class no.nordicsemi.android.**{*;}​
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ul> <ol start="2"><li>Add the Bluetooth permissions and the corresponding component registration under the AndroidManifest.xml file. As follows:</li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code>   <span class="token operator">&lt;</span>uses<span class="token operator">-</span>permission android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">&quot;android.permission.ACCESS_COARSE_LOCATION&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span>uses<span class="token operator">-</span>permission android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">&quot;android.permission.ACCESS_FINE_LOCATION&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span>uses<span class="token operator">-</span>permission android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">&quot;android.permission.BLUETOOTH&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span>uses<span class="token operator">-</span>permission android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">&quot;android.permission.BLUETOOTH_ADMIN&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span>uses<span class="token operator">-</span>permission android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">&quot;android.permission.READ_EXTERNAL_STORAGE&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span>uses<span class="token operator">-</span>permission android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code>   <span class="token operator">&lt;</span>service android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">&quot;com.minew.beaconplus.sdk.ConnectService&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span>service android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">&quot;com.minew.beaconplus.sdk.services.DfuService&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span>receiver android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">&quot;com.minew.beaconplus.sdk.receivers.BluetoothChangedReceiver&quot;</span><span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span>intent<span class="token operator">-</span>filter<span class="token operator">&gt;</span>
           <span class="token operator">&lt;</span>action android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">&quot;android.bluetooth.adapter.action.STATE_CHANGED&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span><span class="token operator">/</span>intent<span class="token operator">-</span>filter<span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span><span class="token operator">/</span>receiver<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="start-developing"><a href="#start-developing" aria-hidden="true" class="header-anchor">#</a> Start Developing</h3> <h5 id="get-sharedinstance-of-manager"><a href="#get-sharedinstance-of-manager" aria-hidden="true" class="header-anchor">#</a> Get sharedInstance of Manager</h5> <p>First of all, the developer should get the sharedInstance of Manager:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// get sharedInstance</span>
MTCentralManager mtCentralManager <span class="token operator">=</span> MTCentralManager<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// listen the change of iPhone bluetooth</span>
<span class="token comment">// *** also get from &quot;bluetoothstate&quot; property.</span>
<span class="token comment">// *** this SDK will work normally only while state == PowerStatePoweredOn!</span>
mtCentralManager<span class="token punctuation">.</span><span class="token function">setBluetoothChangedListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OnBluetoothStateChangedListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onStateChanged</span><span class="token punctuation">(</span>BluetoothState state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h5 id="scan-devices"><a href="#scan-devices" aria-hidden="true" class="header-anchor">#</a> Scan devices</h5> <p>start scanning task to find devices around you, then you can get their advertisement content, connect to device and change parameters.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/*
  mtCentralManager: sharedInstance of MTCentralManager
*/</span>

<span class="token comment">// start scanning task</span>
mtCentralManager<span class="token punctuation">.</span><span class="token function">startScan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Traverse the List，get instance of every device.</span>
<span class="token comment">// ** you can also display them on views.</span>
mtCentralManager<span class="token punctuation">.</span><span class="token function">setMTCentralManagerListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MTCentralManagerListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onScanedPeripheral</span><span class="token punctuation">(</span><span class="token keyword">final</span> List<span class="token generics function"><span class="token punctuation">&lt;</span>MTPeripheral<span class="token punctuation">&gt;</span></span> peripherals<span class="token punctuation">)</span> <span class="token punctuation">{</span>
               	<span class="token keyword">for</span> <span class="token punctuation">(</span>MTPeripheral mtPeripheral <span class="token operator">:</span> peripherals<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">// get FrameHandler of a device.</span>
                    MTFrameHandler mtFrameHandler <span class="token operator">=</span> mtPeripheral<span class="token punctuation">.</span>mMTFrameHandler<span class="token punctuation">;</span>
                    String mac <span class="token operator">=</span> mtFrameHandler<span class="token punctuation">.</span><span class="token function">getMac</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 		<span class="token comment">//mac address of device</span>
                    String name <span class="token operator">=</span> mtFrameHandler<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// name of device</span>
                  	<span class="token keyword">int</span> battery <span class="token operator">=</span> mtFrameHandler<span class="token punctuation">.</span><span class="token function">getBattery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//battery</span>
                    <span class="token keyword">int</span> rssi <span class="token operator">=</span> mtFrameHandler<span class="token punctuation">.</span><span class="token function">getRssi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">//rssi</span>
                  	<span class="token comment">// all data frames of device（such as:iBeacon，UID，URL...）</span>
                    ArrayList<span class="token generics function"><span class="token punctuation">&lt;</span>MinewFrame<span class="token punctuation">&gt;</span></span> advFrames <span class="token operator">=</span> mtFrameHandler<span class="token punctuation">.</span><span class="token function">getAdvFrames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>at the sometime, you can stop the scanning task in this way:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>// stop scanning task.
mtCentralManager.stopScan();
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>now the developer can get all advertisement data of device in this way. Next, we will talk about how to get frame data, such as <strong>iBeacon</strong>, <strong>URL</strong>, <strong>UID</strong> and etc...</p> <p>Please refer to the code example below.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/*
  mtFrameHandler: a MTFrameHandler instance.
*/</span>
ArrayList<span class="token generics function"><span class="token punctuation">&lt;</span>MinewFrame<span class="token punctuation">&gt;</span></span> advFrames <span class="token operator">=</span> mtFrameHandler<span class="token punctuation">.</span><span class="token function">getAdvFrames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">for</span> <span class="token punctuation">(</span>MinewFrame minewFrame <span class="token operator">:</span> advFrames<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        FrameType frameType <span class="token operator">=</span> minewFrame<span class="token punctuation">.</span><span class="token function">getFrameType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">switch</span> <span class="token punctuation">(</span>frameType<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            <span class="token keyword">case</span> FrameiBeacon<span class="token operator">:</span>
                                IBeaconFrame iBeaconFrame <span class="token operator">=</span> <span class="token punctuation">(</span>IBeaconFrame<span class="token punctuation">)</span> minewFrame<span class="token punctuation">;</span>
                                Log<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span> iBeaconFrame<span class="token punctuation">.</span><span class="token function">getUuid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> iBeaconFrame<span class="token punctuation">.</span><span class="token function">getMajor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> iBeaconFrame<span class="token punctuation">.</span><span class="token function">getMinor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                <span class="token keyword">break</span><span class="token punctuation">;</span>
                            <span class="token keyword">case</span> FrameUID<span class="token operator">:</span>
                                UidFrame uidFrame <span class="token operator">=</span> <span class="token punctuation">(</span>UidFrame<span class="token punctuation">)</span> minewFrame<span class="token punctuation">;</span>
                                Log<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span> uidFrame<span class="token punctuation">.</span><span class="token function">getNamespaceId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> uidFrame<span class="token punctuation">.</span><span class="token function">getInstanceId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                <span class="token keyword">break</span><span class="token punctuation">;</span>
                            <span class="token comment">/*
                               Handle more types by yourself. 
                            */</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p><strong>Important:</strong> for all types of sensor value, if it equals to <em>Double.MIN_VALUE OR Integer.MIN_VALUE</em>, it means that this value is not available.</p> <p>Please refer to the code example below:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>/*
    htFrame: a HTFrame instance
    lightFrame: a LightFrame instance
    accFrame：a AccFrame instance
*/

if (htFrame.getTemperature == Double.MIN_VALUE) {
    Log.v(&quot;tag&quot;,this value is not available.&quot;);
}

if (lightFrame.getLuxValue == Integer.MIN_VALUE) {
    Log.v(&quot;tag&quot;,this value is not available.&quot;);
}

if (accFrame.getXAxis() == Double.MIN_VALUE) {
	Log.v(&quot;tag&quot;,this value is not available.&quot;);
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h5 id="connect-to-device"><a href="#connect-to-device" aria-hidden="true" class="header-anchor">#</a> Connect to device</h5> <p>Connect to the device in order to do more operations(change parameter, OTA). you will find that when connect to device password may need, so ,Please note that callback status <strong>PASSWORDVALIDATING</strong>:</p> <p>Please refer to the code example below.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/*
  mtCentralManager： a MTCentralManager sharedInstance
  mtPeripheral： a MTPeripheral instance
*/</span>
mtCentralManager<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>mtPeripheral<span class="token punctuation">,</span> connectionStatueListener<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/*
there is mutiple state when connect to the device,
only &quot;status == StatusCompleted&quot; means connection operations success.
if exception appears, error will not be NULL
*/</span>
<span class="token keyword">private</span> ConnectionStatueListener connectionStatueListener <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConnectionStatueListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onUpdateConnectionStatus</span><span class="token punctuation">(</span><span class="token keyword">final</span> ConnectionStatus connectionStatus<span class="token punctuation">,</span> <span class="token keyword">final</span> GetPasswordListener getPasswordListener<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">runOnUiThread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token annotation punctuation">@Override</span>
                <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">switch</span> <span class="token punctuation">(</span>connectionStatus<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token comment">//If you need the connect password, will call back this state.</span>
                        <span class="token comment">// !!!:Warnning: passwordRequire must not be NULL!!!</span>
                        <span class="token comment">// the length of password string must be 8.</span>
                        <span class="token keyword">case</span> PASSWORDVALIDATING<span class="token operator">:</span>
                            String password <span class="token operator">=</span> <span class="token string">&quot;minew123&quot;</span><span class="token punctuation">;</span>
                            getPasswordListener<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
                            <span class="token keyword">break</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onError</span><span class="token punctuation">(</span>MTException mtException<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// disconnec from the device.</span>
mtCentralManager<span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span>mtPeripheral<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><h5 id="get-base-information"><a href="#get-base-information" aria-hidden="true" class="header-anchor">#</a> Get base information</h5> <p>the developer can get device information and modify parameters when a device connected.</p> <p>the code example below let the developer get the base data of the device.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/*
   mtPeripheral：a MTPeripheral instance
*/</span>
MTConnectionHandler mtConnectionHandler <span class="token operator">=</span> mtPeripheral<span class="token punctuation">.</span>mMTConnectionHandler<span class="token punctuation">;</span>
<span class="token comment">// current connection status</span>
ConnectState connectState <span class="token operator">=</span> mtConnectionHandler<span class="token punctuation">.</span><span class="token function">getConnectState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// password require or not. None, Require</span>
PasswordState passwordState <span class="token operator">=</span> mtConnectionHandler<span class="token punctuation">.</span><span class="token function">getPasswordState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// device info, such as：（Firmware Version： 0.9.1）;</span>
HashMap<span class="token generics function"><span class="token punctuation">&lt;</span>String<span class="token punctuation">,</span> String<span class="token punctuation">&gt;</span></span> systeminfos <span class="token operator">=</span> mtConnectionHandler<span class="token punctuation">.</span>systeminfos<span class="token punctuation">;</span>
<span class="token comment">// device features</span>
MTConnectionFeature mtConnectionFeature <span class="token operator">=</span> mtConnectionHandler<span class="token punctuation">.</span>mTConnectionFeature<span class="token punctuation">;</span>
<span class="token comment">// atitude of slot(s), </span>
<span class="token keyword">int</span> slotAtitude <span class="token operator">=</span> mtConnectionFeature<span class="token punctuation">.</span><span class="token function">getSlotAtitude</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token comment">// parameters can be modified：none，adv,txpower,adv/txpower</span>
FeatureSupported featureSupported <span class="token operator">=</span> mtConnectionFeature<span class="token punctuation">.</span><span class="token function">getFeatureSupported</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// // frames supported（multiple）</span>
List<span class="token generics function"><span class="token punctuation">&lt;</span>FrameType<span class="token punctuation">&gt;</span></span> supportedSlots <span class="token operator">=</span> mtConnectionFeature<span class="token punctuation">.</span><span class="token function">getSupportedSlots</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Txpower supported（multiple）</span>
<span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> supportedTxpowers <span class="token operator">=</span> mtConnectionFeature<span class="token punctuation">.</span><span class="token function">getSupportedTxpowers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// trigger supported（multiple）</span>
ArrayList<span class="token generics function"><span class="token punctuation">&lt;</span>TriggerType<span class="token punctuation">&gt;</span></span> supportTriggers <span class="token operator">=</span> mtConnectionFeature<span class="token punctuation">.</span>supportTriggers<span class="token punctuation">;</span>
<span class="token comment">// Version of firmware;</span>
Version version <span class="token operator">=</span> mtConnectionFeature<span class="token punctuation">.</span><span class="token function">getVersion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p><strong>PS:</strong> <strong>MTConnectionHandler</strong>’s <em>Version</em> property.</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>The version value comes form firmware version， check the version value to find out functions the device support:
 
// init value
VersionUndefined

// base version, base function only.
VersionBase

// this version or above support custom connection password and device info frame.
Version0_9_8

// this version or above support remote shut down.
Version0_9_9

// this version or above support triggers.
Version2_0_0

// this version or above support triggers with adv configs.
Version2_2_60

// ideal value, support all features.
VersionMax = 1000
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h5 id="get-data-of-each-slot"><a href="#get-data-of-each-slot" aria-hidden="true" class="header-anchor">#</a> Get data of each Slot</h5> <p>Next, let talk about the parameter data of every slot, the reason why we speak about this is because all the content of changing parameters is here.</p> <p><strong>Slot</strong> :Before read the code, let's talk about slot, you can think slot as a advertisement tool, it advertise the content of advertisement data even &quot;don't know&quot; what the content is. such as the 6 slots may like this:</p> <table><thead><tr><th>Slot Number</th> <th>0</th> <th>1</th> <th>2</th> <th>3</th> <th>4</th> <th>5</th></tr></thead> <tbody><tr><td>Adv content</td> <td>iBeacon</td> <td>TLM</td> <td>UID</td> <td>URL</td> <td>HTSensor</td> <td>None</td></tr> <tr><td>Adv interval（ms）</td> <td>1000</td> <td>2000</td> <td>500</td> <td>900</td> <td>3000</td> <td>0</td></tr> <tr><td>RSSI@0/1m（dbm）</td> <td>-1</td> <td>0</td> <td>-4</td> <td>-10</td> <td>-3</td> <td>0</td></tr> <tr><td>Txpower（dbm）</td> <td>4</td> <td>0</td> <td>-4</td> <td>4</td> <td>0</td> <td>0</td></tr></tbody></table> <p>By meaning of the table, the <strong>No.0</strong>  slot will advertise <strong>iBeacon</strong> data, the <strong>No.1</strong> slot will advertise <strong>TLM</strong> data, …, the <strong>No.5</strong> slot will not advertise any data. each of them have their own <strong>advertising interval</strong>, <strong>Txpower</strong> and <strong>Calibration RSSI</strong>. They are independent of each other.</p> <p>PS: <strong>Calibration RSSI(RSSI@0/1m)</strong> is the RSSI when device @ 0/1m(iBeacon is 1, others 0).</p> <p>How to get the slot advertisement data? please refer to the code example below.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/*
    mtConnectionHandler: a MTConnectionHandler instance
*/</span>

<span class="token comment">// each slot has a frame of current device.</span>
<span class="token comment">// atitude of this List is equals to slot atitude(feature.slotAtitude)</span>
<span class="token comment">// </span>
<span class="token comment">// In strict accordance with the order of the slot，such as：0. -&gt; MinewiBeacon，1. -&gt; MinewUID ...</span>
ArrayList<span class="token generics function"><span class="token punctuation">&lt;</span>MinewFrame<span class="token punctuation">&gt;</span></span> allFrames <span class="token operator">=</span> mtConnectionHandler<span class="token punctuation">.</span>allFrames<span class="token punctuation">;</span>

<span class="token comment">/*
   We assume the No.3 slot has iBeacon data, the No.4 slot has UID data.
   let's try to analyze the data of No.3 slot.
*/</span>

<span class="token comment">// due to the defualt object is MinewFrame(the superclass of MinewiBeacon), so we need make a conversion.</span>

<span class="token comment">// get the frame of No.3 slot</span>
MinewFrame minewFrame <span class="token operator">=</span> allFrames<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// check this slot has iBeacon data or not,</span>
<span class="token comment">// *You can not check if you confirm its type.</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>minewFrame<span class="token punctuation">.</span><span class="token function">getFrameType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">==</span>FrameType<span class="token punctuation">.</span>FrameiBeacon<span class="token punctuation">)</span><span class="token punctuation">{</span>
  IBeaconFrame iBeaconFrame <span class="token operator">=</span> <span class="token punctuation">(</span>IBeaconFrame<span class="token punctuation">)</span> minewFrame<span class="token punctuation">;</span>
  
  <span class="token comment">// iBeacon data</span>
  String uuid <span class="token operator">=</span> iBeaconFrame<span class="token punctuation">.</span><span class="token function">getUuid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//uuid</span>
  <span class="token keyword">int</span> major <span class="token operator">=</span> iBeaconFrame<span class="token punctuation">.</span><span class="token function">getMajor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//major</span>
  <span class="token keyword">int</span> minor <span class="token operator">=</span> iBeaconFrame<span class="token punctuation">.</span><span class="token function">getMinor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//minor</span>
  <span class="token comment">// the other parameters of this slot</span>
  <span class="token keyword">int</span> curSlot <span class="token operator">=</span> iBeaconFrame<span class="token punctuation">.</span><span class="token function">getCurSlot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// number of the slot</span>
  <span class="token keyword">int</span> advInterval <span class="token operator">=</span> iBeaconFrame<span class="token punctuation">.</span><span class="token function">getAdvInterval</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// advertisement interval</span>
  <span class="token keyword">int</span> advtxPower <span class="token operator">=</span> iBeaconFrame<span class="token punctuation">.</span><span class="token function">getAdvtxPower</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// RSSI@0/1m</span>
  <span class="token keyword">int</span> radiotxPower <span class="token operator">=</span> iBeaconFrame<span class="token punctuation">.</span><span class="token function">getRadiotxPower</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// radio Txpower  </span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><p>You can analyze the data of other slots in the same way, it's worth noting that when <strong>frameType == FrameNone</strong> means the slot has no data: From another perspective it means this slot is closed.</p> <h5 id="change-slot-data"><a href="#change-slot-data" aria-hidden="true" class="header-anchor">#</a> Change slot data</h5> <p>The developer can modify advertisement and parameters of every slot freely via our APi.</p> <p>We divide the data frame into <strong>static frames</strong> and <strong>dynamic frames</strong>:</p> <ul><li><strong>Static frame</strong>: advertisement data will not change when it was advertise, such as <strong>iBeacon</strong>, <strong>UID</strong>, <strong>URL</strong></li> <li><strong>Dynamic frame</strong>: advertisement data will change while it was advertise, such as <strong>TLM</strong>, <strong>Sensor</strong></li></ul> <p>Please refer to the code example below:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/*
   mtConnectionHandler: a MTConnectionHandler instance
*/</span>

<span class="token comment">// create a uid instance</span>
UidFrame uidFrame <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UidFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
uidFrame<span class="token punctuation">.</span><span class="token function">setFrameType</span><span class="token punctuation">(</span>FrameType<span class="token punctuation">.</span>FrameUID<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// set &quot;namespaceId&quot; and &quot;instanceId&quot; of UID</span>
uidFrame<span class="token punctuation">.</span><span class="token function">setNamespaceId</span><span class="token punctuation">(</span><span class="token string">&quot;0123456789abdcdcba12&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
uidFrame<span class="token punctuation">.</span><span class="token function">setInstanceId</span><span class="token punctuation">(</span><span class="token string">&quot;0123456789dc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// the other parameters of slot</span>
uidFrame<span class="token punctuation">.</span><span class="token function">setRadiotxPower</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Radio txpower.</span>
uidFrame<span class="token punctuation">.</span><span class="token function">setAdvInterval</span><span class="token punctuation">(</span><span class="token number">600</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// advertisement interval</span>
uidFrame<span class="token punctuation">.</span><span class="token function">setAdvtxPower</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// RSSI@0m</span>

<span class="token comment">// write to device.</span>
<span class="token comment">// detail: 1.let No.1 slot advertise UID data, namespaceId：0123456789abdcdcba12 instanceId：0123456789dc</span>
<span class="token comment">//         2.set No.1 slot advertisement interval to 600ms, RSSI@0m to -3dbm, radio txpower to 4dbm </span>
<span class="token comment">//The second parameter is the curSlot number</span>
 mtConnectionHandler<span class="token punctuation">.</span><span class="token function">writeSlotFrame</span><span class="token punctuation">(</span>uidFrame<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">MTCOperationCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token annotation punctuation">@Override</span>
                    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onOperation</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> success<span class="token punctuation">,</span> MTException mtException<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                       <span class="token keyword">if</span><span class="token punctuation">(</span>success<span class="token punctuation">)</span><span class="token punctuation">{</span>
                           Log<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Success!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                       <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                           Log<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span>mtException<span class="token punctuation">.</span>getMessage<span class="token punctuation">)</span><span class="token punctuation">;</span>
                       <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p>Becareful, the slot parameter has ranges:</p> <ul><li><strong>Advertisement interval</strong>: 100 - 5000 (ms)</li> <li><strong>RSSI@0m</strong>: -127 - 0 (dbm)</li></ul> <p><strong>The most important</strong>: Radio txpower is not a range, it's grade, such as: -8, -4, 0, 4. you can get all supported Radio Txpowers from the feature property of the &quot;MTConnectionHandler&quot;</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/*
   mtConnectionFeature: a property of MTConnectionHandler.
*/</span>

<span class="token comment">// get all supported Radio txpower of current device.</span>
<span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> supportedTxpowers <span class="token operator">=</span> mtConnectionFeature<span class="token punctuation">.</span><span class="token function">getSupportedTxpowers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>OK, you can modify any slot in the way above, if you want to close a slot, only need to create a <strong>MinewFrame</strong> instance and make its <strong>frameType</strong> property to <strong>FrameNone</strong>, then write this frame to device. oh don't forget to set a slotnumber for the slot which you want to close.</p> <h5 id="change-global-parameter"><a href="#change-global-parameter" aria-hidden="true" class="header-anchor">#</a> Change global parameter</h5> <p>Global parameter of device is a device level feature, such as connectable, password require, reset to default and etc.</p> <p>Please refer to the code example below.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/*
   mtConnectionHandler: a MTConnectionHandler instance
*/</span>
<span class="token comment">// reset the device</span>
mtConnectionHandler<span class="token punctuation">.</span><span class="token function">resetFactorySetting</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MTCOperationCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            <span class="token annotation punctuation">@Override</span>
                            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onOperation</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> success<span class="token punctuation">,</span> MTException mtException<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                <span class="token keyword">if</span> <span class="token punctuation">(</span>success<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                  Log<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Success!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                                  Log<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Failed!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                <span class="token punctuation">}</span>
                            <span class="token punctuation">}</span>
                        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// update connectable settings</span>
<span class="token comment">// CONNECTABLE_YES: app can connect to the device, CONNECTABLE_NO app can't connect to the device.</span>
<span class="token comment">// if you set CONNECTABLE_NO, you can connect to device by press the button on device maybe next time.</span>
<span class="token comment">// DANGER!!!:if there is no button on device and set CONNECTABLE_NO, the app can't connect to device even forever.</span>
mtConnectionHandler<span class="token punctuation">.</span><span class="token function">updateConnectable</span><span class="token punctuation">(</span>CONNECTABLE_NO<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">MTCOperationCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                <span class="token annotation punctuation">@Override</span>
                                <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onOperation</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token keyword">boolean</span> success<span class="token punctuation">,</span> <span class="token keyword">final</span> MTException mtException<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                  <span class="token keyword">if</span> <span class="token punctuation">(</span>success<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                  	Log<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Success!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                                    Log<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Failed!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                  <span class="token punctuation">}</span>
                                <span class="token punctuation">}</span>
                            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Modify/Add password</span>
<span class="token comment">// !!!: the password string length must be 8, digits or letters；</span>
<span class="token comment">// it will add password if device has no password, update password if device has a password</span>
mtConnectionHandler<span class="token punctuation">.</span><span class="token function">modifyPassword</span><span class="token punctuation">(</span><span class="token string">&quot;minew123&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">MTCOperationCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                <span class="token annotation punctuation">@Override</span>
                                <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onOperation</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token keyword">boolean</span> success<span class="token punctuation">,</span> MTException mtException<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                   <span class="token keyword">if</span> <span class="token punctuation">(</span>success<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                     Log<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Success!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                   <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                                     Log<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Failed!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                   <span class="token punctuation">}</span>
                                <span class="token punctuation">}</span>
                            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// remove password</span>
mtConnectionHandler<span class="token punctuation">.</span><span class="token function">removePassword</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MTCOperationCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                    <span class="token annotation punctuation">@Override</span>
                                    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onOperation</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token keyword">boolean</span> success<span class="token punctuation">,</span> MTException mtException<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                      <span class="token keyword">if</span> <span class="token punctuation">(</span>success<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                  		Log<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Success!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                                        Log<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Failed!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                      <span class="token punctuation">}</span>
                                    <span class="token punctuation">}</span>
                                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// remote shut down the device.</span>
<span class="token comment">// DANGER!!!: please make sure there a button on device, otherwise it may not boot again.</span>
mtConnectionHandler<span class="token punctuation">.</span><span class="token function">powerOff</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MTCOperationCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                    <span class="token annotation punctuation">@Override</span>
                                    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onOperation</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> success<span class="token punctuation">,</span> MTException mtException<span class="token punctuation">)</span> <span class="token punctuation">{</span>
									<span class="token keyword">if</span> <span class="token punctuation">(</span>success<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                  		Log<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Success!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                                        Log<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Failed!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                      <span class="token punctuation">}</span>
                                    <span class="token punctuation">}</span>
                                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br></div></div><h5 id="read-ht-sensor-data"><a href="#read-ht-sensor-data" aria-hidden="true" class="header-anchor">#</a> Read HT Sensor data</h5> <p>BeaconPlus devices integrated a variety of sensors: <strong>HT(Temperature and Humidity )</strong>, <strong>Light</strong>, <strong>Acceleration</strong> and etc, currently we provide APi  for read HT History data.</p> <p>Please make sure the device has <strong>HT Sensor</strong>, otherwise you can't get data correctly.</p> <p>Please refer to the code example below.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/*
   mtConnectionHandler: a MTConnectionHandler instance
*/</span>

<span class="token comment">// read HT History from the device</span>
mtConnectionHandler<span class="token punctuation">.</span><span class="token function">readSensorHistory</span><span class="token punctuation">(</span>curTime<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">ReadHistoricalDataListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token annotation punctuation">@Override</span>
                        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onReceiveHistoricalData</span><span class="token punctuation">(</span>SensorModel sensorModel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                          <span class="token comment">// a record corresponds to an instance</span>
                            <span class="token keyword">int</span> date <span class="token operator">=</span> sensorModel<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// the Unix timestamp</span>
                            <span class="token keyword">float</span> temperature <span class="token operator">=</span> sensorModel<span class="token punctuation">.</span><span class="token function">getTemperature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// temperature data</span>
                            <span class="token keyword">float</span> humidity <span class="token operator">=</span> sensorModel<span class="token punctuation">.</span><span class="token function">getHumidity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// humidity data</span>
                        <span class="token punctuation">}</span>

                        <span class="token annotation punctuation">@Override</span>
                        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onNoHistoricalData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            Log<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>you can vividly display these data with the curve, table or other.</p> <h5 id="set-triggers"><a href="#set-triggers" aria-hidden="true" class="header-anchor">#</a> Set triggers</h5> <p>BeaconPlus device has triggers, you can set triggers for every slot, the device will advertise the corresponding slot only when the trigger condition is met.</p> <p>Please refer to the code example below.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/*
   mtConnectionHandler: a MTConnectionHandler instance
*/</span>

Trigger trigger <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Trigger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
trigger<span class="token punctuation">.</span><span class="token function">setCurSlot</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// Target slot：2</span>
trigger<span class="token punctuation">.</span><span class="token function">setTriggerType</span><span class="token punctuation">(</span>TEMPERATURE_ABOVE_ALARM<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// Triggering condition：temperature above</span>
trigger<span class="token punctuation">.</span><span class="token function">setCondition</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// value：10</span>
mMTConnectionHandler<span class="token punctuation">.</span><span class="token function">setTriggerCondition</span><span class="token punctuation">(</span>trigger<span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">SetTriggerListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token annotation punctuation">@Override</span>
                        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onSetTrigger</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> success<span class="token punctuation">,</span> MTException mtException<span class="token punctuation">)</span> <span class="token punctuation">{</span>
									<span class="token keyword">if</span> <span class="token punctuation">(</span>success<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                  		Log<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Success!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                                        Log<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Failed!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                      <span class="token punctuation">}</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>At the end of this part, you can refer all code above to develop. Of course we made a note for every APi in the SDK, if there is something new, we will update this document.</p> <h2 id="notes"><a href="#notes" aria-hidden="true" class="header-anchor">#</a> Notes</h2> <ol><li>In Android-6.0 or later, Bluetooth scanning requires dynamic application for location permissions, as follows:</li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code>   <span class="token keyword">if</span> <span class="token punctuation">(</span>ContextCompat<span class="token punctuation">.</span><span class="token function">checkSelfPermission</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> Manifest<span class="token punctuation">.</span>permission<span class="token punctuation">.</span>ACCESS_COARSE_LOCATION<span class="token punctuation">)</span>
                   <span class="token operator">!=</span> PackageManager<span class="token punctuation">.</span>PERMISSION_GRANTED<span class="token punctuation">)</span> <span class="token punctuation">{</span>
               ActivityCompat<span class="token punctuation">.</span><span class="token function">requestPermissions</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>
                       <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span>Manifest<span class="token punctuation">.</span>permission<span class="token punctuation">.</span>ACCESS_COARSE_LOCATION<span class="token punctuation">}</span><span class="token punctuation">,</span> PERMISSION_COARSE_LOCATION<span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token punctuation">}</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>​</p> <ol start="2"><li>Because the connection process of the device is in the service, it is recommended to call the following method after the app starts to open the service, otherwise the connection function will not be used. details as follows:</li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code>   <span class="token comment">/*
   	mtCentralManager:a MTConnectionHandler instance
   */</span>
   MTCentralManager mtCentralManager <span class="token operator">=</span> MTCentralManager<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   mtCentralManager<span class="token punctuation">.</span><span class="token function">startService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token comment">//stop ConnectService</span>
   mtCentralManager<span class="token punctuation">.</span><span class="token function">stopService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>​</p> <h2 id="change-log"><a href="#change-log" aria-hidden="true" class="header-anchor">#</a> Change log</h2> <ul><li>2017.10.13  v1.0 first version;</li></ul></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:: </span> <span class="time">9/5/2018, 4:58:02 PM</span></div></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/5.2b963b60.js" defer></script><script src="/assets/js/app.a01fb809.js" defer></script>
  </body>
</html>
