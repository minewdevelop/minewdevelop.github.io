<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MinewBeacon 开发套件说明 | 云里物里移动开发</title>
    <meta name="description" content="云里物里移动SDK文档平台">
    
    
    <link rel="preload" href="/assets/css/0.styles.ca1b5866.css" as="style"><link rel="preload" href="/assets/js/app.a01fb809.js" as="script"><link rel="preload" href="/assets/js/29.c5c75945.js" as="script"><link rel="prefetch" href="/assets/js/10.e2a86036.js"><link rel="prefetch" href="/assets/js/2.0bf7600d.js"><link rel="prefetch" href="/assets/js/3.f6dc4958.js"><link rel="prefetch" href="/assets/js/4.a7775134.js"><link rel="prefetch" href="/assets/js/5.2b963b60.js"><link rel="prefetch" href="/assets/js/6.d487b4d3.js"><link rel="prefetch" href="/assets/js/7.358db2b1.js"><link rel="prefetch" href="/assets/js/8.0c28f7da.js"><link rel="prefetch" href="/assets/js/9.b35cc178.js"><link rel="prefetch" href="/assets/js/11.47018335.js"><link rel="prefetch" href="/assets/js/12.7fc3bf68.js"><link rel="prefetch" href="/assets/js/13.542f537a.js"><link rel="prefetch" href="/assets/js/14.eb9b367c.js"><link rel="prefetch" href="/assets/js/15.f22229cb.js"><link rel="prefetch" href="/assets/js/16.0680fce0.js"><link rel="prefetch" href="/assets/js/17.f14053da.js"><link rel="prefetch" href="/assets/js/18.7c849573.js"><link rel="prefetch" href="/assets/js/19.63b17b4c.js"><link rel="prefetch" href="/assets/js/20.9b19d5b3.js"><link rel="prefetch" href="/assets/js/21.e163a637.js"><link rel="prefetch" href="/assets/js/22.2cfd09f9.js"><link rel="prefetch" href="/assets/js/23.4d29e84b.js"><link rel="prefetch" href="/assets/js/24.b75cf7fd.js"><link rel="prefetch" href="/assets/js/25.c023be9e.js"><link rel="prefetch" href="/assets/js/26.b7a504ac.js"><link rel="prefetch" href="/assets/js/27.3659652a.js"><link rel="prefetch" href="/assets/js/28.234363b1.js"><link rel="prefetch" href="/assets/js/30.40e5e2dc.js"><link rel="prefetch" href="/assets/js/31.fe2e4acd.js"><link rel="prefetch" href="/assets/js/32.7aa30448.js"><link rel="prefetch" href="/assets/js/33.80e87a66.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.53980843.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ca1b5866.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/zh-CN/" class="home-link router-link-active"><img src="/minewLogo.png" alt="云里物里移动开发" class="logo"> <span class="site-name can-hide">云里物里移动开发</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">iOS</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_BeaconPlus_Software_Development_Kit_Guide.html" class="nav-link">BeaconPlus</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_MinewTrackerKit_Software_Development_Kit_Guide.html" class="nav-link">TrackerKit</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_MinewModuleKit_Software_Development_Kit_Guide.html" class="nav-link">ModuleKit</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_Beacon_Software_Development_Kit_Guide.html" class="nav-link router-link-exact-active router-link-active">Beacon</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_BeaconAdmin_Software_Development_Kit_Guide.html" class="nav-link">BeaconAdmin</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_Keyfinder_Software_Development_Kit_Guide.html" class="nav-link">Keyfinder</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Android</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_BeaconPlus_Software_Development_Kit_Guide.html" class="nav-link">BeaconPlus</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_MinewTrackerKit_Software_Development_Kit_Guide.html" class="nav-link">TrackerKit</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_MinewModuleKit_Software_Development_Kit_Guide.html" class="nav-link">ModuleKit</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_Beacon_Software_Development_Kit_Guide.html" class="nav-link">Beacon</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_BeaconAdmin_Software_Development_Kit_Guide.html" class="nav-link">BeaconAdmin</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_Keyfinder_Software_Development_Kit_Guide.html" class="nav-link">Keyfinder</a></li></ul></div></div><div class="nav-item"><a href="/zh-CN/keepintouch.html" class="nav-link">联系我们</a></div><div class="nav-item"><a href="/zh-CN/about.html" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Language</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/iOS/iOS_Beacon_Software_Development_Kit_Guide.html" class="nav-link">English</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_Beacon_Software_Development_Kit_Guide.html" class="nav-link router-link-exact-active router-link-active">简体中文</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">iOS</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_BeaconPlus_Software_Development_Kit_Guide.html" class="nav-link">BeaconPlus</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_MinewTrackerKit_Software_Development_Kit_Guide.html" class="nav-link">TrackerKit</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_MinewModuleKit_Software_Development_Kit_Guide.html" class="nav-link">ModuleKit</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_Beacon_Software_Development_Kit_Guide.html" class="nav-link router-link-exact-active router-link-active">Beacon</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_BeaconAdmin_Software_Development_Kit_Guide.html" class="nav-link">BeaconAdmin</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_Keyfinder_Software_Development_Kit_Guide.html" class="nav-link">Keyfinder</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Android</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_BeaconPlus_Software_Development_Kit_Guide.html" class="nav-link">BeaconPlus</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_MinewTrackerKit_Software_Development_Kit_Guide.html" class="nav-link">TrackerKit</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_MinewModuleKit_Software_Development_Kit_Guide.html" class="nav-link">ModuleKit</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_Beacon_Software_Development_Kit_Guide.html" class="nav-link">Beacon</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_BeaconAdmin_Software_Development_Kit_Guide.html" class="nav-link">BeaconAdmin</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_Keyfinder_Software_Development_Kit_Guide.html" class="nav-link">Keyfinder</a></li></ul></div></div><div class="nav-item"><a href="/zh-CN/keepintouch.html" class="nav-link">联系我们</a></div><div class="nav-item"><a href="/zh-CN/about.html" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Language</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/iOS/iOS_Beacon_Software_Development_Kit_Guide.html" class="nav-link">English</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_Beacon_Software_Development_Kit_Guide.html" class="nav-link router-link-exact-active router-link-active">简体中文</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>MinewBeacon 开发套件说明</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/zh-CN/iOS/iOS_Beacon_Software_Development_Kit_Guide.html#使用前的配置工作" class="sidebar-link">使用前的配置工作</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/zh-CN/iOS/iOS_Beacon_Software_Development_Kit_Guide.html#开始使用" class="sidebar-link">开始使用</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/zh-CN/iOS/iOS_Beacon_Software_Development_Kit_Guide.html#类说明" class="sidebar-link">类说明</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh-CN/iOS/iOS_Beacon_Software_Development_Kit_Guide.html#minewbeacon" class="sidebar-link">MinewBeacon</a></li><li class="sidebar-sub-header"><a href="/zh-CN/iOS/iOS_Beacon_Software_Development_Kit_Guide.html#minewbeaconvalue" class="sidebar-link">MinewBeaconValue</a></li><li class="sidebar-sub-header"><a href="/zh-CN/iOS/iOS_Beacon_Software_Development_Kit_Guide.html#minewbeaconmanager" class="sidebar-link">MinewBeaconManager</a></li></ul></li><li><a href="/zh-CN/iOS/iOS_Beacon_Software_Development_Kit_Guide.html#change-log" class="sidebar-link">Change log</a><ul class="sidebar-sub-headers"></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="minewbeacon-开发套件说明"><a href="#minewbeacon-开发套件说明" aria-hidden="true" class="header-anchor">#</a> MinewBeacon 开发套件说明</h1> <h2 id="使用前的配置工作"><a href="#使用前的配置工作" aria-hidden="true" class="header-anchor">#</a> 使用前的配置工作</h2> <p>当前SDK结合Location与Bluetooth两种框架编写。</p> <p>为了符合苹果的审核规范，需要为是否需求后台支持做一些区分。</p> <p>针对不需求后台支持的开发者：
1、执行扫描方法时：[aManager startScan:uuids backgroundSupport :NO];  请按这里将backgroundSupport置为NO。
2、关闭项目工程中的 Location update 和 Uses Bluetooth LE accessories 两项配置设定。
PS：由于iOS系统限制，对于某些不支持在后台被检测的蓝牙设备，一旦应用进入后台，数据回调将会终止，尽管此时应用的进程并未处于挂起状态。</p> <p>针对需求后台支持的开发者：
1、执行扫描方法时：[aManager startScan:uuids backgroundSupport :YES];请按这里将backgroundSupport置为YES。
2、需要配置项目工程的后台权限： Location update和 Uses Bluetooth LE accessories。同时在项目plist文件中加入“NSLocationAlwaysUsageDescription”项。
PS：当应用进入后台时，SDK将切换至后台模式继续扫描，如果周围有可以在后台模式下被检测到的设备，所有代理方法将会正常回调。</p> <p>针对iOS10系统：</p> <div class="language-objective-c line-numbers-mode"><pre class="language-text"><code>在iOS10系统中，苹果进一步收紧权限控制，我们的SDK使用了蓝牙和地理位置模块，因此需要在工程项目的Plist文件中添加如下配置：
  &lt;!-- 蓝牙 --&gt; 
&lt;key&gt;NSBluetoothPeripheralUsageDescription&lt;/key&gt; 
&lt;string&gt;App需要您的同意,才能使用蓝牙模块&lt;/string&gt; 
  &lt;!-- 位置 --&gt; 
&lt;key&gt;NSLocationUsageDescription&lt;/key&gt; 
&lt;string&gt;App需要您的同意,才能访问位置信息&lt;/string&gt; 
&lt;!-- 在使用期间访问位置 --&gt; 
&lt;key&gt;NSLocationWhenInUseUsageDescription&lt;/key&gt; 
&lt;string&gt;App需要您的同意,才能在使用期间访问位置信息&lt;/string&gt; 
  
 如果需要持续的后台扫描，那么还需要添加如下配置：
&lt;!-- 始终访问位置 --&gt; 
&lt;key&gt;NSLocationAlwaysUsageDescription&lt;/key&gt; 
&lt;string&gt;App需要您的同意,才能始终访问位置信息&lt;/string&gt; 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="开始使用"><a href="#开始使用" aria-hidden="true" class="header-anchor">#</a> 开始使用</h2> <p>MinewBeaconManager（以下简称Manager）类用来发起和停止扫描周边的蓝牙设备，它将为每一个蓝牙设备生成一个对应的Minewbeacon（以下简称Beacon）实例。当Manager扫描到蓝牙设备时，它会持续监听蓝牙设备的数据更新以及这些设备的进出状态（十秒内没有数据更新的设备被认为是消失设备，第一次扫描到或者消失后再次扫描到的设备被认为是出现设备），同时，Manager类还可以监听蓝牙状态的改变并且回调给对应的代理实例。以下是相关代码。</p> <p>1.获取设备实例，配置代理:</p> <div class="language-objective-c line-numbers-mode"><pre class="language-text"><code>MinewBeaconManager *manager = [MinewBeaconManager sharedInstance];
manager.delegate = self;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>2.扫描设备</p> <div class="language-objective-c line-numbers-mode"><pre class="language-text"><code>[manager startScan:@[@&quot;uuid1&quot;, @&quot;uuid2&quot;,...] backgroundSupport:NO];
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>3.通过回调获取设备数据更新</p> <div class="language-objective-c line-numbers-mode"><pre class="language-text"><code>// 获取持续的设备数据更新，此方法每1秒回调一次，当且仅当扫描到设备时才会回调。
- (void)minewBeaconManager:(MinewBeaconManager *)manager didRangeBeacons:(NSArray&lt;MinewBeacon *&gt; *)beacons
{
    NSLog(@&quot;current beacons:%@&quot;, beacons);
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>4.获取beacon实例的数据</p> <p>​    通过-(MinewBeaconValue *)getBeaconValue:(BeaconValueIndex)index方法来获取设备数据，为了数据通用性，我们使用了MinewBeaconValue类（以下简称value）来统一所有的数据类型，value可以对应字符串、整型、浮点型、布尔型数据。每一个index对应一个值，如下示例：</p> <div class="language-objective-c line-numbers-mode"><pre class="language-text"><code>MinewBeacon *beacon = beacons[0];

// 获取uuid
NSString *uuid = [beacon getBeaconValue:BeaconValueIndex_UUID].stringValue; 
// 获取major
NSInteger major = (long)[beacon getBeaconValue:BeaconValueIndex_Major].intValue;
// 获取minor
NSInteger minor = (long)[beacon getBeaconValue:BeaconValueIndex_Minor].intValue;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>附表：ValueIndex以及对应数据类型</p> <table><thead><tr><th>index</th> <th>数据名</th> <th>类型</th> <th>备注</th></tr></thead> <tbody><tr><td>BeaconValueIndex_UUID</td> <td>uuid</td> <td>stringValue</td> <td></td></tr> <tr><td>BeaconValueIndex_Name</td> <td>设备名</td> <td>stringValue</td> <td></td></tr> <tr><td>BeaconValueIndex_Major</td> <td>major</td> <td>intValue</td> <td></td></tr> <tr><td>BeaconValueIndex_Minor</td> <td>minor</td> <td>intValue</td> <td></td></tr> <tr><td>BeaconValueIndex_WechatId</td> <td>微信设备id</td> <td>intValue</td> <td>部分支持</td></tr> <tr><td>BeaconValueIndex_Mac</td> <td>mac地址</td> <td>stringValue</td> <td>部分支持</td></tr> <tr><td>BeaconValueIndex_RSSI</td> <td>rssi</td> <td>intValue</td> <td></td></tr> <tr><td>BeaconValueIndex_BatteryLevel</td> <td>电池电量</td> <td>intValue</td> <td></td></tr> <tr><td>BeaconValueIndex_Temperature</td> <td>温度</td> <td>floatValue</td> <td>部分支持</td></tr> <tr><td>BeaconValueIndex_Humidity</td> <td>湿度</td> <td>floatValue</td> <td>部分支持</td></tr> <tr><td>BeaconValueIndex_Txpower</td> <td>txPower</td> <td>intValue</td> <td></td></tr> <tr><td>BeaconValueIndex_InRange</td> <td>是否在范围内</td> <td>boolValue</td> <td></td></tr> <tr><td>BeaconValueIndex_Connectable</td> <td>是否可连接</td> <td>boolValue</td> <td></td></tr></tbody></table> <p>你只需要按照对应的index来获取想要的数据就可以了。</p> <p>至此，就完成了SDK的基础使用，如果需要更多支持可以参照如下示例：</p> <p>监听设备的进出状态：</p> <div class="language-objective-c line-numbers-mode"><pre class="language-text"><code>// 如果设备8秒内没有数据更新，此设备被认为是已经消失，消失的设备将会在此回调，此方法每5秒一个周期，
- (void)minewBeaconManager:(MinewBeaconManager *)manager disappearBeacons:(NSArray&lt;MinewBeacon *&gt; *)beacons
{
    NSLog(@&quot;---disappear beacons:%@&quot;, beacons);
}

// 第一次被扫描到的或者消失后重新被扫描到的设备被认为是新出现设备，新出现的设备将会在此回调，此方法每3秒一个周期。
- (void)minewBeaconManager:(MinewBeaconManager *)manager appearBeacons:(NSArray&lt;MinewBeacon *&gt; *)beacons
{
    NSLog(@&quot;appear beacons:%@&quot;, beacons);
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>监听蓝牙模块状态更新</p> <p>蓝牙状态一共有三种：</p> <p>BluetoothState：BluetoothStatePowerOn（蓝牙开启），BluetoothStatePowerOff（蓝牙关闭），BluetoothStateUnknown（蓝牙状态未知）</p> <div class="language-objective-c line-numbers-mode"><pre class="language-text"><code>// 因用户或者系统改变的蓝牙开关，都能在以下方法监听到：
- (void)minewBeaconManager:(MinewBeaconManager *)manager didUpdateState:(BluetoothState)state
{
    NSLog(@&quot;Bluetooth state:%ld&quot;, (long)state);
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>当然，你也可以手动检查蓝牙状态：</p> <div class="language-objective-c line-numbers-mode"><pre class="language-text"><code>BluetoothState state = [aManager checkBluetoothState];

if(state == BluetoothStatePowerOn)
  NSLog(@&quot;Bluetooth is PowerOn now.&quot;);
else if ...
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="类说明"><a href="#类说明" aria-hidden="true" class="header-anchor">#</a> 类说明</h2> <h3 id="minewbeacon"><a href="#minewbeacon" aria-hidden="true" class="header-anchor">#</a> MinewBeacon</h3> <p>设备类，每一个设备对应一个此类实例，此类仅有一个方法，通过对应的Index来获取设备的信息：</p> <div class="language-objective-c line-numbers-mode"><pre class="language-text"><code> -(MinewBeaconValue *)getBeaconValue:(BeaconValueIndex)index;

例如获取某个设备实例的UUID：
  [aBeacon getBeaconValue:BeaconValueIndex_UUID].stringValue;

// 这里是设备数据的对应枚举；
 // !!!:必须按照每个设备的数据类型来获取数据。
typedef NS_ENUM(NSInteger, BeaconValueIndex) {
     // UUID      
    BeaconValueIndex_UUID = 1,  // stringValue
    // Major 
    BeaconValueIndex_Major,   // intValue
    // Minor
    BeaconValueIndex_Minor,   // intValue
    // Name
    BeaconValueIndex_Name,   // stringValue
    // RSSI
    BeaconValueIndex_RSSI,   //  intValue
    // 电池电量
    BeaconValueIndex_BatteryLevel,  // intValue
    // 温度，暂时不提供数据
    BeaconValueIndex_Temperature, 
    // 湿度 ，暂时不提供数据
    BeaconValueIndex_Humidity, 
    // TxPower
    BeaconValueIndex_TxPower,  // intValue
    // 设备当前是否在可扫描的范围内
    BeaconValueIndex_InRage,  // boolValue
    // 微信设备Id，（部分设备可获取）
    BeaconValueIndex_WechatId, // intValue
};
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h3 id="minewbeaconvalue"><a href="#minewbeaconvalue" aria-hidden="true" class="header-anchor">#</a> MinewBeaconValue</h3> <div class="language-objective-c line-numbers-mode"><pre class="language-text"><code>// 设备数据类：MinewBeaconValue，从设备获取的所有数据均得到此类实例，请严格按照对应数据类型获取数据

// 获取整形数据
@property (nonatomic, readonly, assign) NSInteger intValue;

// 获取浮点型数据
@property (nonatomic, readonly, assign) float floatValue;

// 获取字符串型数据
@property (nonatomic, readonly, copy) NSString *stringValue;

// 获取16进制data型数据
@property (nonatomic, readonly, strong) NSData  *dataValue;

// 获取bool类型数据
@property (nonatomic, readonly, assign) BOOL boolValue;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="minewbeaconmanager"><a href="#minewbeaconmanager" aria-hidden="true" class="header-anchor">#</a> MinewBeaconManager</h3> <p>设备管理类，用来扫描设备以及更新设备状态等。</p> <div class="language-objective-c line-numbers-mode"><pre class="language-text"><code>// 设备管理类代理
@protocol MinewBeaconManagerDelegate &lt;NSObject&gt;
@optional

// 发现了新的设备，目前以3秒周期，如果没有发现新设备将不会回调
- (void)minewBeaconManager:(MinewBeaconManager * )manager appearBeacons:(NSArray&lt;MinewBeacon *&gt; *)beacons;

// 如果设备在10秒内没有正常的数据更新，则被视为已经离开扫描范围，此方法会回调。
- (void)minewBeaconManager:(MinewBeaconManager * )manager disappearBeacons:(NSArray&lt;MinewBeacon *&gt; *)beacons;

// 每1秒回调一次，当前发现的所有设备，如果周围没有Beacon则不会回调
- (void)minewBeaconManager:(MinewBeaconManager * )manager didRangeBeacons:(NSArray&lt;MinewBeacon *&gt; * )beacons;

@end

// 设备管理类
@interface MinewBeaconManager : NSObject

// 单例
+ (MinewBeaconManager  *)sharedInstance;

// 开始扫描设备，uuids参数是设备的UUID字符串数组，enable参数提供后台支持，如果为NO，则当应用进入后台时停止扫描，反之，应用进入后台将切换至后台模式继续扫描。
- (void)startScan:(NSArray&lt;NSString *&gt; *)uuids backgroundSupport :(BOOL)enable;

// 停止扫描设备
- (void)stopScan;

// 代理指针
@property (nonatomic, strong) id &lt;MinewBeaconManagerDelegate&gt; delegate;

@property (nonatomic, readonly, assign) BluetoothState

// 扫描到的所有设备
@property (nonatomic, readonly, copy) NSArray&lt;MinewBeacon *&gt; *scannedBeacons;

// 当前在范围内的设备
@property (nonatomic, readonly, copy) NSArray&lt;MinewBeacon *&gt; *inRangeBeacons;

@end
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><h2 id="change-log"><a href="#change-log" aria-hidden="true" class="header-anchor">#</a> Change log</h2> <p>2016.12.22 流程梳理更明确，针对iOS10规范适配。</p> <p>2016.9.18 针对苹果审核规范修正。</p> <p>2016.11.29 添加对新固件的Mac地址数据、温湿度传感器数据的支持。</p></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:: </span> <span class="time">2018/9/5 下午4:58:02</span></div></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/29.c5c75945.js" defer></script><script src="/assets/js/app.a01fb809.js" defer></script>
  </body>
</html>
