<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MinewKeyfinder 开发套件说明 | 云里物里移动开发</title>
    <meta name="description" content="云里物里移动SDK文档平台">
    
    
    <link rel="preload" href="/assets/css/0.styles.ca1b5866.css" as="style"><link rel="preload" href="/assets/js/app.a01fb809.js" as="script"><link rel="preload" href="/assets/js/22.2cfd09f9.js" as="script"><link rel="prefetch" href="/assets/js/10.e2a86036.js"><link rel="prefetch" href="/assets/js/2.0bf7600d.js"><link rel="prefetch" href="/assets/js/3.f6dc4958.js"><link rel="prefetch" href="/assets/js/4.a7775134.js"><link rel="prefetch" href="/assets/js/5.2b963b60.js"><link rel="prefetch" href="/assets/js/6.d487b4d3.js"><link rel="prefetch" href="/assets/js/7.358db2b1.js"><link rel="prefetch" href="/assets/js/8.0c28f7da.js"><link rel="prefetch" href="/assets/js/9.b35cc178.js"><link rel="prefetch" href="/assets/js/11.47018335.js"><link rel="prefetch" href="/assets/js/12.7fc3bf68.js"><link rel="prefetch" href="/assets/js/13.542f537a.js"><link rel="prefetch" href="/assets/js/14.eb9b367c.js"><link rel="prefetch" href="/assets/js/15.f22229cb.js"><link rel="prefetch" href="/assets/js/16.0680fce0.js"><link rel="prefetch" href="/assets/js/17.f14053da.js"><link rel="prefetch" href="/assets/js/18.7c849573.js"><link rel="prefetch" href="/assets/js/19.63b17b4c.js"><link rel="prefetch" href="/assets/js/20.9b19d5b3.js"><link rel="prefetch" href="/assets/js/21.e163a637.js"><link rel="prefetch" href="/assets/js/23.4d29e84b.js"><link rel="prefetch" href="/assets/js/24.b75cf7fd.js"><link rel="prefetch" href="/assets/js/25.c023be9e.js"><link rel="prefetch" href="/assets/js/26.b7a504ac.js"><link rel="prefetch" href="/assets/js/27.3659652a.js"><link rel="prefetch" href="/assets/js/28.234363b1.js"><link rel="prefetch" href="/assets/js/29.c5c75945.js"><link rel="prefetch" href="/assets/js/30.40e5e2dc.js"><link rel="prefetch" href="/assets/js/31.fe2e4acd.js"><link rel="prefetch" href="/assets/js/32.7aa30448.js"><link rel="prefetch" href="/assets/js/33.80e87a66.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.53980843.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ca1b5866.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/zh-CN/" class="home-link router-link-active"><img src="/minewLogo.png" alt="云里物里移动开发" class="logo"> <span class="site-name can-hide">云里物里移动开发</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">iOS</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_BeaconPlus_Software_Development_Kit_Guide.html" class="nav-link">BeaconPlus</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_MinewTrackerKit_Software_Development_Kit_Guide.html" class="nav-link">TrackerKit</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_MinewModuleKit_Software_Development_Kit_Guide.html" class="nav-link">ModuleKit</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_Beacon_Software_Development_Kit_Guide.html" class="nav-link">Beacon</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_BeaconAdmin_Software_Development_Kit_Guide.html" class="nav-link">BeaconAdmin</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_Keyfinder_Software_Development_Kit_Guide.html" class="nav-link">Keyfinder</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Android</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_BeaconPlus_Software_Development_Kit_Guide.html" class="nav-link">BeaconPlus</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_MinewTrackerKit_Software_Development_Kit_Guide.html" class="nav-link">TrackerKit</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_MinewModuleKit_Software_Development_Kit_Guide.html" class="nav-link">ModuleKit</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_Beacon_Software_Development_Kit_Guide.html" class="nav-link">Beacon</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_BeaconAdmin_Software_Development_Kit_Guide.html" class="nav-link">BeaconAdmin</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_Keyfinder_Software_Development_Kit_Guide.html" class="nav-link router-link-exact-active router-link-active">Keyfinder</a></li></ul></div></div><div class="nav-item"><a href="/zh-CN/keepintouch.html" class="nav-link">联系我们</a></div><div class="nav-item"><a href="/zh-CN/about.html" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Language</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Android/Android_Keyfinder_Software_Development_Kit_Guide.html" class="nav-link">English</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_Keyfinder_Software_Development_Kit_Guide.html" class="nav-link router-link-exact-active router-link-active">简体中文</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">iOS</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_BeaconPlus_Software_Development_Kit_Guide.html" class="nav-link">BeaconPlus</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_MinewTrackerKit_Software_Development_Kit_Guide.html" class="nav-link">TrackerKit</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_MinewModuleKit_Software_Development_Kit_Guide.html" class="nav-link">ModuleKit</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_Beacon_Software_Development_Kit_Guide.html" class="nav-link">Beacon</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_BeaconAdmin_Software_Development_Kit_Guide.html" class="nav-link">BeaconAdmin</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_Keyfinder_Software_Development_Kit_Guide.html" class="nav-link">Keyfinder</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Android</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_BeaconPlus_Software_Development_Kit_Guide.html" class="nav-link">BeaconPlus</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_MinewTrackerKit_Software_Development_Kit_Guide.html" class="nav-link">TrackerKit</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_MinewModuleKit_Software_Development_Kit_Guide.html" class="nav-link">ModuleKit</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_Beacon_Software_Development_Kit_Guide.html" class="nav-link">Beacon</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_BeaconAdmin_Software_Development_Kit_Guide.html" class="nav-link">BeaconAdmin</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_Keyfinder_Software_Development_Kit_Guide.html" class="nav-link router-link-exact-active router-link-active">Keyfinder</a></li></ul></div></div><div class="nav-item"><a href="/zh-CN/keepintouch.html" class="nav-link">联系我们</a></div><div class="nav-item"><a href="/zh-CN/about.html" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Language</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Android/Android_Keyfinder_Software_Development_Kit_Guide.html" class="nav-link">English</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_Keyfinder_Software_Development_Kit_Guide.html" class="nav-link router-link-exact-active router-link-active">简体中文</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>MinewKeyfinder 开发套件说明</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/zh-CN/Android/Android_Keyfinder_Software_Development_Kit_Guide.html#新建工程" class="sidebar-link">新建工程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh-CN/Android/Android_Keyfinder_Software_Development_Kit_Guide.html#开始使用" class="sidebar-link">开始使用</a></li><li class="sidebar-sub-header"><a href="/zh-CN/Android/Android_Keyfinder_Software_Development_Kit_Guide.html#工作开关" class="sidebar-link">工作开关</a></li></ul></li><li><a href="/zh-CN/Android/Android_Keyfinder_Software_Development_Kit_Guide.html#关于minewdevicevalue的附加说明" class="sidebar-link">关于MinewDeviceValue的附加说明</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/zh-CN/Android/Android_Keyfinder_Software_Development_Kit_Guide.html#changelog" class="sidebar-link">ChangeLog</a><ul class="sidebar-sub-headers"></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="minewkeyfinder-开发套件说明"><a href="#minewkeyfinder-开发套件说明" aria-hidden="true" class="header-anchor">#</a> MinewKeyfinder 开发套件说明</h1> <h2 id="新建工程"><a href="#新建工程" aria-hidden="true" class="header-anchor">#</a> 新建工程</h2> <p>Android Studio配置</p> <p>targetSdkVersion版本选择 21
将minewDevice.jar包放入道libs文件夹下,然后在当前工程下的build.gradle文件配置项中的dependencies新增内容,如下compile files('libs/minewDevice.jar')</p> <p>Eclipse配置</p> <p>targetSdkVersion版本选择 21
将minewDevice.jar包放入道libs文件夹下,右击工程propeties,选择Java build Path，在Library选项中添加minewDevice依赖关系</p> <p>当前SDK需要的权限：</p> <div class="language-android line-numbers-mode"><pre class="language-text"><code>&lt;uses-permission android:name=&quot;android.permission.MOUNT_UNMOUNT_FILESYSTEMS&quot;/&gt;
&lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;/&gt;
&lt;uses-permission android:name=&quot;android.permission.MEDIA_CONTENT_CONTROL&quot;/&gt;
&lt;uses-permission android:name=&quot;android.permission.MODIFY_AUDIO_SETTINGS&quot;/&gt;
&lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot;/&gt;
&lt;uses-permission android:name=&quot;android.permission.RECORD_AUDIO&quot;/&gt;
&lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot;/&gt;
&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;
&lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot;/&gt;
&lt;uses-permission android:name=&quot;android.permission.BLUETOOTH&quot;/&gt;
&lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_ADMIN&quot;/&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>添加service和receiver,如下</p> <div class="language-android line-numbers-mode"><pre class="language-text"><code>&lt;service android:name=&quot;com.minew.device.service.ConnectService&quot;/&gt;
&lt;receiver android:name=&quot;com.minew.device.BluetoothChangedReceiver&quot;&gt;
        &lt;intent-filter&gt;
            &lt;action android:name=&quot;android.bluetooth.adapter.action.STATE_CHANGED&quot;/&gt;
        &lt;/intent-filter&gt;
&lt;/receiver&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>AndroidStudio build.gradle 添加如下依赖：
dependencies {</p> <div class="language-android line-numbers-mode"><pre class="language-text"><code>testCompile 'junit:junit:4.12'
compile 'com.android.support:appcompat-v7:23.4.0'
compile 'com.android.support:recyclerview-v7:23.3.0'
compile 'com.google.code.gson:gson:2.2.4'
compile 'org.greenrobot:eventbus:3.0.0'
compile files('libs/minewDevice.jar')
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>}
具体实现细节，请参考demo。</p> <p>本防丢器SDK提供三个类来获取防丢器信息以及对防丢器进行管理，MinewDeviceManager是所有设备的管理类，MinewDevice是设备实例类，MinewDeviceValue是设备的信息数据类。所有的事件回调采用代理模式。关于各个类的详述请看以下对应部分。注意不要随意的停止扫描，只有当确定所有的设备都已连接上的时候才停止扫描。当有设备断开时要重新开启扫描，否则不能重连。</p> <h3 id="开始使用"><a href="#开始使用" aria-hidden="true" class="header-anchor">#</a> 开始使用</h3> <h4 id="设备管理"><a href="#设备管理" aria-hidden="true" class="header-anchor">#</a> 设备管理</h4> <p>MinewDeviceManager（以下简称Manager）类是一个单例管理类，用来管理扫描／连接／绑定设备以及设备的状态更新等，当然，如果设备有诸如连接状态改变之类的事件，也可以从此类获取到回调。</p> <p>1.初始化Manager，配置代理：</p> <div class="language-android line-numbers-mode"><pre class="language-text"><code>MinewDeviceManager manager = MinewDeviceManager.getInstance(this);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>2.发起扫描，检索周围的设备:</p> <div class="language-android line-numbers-mode"><pre class="language-text"><code> manager.startScan();
     PS：如果用户手动关闭了蓝牙，可以通过监听MinewDeviceManagerListener的回调方法获取到状态改变，state为蓝牙状态
     
 manager.setMinewDeviceManagerListener(MinewDeviceManagerListener minewDeviceManagerListener);
	
 void onUpdateBluetoothState:(BluetoothState state){}   
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>发起扫描后，当Manager检测到周围的设备，会为这些设备依次创建一个MinewDevice实例，同时通过以下三个代理方法回调。</p> <div class="language-android line-numbers-mode"><pre class="language-text"><code>// 只要Manager发现周围的设备此方法即进行回调，devices参数包括所有被扫描过的设备
 void onScanDevices(List&lt;MinewDevice&gt; devices)；

// 此方法仅当设备消失时才进行回调（PS：我们规定，如果被扫描的设备10秒内没有再次被扫描到，那就是消失了。）
 void onDisappearDevices(List&lt;MinewDevice&gt; devices);

// 此方法仅当新出现设备时才进行回调（PS：我们规定，如果设备第一次被扫描到或者之前消失过再次被扫描到都将当作新出现设备。）
 void onAppearDevices(List&lt;MinewDevice&gt; devices);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>当然，开发者也可以使用如下方式主动获取当前扫描到的所有设备：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>List&lt;MinewDevice&gt; allDevices = MinewDeviceManager.scannedDevices;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>3.绑定设备：</p> <p>只有设备被绑定后，我们才对设备的状态进行持续更新，特别是设备与手机之间的连接状态更新。</p> <div class="language-android line-numbers-mode"><pre class="language-text"><code>manager.bind(minewDevice);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>同时，开发者还可以用以下方式获取到之前绑定过的所有设备：</p> <div class="language-android line-numbers-mode"><pre class="language-text"><code>List&lt;MinewDevice&gt; allBindDevices = MinewDeviceManager.bindDevices;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>4.连接到设备：</p> <p>我们提供了主动连接的API，同时通过代理方法监听设备的连接状态改变：</p> <div class="language-android line-numbers-mode"><pre class="language-text"><code>manager.connect(minewDevice);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>如果设备发生连接状态的改变，将通过以下方法回调给开发者：</p> <div class="language-android line-numbers-mode"><pre class="language-text"><code>// 当设备的连接状态发生改变，此方法将会回调
- void onDeviceChangeStatus(MinewDevice device,DeviceLinkStatus status);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>针对已经绑定的设备，我们提供了持续更新设备数据的回调</p> <div class="language-android line-numbers-mode"><pre class="language-text"><code>// 当绑定的设备发生数据改变时，此方法将会回调。
 void onUpdateBindDevice:(List&lt;MinewDevice&gt; device);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="工作开关"><a href="#工作开关" aria-hidden="true" class="header-anchor">#</a> 工作开关</h3> <p>2.1.1版本加入的控制开关。</p> <div class="language-android line-numbers-mode"><pre class="language-text"><code>private boolean disableAutoProcessing;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>此属性默认为false，如果需要停止自动工作，需要设置为true，只要对此属性进行Set操作，相关工作状态将会立即生效。另外值得注意的是。</p> <p>警告：如果您不清晰此属性所带来的影响，请不要随意修改。</p> <p>更多详情请见Demo。</p> <h4 id="单个设备"><a href="#单个设备" aria-hidden="true" class="header-anchor">#</a> 单个设备</h4> <p>对于单个设备，我们为每个设备生成一个MinewDevice（以下简称Device）实例，每个实例包含了设备的信息，以及对设备的操作方法和相关回调。</p> <p>关于设备信息，目前采用键值对的方式获取。比如获取Device的mac地址：</p> <div class="language-android line-numbers-mode"><pre class="language-text"><code>// 获取MAC地址的value
MinewDeviceValue value = minewDevice.getValue(ValueIndex.ValueIndex_MacAddress)；

// 获取MAC地址
String macAddress = value.getStringValue;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>你可能注意到了，这里的  minewDevice.getValue(ValueIndex.ValueIndex_MacAddress)方法返回的是一个MinewValue（以下简称value）类实例，value实例是对多种数据类型的进一步封装，比如bool／integer／string／float等。关于Device信息的对照，后文有更详细的说明。</p> <p>对于Device实例某项数据进行修改参见如下代码：</p> <div class="language-android line-numbers-mode"><pre class="language-text"><code>// 生成一个MinewValue实例
MinewDeviceValue value = MinewDeviceValue.index(ValueIndex.ValueIndex_Connected, true);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>如果要修改的数据是布尔型／整型／浮点型，请按照如下示例进行：</p> <div class="language-android line-numbers-mode"><pre class="language-text"><code>// 配置设备断开报警的延迟时间
minewDevice.setValue(MinewDeviceValue.index(ValueIndex.ValueIndex_AlarmDelay, deleyValue));

// 配置设备断开是否报警
minewDevice.setValue(MinewDeviceValue.index(ValueIndex.ValueIndex_DeviceLoseAlert, loseAlert));
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>我们提供了一些指令，用来控制设备上的一些特性，比如，查找设备，指令发送成功后设备将会响铃</p> <div class="language-android line-numbers-mode"><pre class="language-text"><code>minewDevice.sendInstruction(InstrucIndex_Search);	
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>当指令发送完成后，同样能从回调中获取指令是否成功发送的回调</p> <div class="language-android line-numbers-mode"><pre class="language-text"><code>// index参数是对应的指令枚举，device是某个设备对应的实例，success是布尔值，标注是否成功。
 void onSendData(MinewDevice minewDevice, InstrucIndex index, boolean success);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>当然，还有一些事件不是主动触发的，比如设备向手机发送了一个指令，我们可以使用以下方式监听来自设备端的指令：</p> <div class="language-android line-numbers-mode"><pre class="language-text"><code>// index参数是设备发来的指令枚举
 void onReceiveInstructionfromDevice(InstrucIndex index, MinewDevice device);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>OK，至此你已经可以着手开发了，我们提供了一份Demo代码，你可以对MinewDeviceManager和MinewDevice进行二次封装，用来保证准确接受到每一次的事件回调，当然，这样的示例在Demo里也是有的。</p> <h2 id="关于minewdevicevalue的附加说明"><a href="#关于minewdevicevalue的附加说明" aria-hidden="true" class="header-anchor">#</a> 关于MinewDeviceValue的附加说明</h2> <p>通过设备的属性可以获取到对应类型的值，比如</p> <pre><code> 设备名称：String name = aDeviceValue.stringValue
 电池电量：int battery = aDeviceValue.intValue;
 是否绑定：boolean bind = aDeviceValue.boolValue;
</code></pre> <p>DeviceValue实例共有如下几种属性，可以获取到对应类型的数据，</p> <pre><code>// 数据对应的枚举
pirvate ValueIndex index;

// 获取整形数据
private int intValue;

// 获取浮点型数据
private float floatValue;

// 获取字符串型数据
private String stringValue;

// 获取16进制data型数据
private byte[] dataValue;

// 获取bool类型数据
private boolean boolValue;
</code></pre> <p>如果需要修改设备的某项信息，可以自行生成一个Value实例</p> <pre><code>// 生成一个MinewDeviceValue实例
 public &lt;T&gt; MinewDeviceValue index(ValueIndex index, T t){}

 比如创建名字实例
 MinewDeviceValue nameValue = MinewDeviceValue.index(ValueIndex_Name,&quot;手机&quot;);
 
 创建设备模式实例 
 MinewDeviceValue modeValue = MinewDeviceValue.index(ValueIndex_Mode,2);
</code></pre> <p>​      另外需要注意的是，所有的数据在获取以及生成时，必须严格按照以下对应关系进行。另外并非全部信息都可以被修改，请看下表：</p> <table><thead><tr><th>设备属性</th> <th>说明</th> <th>数据类型</th> <th>读写权限</th> <th>备注</th></tr></thead> <tbody><tr><td>ValueIndex_Name</td> <td>自定义的设备名</td> <td>stringValue</td> <td>可读写</td> <td></td></tr> <tr><td>ValueIndex_HeadImage</td> <td>设备头像</td> <td>dataValue</td> <td>可读写</td> <td></td></tr> <tr><td>ValueIndex_DeviceId</td> <td>从设备读取到的名称</td> <td>stringValue</td> <td>只读</td> <td>蓝牙返回的设备名</td></tr> <tr><td>ValueIndex_MacAddress</td> <td>Mac地址</td> <td>stringValue</td> <td>只读</td> <td></td></tr> <tr><td>ValueIndex_Rssi</td> <td>信号强度</td> <td>intValue</td> <td>只读</td> <td></td></tr> <tr><td>ValueIndex_Mode</td> <td>设备模式</td> <td>intValue</td> <td>可读写</td> <td></td></tr> <tr><td>ValueIndex_Distance</td> <td>设备距离</td> <td>floatValue</td> <td>只读</td> <td></td></tr> <tr><td>ValueIndex_Battery</td> <td>电池电量</td> <td>intValue</td> <td>只读</td> <td></td></tr> <tr><td>ValueIndex_Bind</td> <td>绑定状态</td> <td>boolValue</td> <td>只读</td> <td></td></tr> <tr><td>ValueIndex_DisappearTime</td> <td>断开时间</td> <td>stringValue</td> <td>只读</td> <td>格式：yyyy-MM-dd hh:mm:ss</td></tr> <tr><td>ValueIndex_DisappearLong</td> <td>断开经度</td> <td>floatValue</td> <td>只读</td> <td></td></tr> <tr><td>ValueIndex_DisappearLati</td> <td>断开纬度</td> <td>floatValue</td> <td>只读</td> <td></td></tr> <tr><td>ValueIndex_Connected</td> <td>连接状态</td> <td>boolValue</td> <td>只读</td> <td></td></tr> <tr><td>ValueIndex_DeviceLoseAlert</td> <td>断开报警</td> <td>boolValue</td> <td>可读写</td> <td>标记设备断开时是否响铃</td></tr> <tr><td>ValueIndex_Search</td> <td>查找状态</td> <td>boolValue</td> <td>可读写</td> <td>用于UI更新，设备是否被查找</td></tr> <tr><td>ValueIndex_AppLoseAlert</td> <td>断开通知</td> <td>boolValue</td> <td>可读写</td> <td>用于标记设备断开时手机端是否需要反馈</td></tr> <tr><td>ValueIndex_FeatureSupport</td> <td>设备是否支持参数调整</td> <td>boolValue</td> <td>只读</td> <td>如果设备支持距离调节或者延迟报警调节，这里的值为YES</td></tr> <tr><td>ValueIndex_AlarmDistance</td> <td>调节设备的报警距离</td> <td>intValue</td> <td>可读写</td> <td>一共有1-8，8个档位，距离由近到远（仅针对支持的设备）</td></tr> <tr><td>ValueIndex_AlarmDelay</td> <td>调节设备断开时的报警延迟</td> <td>intValue</td> <td>可读写</td> <td>0-8秒可调范围</td></tr></tbody></table> <h2 id="changelog"><a href="#changelog" aria-hidden="true" class="header-anchor">#</a> ChangeLog</h2> <pre><code>2017.4.26   ver 2.1.2 更新部分文本描述；
2017.4.20   ver 2.1.1 添加工作开关。；
2017.1.6    ver 2.0 添加权限说明以及新特性说明。
2016.9.12   Ver 1.0
</code></pre> <p>​</p> <p>​</p></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:: </span> <span class="time">2018/9/5 下午4:58:02</span></div></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/22.2cfd09f9.js" defer></script><script src="/assets/js/app.a01fb809.js" defer></script>
  </body>
</html>
