<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>BeaconPlus Android开发套件说明 | 云里物里移动开发</title>
    <meta name="description" content="云里物里移动SDK文档平台">
    
    
    <link rel="preload" href="/assets/css/0.styles.ca1b5866.css" as="style"><link rel="preload" href="/assets/js/app.a01fb809.js" as="script"><link rel="preload" href="/assets/js/20.9b19d5b3.js" as="script"><link rel="prefetch" href="/assets/js/10.e2a86036.js"><link rel="prefetch" href="/assets/js/2.0bf7600d.js"><link rel="prefetch" href="/assets/js/3.f6dc4958.js"><link rel="prefetch" href="/assets/js/4.a7775134.js"><link rel="prefetch" href="/assets/js/5.2b963b60.js"><link rel="prefetch" href="/assets/js/6.d487b4d3.js"><link rel="prefetch" href="/assets/js/7.358db2b1.js"><link rel="prefetch" href="/assets/js/8.0c28f7da.js"><link rel="prefetch" href="/assets/js/9.b35cc178.js"><link rel="prefetch" href="/assets/js/11.47018335.js"><link rel="prefetch" href="/assets/js/12.7fc3bf68.js"><link rel="prefetch" href="/assets/js/13.542f537a.js"><link rel="prefetch" href="/assets/js/14.eb9b367c.js"><link rel="prefetch" href="/assets/js/15.f22229cb.js"><link rel="prefetch" href="/assets/js/16.0680fce0.js"><link rel="prefetch" href="/assets/js/17.f14053da.js"><link rel="prefetch" href="/assets/js/18.7c849573.js"><link rel="prefetch" href="/assets/js/19.63b17b4c.js"><link rel="prefetch" href="/assets/js/21.e163a637.js"><link rel="prefetch" href="/assets/js/22.2cfd09f9.js"><link rel="prefetch" href="/assets/js/23.4d29e84b.js"><link rel="prefetch" href="/assets/js/24.b75cf7fd.js"><link rel="prefetch" href="/assets/js/25.c023be9e.js"><link rel="prefetch" href="/assets/js/26.b7a504ac.js"><link rel="prefetch" href="/assets/js/27.3659652a.js"><link rel="prefetch" href="/assets/js/28.234363b1.js"><link rel="prefetch" href="/assets/js/29.c5c75945.js"><link rel="prefetch" href="/assets/js/30.40e5e2dc.js"><link rel="prefetch" href="/assets/js/31.fe2e4acd.js"><link rel="prefetch" href="/assets/js/32.7aa30448.js"><link rel="prefetch" href="/assets/js/33.80e87a66.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.53980843.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ca1b5866.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/zh-CN/" class="home-link router-link-active"><img src="/minewLogo.png" alt="云里物里移动开发" class="logo"> <span class="site-name can-hide">云里物里移动开发</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">iOS</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_BeaconPlus_Software_Development_Kit_Guide.html" class="nav-link">BeaconPlus</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_MinewTrackerKit_Software_Development_Kit_Guide.html" class="nav-link">TrackerKit</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_MinewModuleKit_Software_Development_Kit_Guide.html" class="nav-link">ModuleKit</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_Beacon_Software_Development_Kit_Guide.html" class="nav-link">Beacon</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_BeaconAdmin_Software_Development_Kit_Guide.html" class="nav-link">BeaconAdmin</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_Keyfinder_Software_Development_Kit_Guide.html" class="nav-link">Keyfinder</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Android</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_BeaconPlus_Software_Development_Kit_Guide.html" class="nav-link router-link-exact-active router-link-active">BeaconPlus</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_MinewTrackerKit_Software_Development_Kit_Guide.html" class="nav-link">TrackerKit</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_MinewModuleKit_Software_Development_Kit_Guide.html" class="nav-link">ModuleKit</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_Beacon_Software_Development_Kit_Guide.html" class="nav-link">Beacon</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_BeaconAdmin_Software_Development_Kit_Guide.html" class="nav-link">BeaconAdmin</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_Keyfinder_Software_Development_Kit_Guide.html" class="nav-link">Keyfinder</a></li></ul></div></div><div class="nav-item"><a href="/zh-CN/keepintouch.html" class="nav-link">联系我们</a></div><div class="nav-item"><a href="/zh-CN/about.html" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Language</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Android/Android_BeaconPlus_Software_Development_Kit_Guide.html" class="nav-link">English</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_BeaconPlus_Software_Development_Kit_Guide.html" class="nav-link router-link-exact-active router-link-active">简体中文</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">iOS</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_BeaconPlus_Software_Development_Kit_Guide.html" class="nav-link">BeaconPlus</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_MinewTrackerKit_Software_Development_Kit_Guide.html" class="nav-link">TrackerKit</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_MinewModuleKit_Software_Development_Kit_Guide.html" class="nav-link">ModuleKit</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_Beacon_Software_Development_Kit_Guide.html" class="nav-link">Beacon</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_BeaconAdmin_Software_Development_Kit_Guide.html" class="nav-link">BeaconAdmin</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_Keyfinder_Software_Development_Kit_Guide.html" class="nav-link">Keyfinder</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Android</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_BeaconPlus_Software_Development_Kit_Guide.html" class="nav-link router-link-exact-active router-link-active">BeaconPlus</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_MinewTrackerKit_Software_Development_Kit_Guide.html" class="nav-link">TrackerKit</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_MinewModuleKit_Software_Development_Kit_Guide.html" class="nav-link">ModuleKit</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_Beacon_Software_Development_Kit_Guide.html" class="nav-link">Beacon</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_BeaconAdmin_Software_Development_Kit_Guide.html" class="nav-link">BeaconAdmin</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_Keyfinder_Software_Development_Kit_Guide.html" class="nav-link">Keyfinder</a></li></ul></div></div><div class="nav-item"><a href="/zh-CN/keepintouch.html" class="nav-link">联系我们</a></div><div class="nav-item"><a href="/zh-CN/about.html" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Language</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Android/Android_BeaconPlus_Software_Development_Kit_Guide.html" class="nav-link">English</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_BeaconPlus_Software_Development_Kit_Guide.html" class="nav-link router-link-exact-active router-link-active">简体中文</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>BeaconPlus Android开发套件说明</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/zh-CN/Android/Android_BeaconPlus_Software_Development_Kit_Guide.html#设计说明" class="sidebar-link">设计说明</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/zh-CN/Android/Android_BeaconPlus_Software_Development_Kit_Guide.html#开始上手" class="sidebar-link">开始上手</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/zh-CN/Android/Android_BeaconPlus_Software_Development_Kit_Guide.html#注意事项" class="sidebar-link">注意事项</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/zh-CN/Android/Android_BeaconPlus_Software_Development_Kit_Guide.html#文档版本记录" class="sidebar-link">文档版本记录</a><ul class="sidebar-sub-headers"></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="beaconplus-android开发套件说明"><a href="#beaconplus-android开发套件说明" aria-hidden="true" class="header-anchor">#</a> BeaconPlus Android开发套件说明</h1> <ul><li><strong>持续更新中...</strong></li></ul> <p>本套SDK仅支持基于miniBeaconPlus固件的设备，不再兼容之前的iBeacon，Eddystone等其它设备。相对于之前的单一通道设备SDK来说，现在的这一套BeaconSET+ SDK支持的特性更多。当然开发过程中也遇到过诸多问题，我们会在本文档说明设计缘由以及注意事项。所以，请仔细阅读此文档以便尽快上手进行项目开发。</p> <p>请按需阅读以下每个部分，第一部分我们会说明这套SDK的整体架构，第二部分会帮助开发者上手开发，第三部分会提及开发过程中的注意事项，第四部分可以查阅到错误码的对应说明。</p> <h2 id="设计说明"><a href="#设计说明" aria-hidden="true" class="header-anchor">#</a> 设计说明</h2> <p>我们在SDK里把手机对设备的操作分成了两个阶段：广播阶段和连接阶段。为了便于理解，我们先来看看我们都提供了哪些可以操作的类以及它们的职责：</p> <p>MTCentralManager： 全局管理，可以检查当前手机的蓝牙状态，监听系统的蓝牙状态改变。另外最重要的是可以扫描以及连接到这些设备；</p> <p>MTPeripheral： 设备实例，当CentralManager发现一个新设备时，会对应为其生成一个MTPeripheral实例，以真实的物理设备为单位，一个设备对应一个MTPeripheral实例。它包括了MTConnectionHandler和MTFrameHandler两个属性（下文会继续描述这两个属性的作用）。</p> <p>MTFrameHandler：广播包解析，这个类可以解析某个设备所广播出来的所有数据包，也就是说，它是扫描阶段的核心，所有由MTCentralManager扫描出来的广播数据都由它来解析成对应的数据帧实例。</p> <p>MTConnectionHandler：连接状态操作，所有连接上设备后发生的操作都是由此类完成，包括监听连接状态改变，读取数据，写入数据等。</p> <p>MinewFrame：数据帧，每个此类（或者子类）实例都对应一种数据帧，一般会由MTFrameHandler生成，如果设备正在广播多种数据帧，就会生成多个对应的MinewFrame实例。这些实例可以通过MTFrameHandler获取到。</p> <p>MTOTAManager：空中升级，此类只能用来更新设备固件，它操作的是MTConnectionHandler实例。</p> <h4 id="整体架构图："><a href="#整体架构图：" aria-hidden="true" class="header-anchor">#</a> 整体架构图：</h4> <p><img src="/assets/img/BeaconSET+.bcc1157c.png" alt="BeaconSET+"></p> <h4 id="广播阶段"><a href="#广播阶段" aria-hidden="true" class="header-anchor">#</a> 广播阶段</h4> <p>这个阶段主要是扫描周围的miniBeaconPlus设备和解析这些设备上的广播数据，首先MTCentralManager发起扫描，MTCentralManager会为每一个物理设备生成一个MTPeripheral实例，开发者可以通过它的MTFrameHandler属性拿到关于此设备的所有广播数据。</p> <h4 id="连接阶段"><a href="#连接阶段" aria-hidden="true" class="header-anchor">#</a> 连接阶段</h4> <p>当MTCentralManager扫描到物理设备并生成MTPeripheral实例后，就可以连接到设备，此时针对设备的连接操作都是通过MTConnectionHandler来完成的。</p> <h4 id="ota单独说明"><a href="#ota单独说明" aria-hidden="true" class="header-anchor">#</a> OTA单独说明</h4> <p>常规的OTA逻辑比较复杂，所以单独封装了MTOTAManager来执行OTA操作，必须在已经和设备建立连接的状态下才能进行。</p> <h2 id="开始上手"><a href="#开始上手" aria-hidden="true" class="header-anchor">#</a> 开始上手</h2> <h4 id="准备工作"><a href="#准备工作" aria-hidden="true" class="header-anchor">#</a> 准备工作</h4> <h5 id="开发环境："><a href="#开发环境：" aria-hidden="true" class="header-anchor">#</a> 开发环境：</h5> <ul><li>Android Studio</li> <li>minSdkVersion 18</li></ul> <h5 id="导入到工程："><a href="#导入到工程：" aria-hidden="true" class="header-anchor">#</a> 导入到工程：</h5> <ol><li><p>将开发套件MTBeaconPlus.jar文件拷贝到libs目录下，然后在build.gradle中添加依赖。如下图所示：</p> <p><img src="data:image/png;base64,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" alt="make jar"></p> <p><img src="data:image/png;base64,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" alt="add jar"></p> <p>在20180502版本后，dfu功能将采用外部依赖方式。请在build.gradle下添加</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code></code></pre> <div class="line-numbers-wrapper"></div></div></li></ol> <ul><li>//添加依赖库
dependencies {</li></ul> <ul><li><pre><code>  compile files('libs/MTBeaconPlus.jar')
</code></pre></li> <li><pre><code>  compile 'no.nordicsemi.android:dfu:1.6.1'
</code></pre></li></ul> <ul><li><pre><code>  implementation files('libs/MTBeaconPlus.jar')
</code></pre></li> <li><pre><code>  implementation 'no.nordicsemi.android:dfu:1.6.1'
</code></pre>
}<div class="language- line-numbers-mode"><pre class="language-text"><code>
否则空中升级时将会crash。app混淆时请在混淆文件中加入以下代码:

```java
-keep public class no.nordicsemi.android.**{*;}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ul> <ol start="2"><li>AndroidManifest.xml 文件下添加蓝牙权限和相应的组件注册。如下所示：</li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code>   <span class="token operator">&lt;</span>uses<span class="token operator">-</span>permission android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">&quot;android.permission.ACCESS_COARSE_LOCATION&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span>uses<span class="token operator">-</span>permission android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">&quot;android.permission.ACCESS_FINE_LOCATION&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span>uses<span class="token operator">-</span>permission android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">&quot;android.permission.BLUETOOTH&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span>uses<span class="token operator">-</span>permission android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">&quot;android.permission.BLUETOOTH_ADMIN&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span>uses<span class="token operator">-</span>permission android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">&quot;android.permission.READ_EXTERNAL_STORAGE&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span>uses<span class="token operator">-</span>permission android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code>   <span class="token operator">&lt;</span>service android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">&quot;com.minew.beaconplus.sdk.ConnectService&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span>service android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">&quot;com.minew.beaconplus.sdk.services.DfuService&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span>receiver android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">&quot;com.minew.beaconplus.sdk.receivers.BluetoothChangedReceiver&quot;</span><span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span>intent<span class="token operator">-</span>filter<span class="token operator">&gt;</span>
           <span class="token operator">&lt;</span>action android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">&quot;android.bluetooth.adapter.action.STATE_CHANGED&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span><span class="token operator">/</span>intent<span class="token operator">-</span>filter<span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span><span class="token operator">/</span>receiver<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="开始开发"><a href="#开始开发" aria-hidden="true" class="header-anchor">#</a> 开始开发</h4> <h5 id="获取管理类单例"><a href="#获取管理类单例" aria-hidden="true" class="header-anchor">#</a> 获取管理类单例</h5> <p>首先开发者需要获取一个管理类单例，并且做好开发者需要的监听：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 获取管理类单例</span>
MTCentralManager mtCentralManager <span class="token operator">=</span> MTCentralManager<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 如果需要监听系统蓝牙状态变化请这样做</span>
<span class="token comment">// *** 还可以通过bluetoothstate属性主动获取</span>
<span class="token comment">// *** 仅当state == PowerStatePoweredOn时开发套件才可正常工作</span>
mtCentralManager<span class="token punctuation">.</span><span class="token function">setBluetoothChangedListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OnBluetoothStateChangedListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onStateChanged</span><span class="token punctuation">(</span>BluetoothState state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h5 id="扫描设备"><a href="#扫描设备" aria-hidden="true" class="header-anchor">#</a> 扫描设备</h5> <p>需要通过扫描来发现附近的设备，这样才能获取它们的广播内容，连接并修改设备参数等。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//开始扫描</span>
mtCentralManager<span class="token punctuation">.</span><span class="token function">startScan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 遍历数组，获取每个设备实例</span>
<span class="token comment">// 也可以把它们绑定到UI上，将所有数据显示出来。</span>
mtCentralManager<span class="token punctuation">.</span><span class="token function">setMTCentralManagerListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MTCentralManagerListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onScanedPeripheral</span><span class="token punctuation">(</span><span class="token keyword">final</span> List<span class="token generics function"><span class="token punctuation">&lt;</span>MTPeripheral<span class="token punctuation">&gt;</span></span> peripherals<span class="token punctuation">)</span> <span class="token punctuation">{</span>
               	<span class="token keyword">for</span> <span class="token punctuation">(</span>MTPeripheral mtPeripheral <span class="token operator">:</span> peripherals<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">// 获取设备广播阶段实例</span>
                    MTFrameHandler mtFrameHandler <span class="token operator">=</span> mtPeripheral<span class="token punctuation">.</span>mMTFrameHandler<span class="token punctuation">;</span>
                    String mac <span class="token operator">=</span> mtFrameHandler<span class="token punctuation">.</span><span class="token function">getMac</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 		<span class="token comment">//设备Mac地址</span>
                    String name <span class="token operator">=</span> mtFrameHandler<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">//设备名称</span>
                  	<span class="token keyword">int</span> battery <span class="token operator">=</span> mtFrameHandler<span class="token punctuation">.</span><span class="token function">getBattery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//设备电池电量</span>
                    <span class="token keyword">int</span> rssi <span class="token operator">=</span> mtFrameHandler<span class="token punctuation">.</span><span class="token function">getRssi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">//rssi</span>
                  	<span class="token comment">// 设备广播的所有数据帧（iBeacon，UID，URL...）</span>
                    ArrayList<span class="token generics function"><span class="token punctuation">&lt;</span>MinewFrame<span class="token punctuation">&gt;</span></span> advFrames <span class="token operator">=</span> mtFrameHandler<span class="token punctuation">.</span><span class="token function">getAdvFrames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>另外，你可以在任何时候停止扫描任务。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 通过这种方式停止扫描</span>
mtCentralManager<span class="token punctuation">.</span><span class="token function">stopScan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>通过以上方式我们就可以获取到设备在广播阶段的所有相关数据，进一步的，想要从frameHandler里获取到所有的数据帧，可以参考以下代码示例：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>
<span class="token comment">/*
  mtFrameHandler: MTFrameHandler实例，
*/</span>
ArrayList<span class="token generics function"><span class="token punctuation">&lt;</span>MinewFrame<span class="token punctuation">&gt;</span></span> advFrames <span class="token operator">=</span> mtFrameHandler<span class="token punctuation">.</span><span class="token function">getAdvFrames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">for</span> <span class="token punctuation">(</span>MinewFrame minewFrame <span class="token operator">:</span> advFrames<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        FrameType frameType <span class="token operator">=</span> minewFrame<span class="token punctuation">.</span><span class="token function">getFrameType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">switch</span> <span class="token punctuation">(</span>frameType<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            <span class="token keyword">case</span> FrameiBeacon<span class="token operator">:</span>
                                IBeaconFrame iBeaconFrame <span class="token operator">=</span> <span class="token punctuation">(</span>IBeaconFrame<span class="token punctuation">)</span> minewFrame<span class="token punctuation">;</span>
                                Log<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span> iBeaconFrame<span class="token punctuation">.</span><span class="token function">getUuid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> iBeaconFrame<span class="token punctuation">.</span><span class="token function">getMajor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> iBeaconFrame<span class="token punctuation">.</span><span class="token function">getMinor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                <span class="token keyword">break</span><span class="token punctuation">;</span>
                            <span class="token keyword">case</span> FrameUID<span class="token operator">:</span>
                                UidFrame uidFrame <span class="token operator">=</span> <span class="token punctuation">(</span>UidFrame<span class="token punctuation">)</span> minewFrame<span class="token punctuation">;</span>
                                Log<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span> uidFrame<span class="token punctuation">.</span><span class="token function">getNamespaceId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> uidFrame<span class="token punctuation">.</span><span class="token function">getInstanceId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                <span class="token keyword">break</span><span class="token punctuation">;</span>
                            <span class="token comment">/*
                               更多类型，请自行处理
                            */</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>**重要提示：**在获取所有的传感器数据时，如果值等于<em>MTNAValue</em>（我们定义的无效值常量，在&quot;MTPublicHeader.h“文件中），表示这个数据是无效的。所有的传感器实例（HTFrame，LightFrame，AccFrame）都有这种情况。请参考以下代码：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/*
    htFrame: HTFrame实例
    lightFrame:LightFrame实例
    accFrame：AccFrame实例
*/</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>htFrame<span class="token punctuation">.</span>getTemperature <span class="token operator">==</span> Double<span class="token punctuation">.</span>MIN_VALUE<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Log<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;tag&quot;</span><span class="token punctuation">,</span><span class="token keyword">this</span> value is not available<span class="token punctuation">.</span>&quot;<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>lightFrame<span class="token punctuation">.</span>getLuxValue <span class="token operator">==</span> Integer<span class="token punctuation">.</span>MIN_VALUE<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Log<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;tag&quot;</span><span class="token punctuation">,</span><span class="token keyword">this</span> value is not available<span class="token punctuation">.</span>&quot;<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>accFrame<span class="token punctuation">.</span><span class="token function">getXAxis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> Double<span class="token punctuation">.</span>MIN_VALUE<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	Log<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;tag&quot;</span><span class="token punctuation">,</span><span class="token keyword">this</span> value is not available<span class="token punctuation">.</span>&quot;<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h5 id="连接设备"><a href="#连接设备" aria-hidden="true" class="header-anchor">#</a> 连接设备</h5> <p>要对设备进一步操作（修改参数，OTA），需要先连接到设备。由于有些设备在连接时可能需要密码验证，所以请注意回调状态PASSWORDVALIDATING：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/*
  mtCentralManager： MTCentralManager的单例
  mtPeripheral： MTPeripheral实例
*/</span>
mtCentralManager<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>mtPeripheral<span class="token punctuation">,</span> connectionStatueListener<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 整个连接过程需要经过多个中间状态，如果遇到错误，会通过error抛出</span>
<span class="token comment">// 只有当status == COMPLETED时，才算是连接成功</span>
<span class="token keyword">private</span> ConnectionStatueListener connectionStatueListener <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConnectionStatueListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onUpdateConnectionStatus</span><span class="token punctuation">(</span><span class="token keyword">final</span> ConnectionStatus connectionStatus<span class="token punctuation">,</span> <span class="token keyword">final</span> GetPasswordListener getPasswordListener<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">runOnUiThread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token annotation punctuation">@Override</span>
                <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">switch</span> <span class="token punctuation">(</span>connectionStatus<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token comment">//如果需要连接密码，会回调这个状态</span>
                        <span class="token comment">//密码长度必须为8个长度</span>
                        <span class="token keyword">case</span> PASSWORDVALIDATING<span class="token operator">:</span>
                            String password <span class="token operator">=</span> <span class="token string">&quot;minew123&quot;</span><span class="token punctuation">;</span>
                            getPasswordListener<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
                            <span class="token keyword">break</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onError</span><span class="token punctuation">(</span>MTException mtException<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 断开某个设备的连接状态</span>
mtCentralManager<span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span>mtPeripheral<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h5 id="获取基本信息"><a href="#获取基本信息" aria-hidden="true" class="header-anchor">#</a> 获取基本信息</h5> <p>成功连接到设备后，就可以获取设备信息以及修改设备参数了。我们先来看看怎么获取各种基础数据。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/*
   mtPeripheral： MTPeripheral实例
*/</span>
MTConnectionHandler mtConnectionHandler <span class="token operator">=</span> mtPeripheral<span class="token punctuation">.</span>mMTConnectionHandler<span class="token punctuation">;</span>
<span class="token comment">//当前的设备连接状态</span>
ConnectState connectState <span class="token operator">=</span> mtConnectionHandler<span class="token punctuation">.</span><span class="token function">getConnectState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 连接时是否需要密码，None不需要，Require需要</span>
PasswordState passwordState <span class="token operator">=</span> mtConnectionHandler<span class="token punctuation">.</span><span class="token function">getPasswordState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 设备信息，例如：（Firmware Version： 0.9.1）；</span>
HashMap<span class="token generics function"><span class="token punctuation">&lt;</span>String<span class="token punctuation">,</span> String<span class="token punctuation">&gt;</span></span> systeminfos <span class="token operator">=</span> mtConnectionHandler<span class="token punctuation">.</span>systeminfos<span class="token punctuation">;</span>
<span class="token comment">// 设备特性；</span>
MTConnectionFeature mtConnectionFeature <span class="token operator">=</span> mtConnectionHandler<span class="token punctuation">.</span>mTConnectionFeature<span class="token punctuation">;</span>
<span class="token comment">// 设备的广播通道数量，可以根据此动态生成UI；</span>
<span class="token keyword">int</span> slotAtitude <span class="token operator">=</span> mtConnectionFeature<span class="token punctuation">.</span><span class="token function">getSlotAtitude</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 可以调节参数类型：none不可调，adv可调，txpower可调，adv/txpower均可调</span>
FeatureSupported featureSupported <span class="token operator">=</span> mtConnectionFeature<span class="token punctuation">.</span><span class="token function">getFeatureSupported</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 支持的广播帧类型（多种）</span>
List<span class="token generics function"><span class="token punctuation">&lt;</span>FrameType<span class="token punctuation">&gt;</span></span> supportedSlots <span class="token operator">=</span> mtConnectionFeature<span class="token punctuation">.</span><span class="token function">getSupportedSlots</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 支持的Txpower（多档位）</span>
<span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> supportedTxpowers <span class="token operator">=</span> mtConnectionFeature<span class="token punctuation">.</span><span class="token function">getSupportedTxpowers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//支持的Trigger（多种）</span>
ArrayList<span class="token generics function"><span class="token punctuation">&lt;</span>TriggerType<span class="token punctuation">&gt;</span></span> supportTriggers <span class="token operator">=</span> mtConnectionFeature<span class="token punctuation">.</span>supportTriggers<span class="token punctuation">;</span>
<span class="token comment">// 固件版本枚举，方便处理版本号区分；</span>
Version version <span class="token operator">=</span> mtConnectionFeature<span class="token punctuation">.</span><span class="token function">getVersion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p><strong>PS:</strong> <strong>MTConnectionHandler</strong>的<em>Version</em>属性说明：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Versoin值来自设备的固件版本号，可以通过检查Version的值来判断当前设备支持的功能：
 
// 初始化值 
VersionUndefined

// 基础版本，仅支持基础功能
VersionBase

// 此版本及以上支持自定义连接密码 / 设备信息广播帧
Version0_9_8

// 此版本及以上支持远程关机命令
Version0_9_9

// 此版本及以上开始支持触发器
Version2_0_0

// 此版本及以上开始支持带广播设置的触发器配置
Version2_2_60

// 理想值，支持所有特性。
VersionMax = 1000
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h5 id="获取各通道数据"><a href="#获取各通道数据" aria-hidden="true" class="header-anchor">#</a> 获取各通道数据</h5> <p>接下来可以获取每个通道对应的参数数据，之所以单独讲这部分，是因为所有与修改相关的内容全部在这里。</p> <p>在阅读代码之前，我们先来了解通道的概念：通道相当于一个广播工具，它不管里面是什么内容，只管把内容广播出来，例如一个6通道的设备可能是这样的：</p> <table><thead><tr><th>通道序号</th> <th>0</th> <th>1</th> <th>2</th> <th>3</th> <th>4</th> <th>5</th></tr></thead> <tbody><tr><td>广播内容</td> <td>iBeacon</td> <td>TLM</td> <td>UID</td> <td>URL</td> <td>HTSensor</td> <td>None</td></tr> <tr><td>广播间隔（ms）</td> <td>1000</td> <td>2000</td> <td>500</td> <td>900</td> <td>3000</td> <td>0</td></tr> <tr><td>RSSI@0/1m（dbm）</td> <td>-1</td> <td>0</td> <td>-4</td> <td>-10</td> <td>-3</td> <td>0</td></tr> <tr><td>信号强度（dbm）</td> <td>4</td> <td>0</td> <td>-4</td> <td>4</td> <td>0</td> <td>0</td></tr></tbody></table> <p>上表的意思是，第0个通道广播iBeacon数据，第1个通道广播TLM数据，…，第5个通道不广播任何数据。它们每个都有独立的广播间隔，信号强度和校准值，互相之间没有关系也不产生任何影响。</p> <p>PS：校准值：RSSI@0/1m 指的是手机在设备0/1m（iBeacon为1，其它为0）处的信号强度。</p> <p>接下来我们来看下怎么获取设备的通道数据。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/*
    mtConnectionHandler: MTConnectionHandler实例
*/</span>

<span class="token comment">// 当前设备每一个通道对应的数据帧</span>
<span class="token comment">// 此数组的数量和通道数量保持一致（也就是mtConnectionFeature.getSlotAtitude()）</span>
<span class="token comment">// 按照通道顺序严格排序，比如：0. -&gt; MinewiBeacon，1. -&gt; MinewUID ...</span>
ArrayList<span class="token generics function"><span class="token punctuation">&lt;</span>MinewFrame<span class="token punctuation">&gt;</span></span> allFrames <span class="token operator">=</span> mtConnectionHandler<span class="token punctuation">.</span>allFrames<span class="token punctuation">;</span>

<span class="token comment">/*
   假如第3个通道为iBeacon数据，第4个通道数据为UID，
   我们尝试解析第3个通道的数据。
*/</span>

<span class="token comment">// 由于默认指针是MinewFrame（MinewiBeacon的父级）类型，需要做一下转换。</span>

<span class="token comment">// 获取第3个通道的数据帧</span>
MinewFrame minewFrame <span class="token operator">=</span> allFrames<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 确认此通道是iBeacon类型，如果类型确认，可以不需要做这一步判断</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>minewFrame<span class="token punctuation">.</span><span class="token function">getFrameType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">==</span>FrameType<span class="token punctuation">.</span>FrameiBeacon<span class="token punctuation">)</span><span class="token punctuation">{</span>
  IBeaconFrame iBeaconFrame <span class="token operator">=</span> <span class="token punctuation">(</span>IBeaconFrame<span class="token punctuation">)</span> minewFrame<span class="token punctuation">;</span>
  
  <span class="token comment">// iBeacon数据</span>
  String uuid <span class="token operator">=</span> iBeaconFrame<span class="token punctuation">.</span><span class="token function">getUuid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">int</span> major <span class="token operator">=</span> iBeaconFrame<span class="token punctuation">.</span><span class="token function">getMajor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">int</span> minor <span class="token operator">=</span> iBeaconFrame<span class="token punctuation">.</span><span class="token function">getMinor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 所处通道的参数</span>
  <span class="token keyword">int</span> curSlot <span class="token operator">=</span> iBeaconFrame<span class="token punctuation">.</span><span class="token function">getCurSlot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 第几通道</span>
  <span class="token keyword">int</span> advInterval <span class="token operator">=</span> iBeaconFrame<span class="token punctuation">.</span><span class="token function">getAdvInterval</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 此通道的广播间隔</span>
  <span class="token keyword">int</span> advtxPower <span class="token operator">=</span> iBeaconFrame<span class="token punctuation">.</span><span class="token function">getAdvtxPower</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 此通道的信号校准值 iBeacon：RSSI@1m others： RSSI@0m</span>
  <span class="token keyword">int</span> radiotxPower <span class="token operator">=</span> iBeaconFrame<span class="token punctuation">.</span><span class="token function">getRadiotxPower</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 此通道信号强度</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><p>你可以使用同样的方式来解析其它所有通道，值得注意的是，当frameType == FrameNone 时，说明此通道没有广播数据。</p> <h5 id="修改通道数据"><a href="#修改通道数据" aria-hidden="true" class="header-anchor">#</a> 修改通道数据</h5> <p>通过我们的开发套件，开发者可以自由的修改每个通道的广播数据。</p> <p>我们区分了静态数据帧和动态数据帧，静态数据帧指的是广播数据不会发生变化的：iBeacon，UID，URL等等，动态数据帧指的是广播数据不定时发生变化的：TLM，各类传感器数据等。</p> <p>可以通过下面的参考代码实现。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/*
   mtConnectionHandler: MTConnectionHandler实例
*/</span>

<span class="token comment">// 生成一个uid实例</span>
UidFrame uidFrame <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UidFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
uidFrame<span class="token punctuation">.</span><span class="token function">setFrameType</span><span class="token punctuation">(</span>FrameType<span class="token punctuation">.</span>FrameUID<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 配置uid的namespaceId和instanceId参数</span>
uidFrame<span class="token punctuation">.</span><span class="token function">setNamespaceId</span><span class="token punctuation">(</span><span class="token string">&quot;0123456789abdcdcba12&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
uidFrame<span class="token punctuation">.</span><span class="token function">setInstanceId</span><span class="token punctuation">(</span><span class="token string">&quot;0123456789dc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 通道相关配置</span>
uidFrame<span class="token punctuation">.</span><span class="token function">setRadiotxPower</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 配置这个通道的广播功率</span>
uidFrame<span class="token punctuation">.</span><span class="token function">setAdvInterval</span><span class="token punctuation">(</span><span class="token number">600</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 配置这个通道的广播间隔</span>
uidFrame<span class="token punctuation">.</span><span class="token function">setAdvtxPower</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 配置这个通道的信号校准值 RSSI@0m</span>

<span class="token comment">// 写入到设备</span>
<span class="token comment">// 详情：1.把1通道设置为UID广播，namespaceId：0123456789abdcdcba12，instanceId：0123456789dc</span>
<span class="token comment">//      2.设置1通道的广播间隔为600ms，RSSI@0m为-3dbm，广播功率为：4dbm</span>
<span class="token comment">// 第二个参数为通道序号</span>
 mtConnectionHandler<span class="token punctuation">.</span><span class="token function">writeSlotFrame</span><span class="token punctuation">(</span>uidFrame<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">MTCOperationCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token annotation punctuation">@Override</span>
                    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onOperation</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> success<span class="token punctuation">,</span> MTException mtException<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                       <span class="token keyword">if</span><span class="token punctuation">(</span>success<span class="token punctuation">)</span><span class="token punctuation">{</span>
                           Log<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Success!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                       <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                           Log<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span>mtException<span class="token punctuation">.</span>getMessage<span class="token punctuation">)</span><span class="token punctuation">;</span>
                       <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p>注意，Slot参数有范围：</p> <ul><li><strong>Advertisement interval</strong>: 100 - 5000 (ms)</li> <li><strong>RSSI@0m</strong>: -127 - 0 (dbm)</li></ul> <p>注意**: Radio Txpower不是一个范围，它是几个特征值，如：-8，-4，0，4.你可以从“MTConnectionHandler”的feature属性获取所有支持的Radio Txpowers。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/*
   mtConnectionFeature: a property of MTConnectionHandler.
*/</span>

<span class="token comment">// get all supported Radio txpower of current device.</span>
<span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> supportedTxpowers <span class="token operator">=</span> mtConnectionFeature<span class="token punctuation">.</span><span class="token function">getSupportedTxpowers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>你可以通过相同的方式修改任何一个通道的广播数据，如果需要关闭某个通道，只需要创建一个frameType=FrameNone的对象写入到设备即可，当然，别忘了设置通道序号。</p> <h5 id="修改设备全局参数"><a href="#修改设备全局参数" aria-hidden="true" class="header-anchor">#</a> 修改设备全局参数</h5> <p>设备全局参数指的是设备级的一些特性，比如：配置设备是否可连接，是否需要密码，恢复出厂等。</p> <p>可以通过以下代码示例参考。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 恢复出厂设置</span>
mtConnectionHandler<span class="token punctuation">.</span><span class="token function">resetFactorySetting</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MTCOperationCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            <span class="token annotation punctuation">@Override</span>
                            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onOperation</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> success<span class="token punctuation">,</span> MTException mtException<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                <span class="token keyword">if</span> <span class="token punctuation">(</span>success<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                  Log<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Success!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                                  Log<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Failed!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                <span class="token punctuation">}</span>
                            <span class="token punctuation">}</span>
                        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 更新设备可连接设置</span>
<span class="token comment">// CONNECTABLE_YES为可连接，CONNECTABLE_NO不可连接，</span>
<span class="token comment">// 配置设备不可连接后，可以通过按下设备上的按钮再次连接到设备。</span>
<span class="token comment">// !!!:如果设备上没有按钮，且把设备配置为不可连后，设备将无法再次被连接。</span>
mtConnectionHandler<span class="token punctuation">.</span><span class="token function">updateConnectable</span><span class="token punctuation">(</span>CONNECTABLE_NO<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">MTCOperationCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                <span class="token annotation punctuation">@Override</span>
                                <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onOperation</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token keyword">boolean</span> success<span class="token punctuation">,</span> <span class="token keyword">final</span> MTException mtException<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                  <span class="token keyword">if</span> <span class="token punctuation">(</span>success<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                  	Log<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Success!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                                    Log<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Failed!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                  <span class="token punctuation">}</span>
                                <span class="token punctuation">}</span>
                            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 修改/增加密码</span>
<span class="token comment">// !!!: 只能设置8位密码，数字或英文字母；</span>
<span class="token comment">// 设备没有密码时，会添加密码，设备有密码时，会更新密码。</span>
mtConnectionHandler<span class="token punctuation">.</span><span class="token function">modifyPassword</span><span class="token punctuation">(</span><span class="token string">&quot;minew123&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">MTCOperationCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                <span class="token annotation punctuation">@Override</span>
                                <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onOperation</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token keyword">boolean</span> success<span class="token punctuation">,</span> MTException mtException<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                   <span class="token keyword">if</span> <span class="token punctuation">(</span>success<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                     Log<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Success!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                   <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                                     Log<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Failed!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                   <span class="token punctuation">}</span>
                                <span class="token punctuation">}</span>
                            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 移除密码</span>
mtConnectionHandler<span class="token punctuation">.</span><span class="token function">removePassword</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MTCOperationCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                    <span class="token annotation punctuation">@Override</span>
                                    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onOperation</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token keyword">boolean</span> success<span class="token punctuation">,</span> MTException mtException<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                      <span class="token keyword">if</span> <span class="token punctuation">(</span>success<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                  		Log<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Success!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                                        Log<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Failed!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                      <span class="token punctuation">}</span>
                                    <span class="token punctuation">}</span>
                                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 远程关闭设备</span>
<span class="token comment">// !!!:请确认设备上有按钮，可以通过按下按钮的方式重启，否则关闭后无法重启设备。</span>
mtConnectionHandler<span class="token punctuation">.</span><span class="token function">powerOff</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MTCOperationCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                    <span class="token annotation punctuation">@Override</span>
                                    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onOperation</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> success<span class="token punctuation">,</span> MTException mtException<span class="token punctuation">)</span> <span class="token punctuation">{</span>
									<span class="token keyword">if</span> <span class="token punctuation">(</span>success<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                  		Log<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Success!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                                        Log<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Failed!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                      <span class="token punctuation">}</span>
                                    <span class="token punctuation">}</span>
                                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br></div></div><h5 id="读取设备上的温湿度数据"><a href="#读取设备上的温湿度数据" aria-hidden="true" class="header-anchor">#</a> 读取设备上的温湿度数据</h5> <p>BeaconPlus设备整合了温湿度，光感，加速度等多种传感器，目前我们提供了温湿度历史数据的读取接口。</p> <p>请确认此设备带有温湿度传感器，否则无法正确获取数据。</p> <p>可以通过以下代码示例参考。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/*
   mtConnectionHandler: MTConnectionHandler实例
*/</span>

<span class="token comment">// 从设备上读取温湿度数据</span>
mtConnectionHandler<span class="token punctuation">.</span><span class="token function">readSensorHistory</span><span class="token punctuation">(</span>curTime<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">ReadHistoricalDataListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token annotation punctuation">@Override</span>
                        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onReceiveHistoricalData</span><span class="token punctuation">(</span>SensorModel sensorModel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            <span class="token keyword">int</span> date <span class="token operator">=</span> sensorModel<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 此数据的Unix时间戳；</span>
                            <span class="token keyword">float</span> temperature <span class="token operator">=</span> sensorModel<span class="token punctuation">.</span><span class="token function">getTemperature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 温度数据；</span>
                            <span class="token keyword">float</span> humidity <span class="token operator">=</span> sensorModel<span class="token punctuation">.</span><span class="token function">getHumidity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 湿度数据；</span>
                        <span class="token punctuation">}</span>

                        <span class="token annotation punctuation">@Override</span>
                        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onNoHistoricalData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            Log<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>你可以用表格或者曲线的方式把这些数据生动的呈现出来。</p> <h5 id="配置触发器"><a href="#配置触发器" aria-hidden="true" class="header-anchor">#</a> 配置触发器</h5> <p>BeaconPlus设备加入了触发器功能，你可以给每个通道独立的配置触发器，仅当满足触发条件时设备才会开启对应通道进行广播，否则，对应通道将会一直处于关闭状态。</p> <p>可以通过以下代码示例参考。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/*
   mtConnectionHandler: MTConnectionHandler实例
*/</span>
Trigger trigger <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Trigger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
trigger<span class="token punctuation">.</span><span class="token function">setCurSlot</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 目标通道：2</span>
trigger<span class="token punctuation">.</span><span class="token function">setTriggerType</span><span class="token punctuation">(</span>TEMPERATURE_ABOVE_ALARM<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 触发条件：温度高于</span>
trigger<span class="token punctuation">.</span><span class="token function">setCondition</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 触发值：10</span>
mMTConnectionHandler<span class="token punctuation">.</span><span class="token function">setTriggerCondition</span><span class="token punctuation">(</span>trigger<span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">SetTriggerListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token annotation punctuation">@Override</span>
                        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onSetTrigger</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> success<span class="token punctuation">,</span> MTException mtException<span class="token punctuation">)</span> <span class="token punctuation">{</span>
									<span class="token keyword">if</span> <span class="token punctuation">(</span>success<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                  		Log<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Success!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                                        Log<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Failed!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                      <span class="token punctuation">}</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>现在，你可以参考以上示例进行开发了。</p> <h2 id="注意事项"><a href="#注意事项" aria-hidden="true" class="header-anchor">#</a> 注意事项</h2> <p>1.在Android-6.0以上版本蓝牙扫描需要动态申请地理位置权限，具体如下：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>ContextCompat<span class="token punctuation">.</span><span class="token function">checkSelfPermission</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> Manifest<span class="token punctuation">.</span>permission<span class="token punctuation">.</span>ACCESS_COARSE_LOCATION<span class="token punctuation">)</span>
                <span class="token operator">!=</span> PackageManager<span class="token punctuation">.</span>PERMISSION_GRANTED<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            ActivityCompat<span class="token punctuation">.</span><span class="token function">requestPermissions</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>
                    <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span>Manifest<span class="token punctuation">.</span>permission<span class="token punctuation">.</span>ACCESS_COARSE_LOCATION<span class="token punctuation">}</span><span class="token punctuation">,</span> PERMISSION_COARSE_LOCATION<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>2.由于设备的连接过程是放在Service中，所以建议在app启动后调用以下方法开启服务，否者连接功能将不能使用。具体如下：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/*
	mtCentralManager:MTCentralManager实例
*/</span>
MTCentralManager mtCentralManager <span class="token operator">=</span> MTCentralManager<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mtCentralManager<span class="token punctuation">.</span><span class="token function">startService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//断开服务</span>
mtCentralManager<span class="token punctuation">.</span><span class="token function">stopService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="文档版本记录"><a href="#文档版本记录" aria-hidden="true" class="header-anchor">#</a> 文档版本记录</h2> <ul><li>2017.10.13  v1.0 初版；</li></ul></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:: </span> <span class="time">2018/9/5 下午4:58:02</span></div></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/20.9b19d5b3.js" defer></script><script src="/assets/js/app.a01fb809.js" defer></script>
  </body>
</html>
