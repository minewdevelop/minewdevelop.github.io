<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>BeaconSET Plus Android开发套件说明 | 移动SDK文档</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="汇集 MBeacon, BeaconPlus, MSensor 等产品的移动SDK文档.">
    
    <link rel="preload" href="/assets/css/0.styles.44c319ae.css" as="style"><link rel="preload" href="/assets/js/app.34ff7344.js" as="script"><link rel="preload" href="/assets/js/2.31f2ce87.js" as="script"><link rel="preload" href="/assets/js/1.a9521bca.js" as="script"><link rel="preload" href="/assets/js/29.32b8b022.js" as="script"><link rel="prefetch" href="/assets/js/100.84baab85.js"><link rel="prefetch" href="/assets/js/101.7c09b580.js"><link rel="prefetch" href="/assets/js/102.4f3ba6a6.js"><link rel="prefetch" href="/assets/js/103.36141cf3.js"><link rel="prefetch" href="/assets/js/104.6be6237e.js"><link rel="prefetch" href="/assets/js/105.d0a9d9cd.js"><link rel="prefetch" href="/assets/js/106.b405692e.js"><link rel="prefetch" href="/assets/js/107.664c760e.js"><link rel="prefetch" href="/assets/js/108.45a509fd.js"><link rel="prefetch" href="/assets/js/109.0edef8bf.js"><link rel="prefetch" href="/assets/js/11.b61f3949.js"><link rel="prefetch" href="/assets/js/110.c385b9bd.js"><link rel="prefetch" href="/assets/js/111.52111840.js"><link rel="prefetch" href="/assets/js/112.31b23db6.js"><link rel="prefetch" href="/assets/js/113.c1d220a8.js"><link rel="prefetch" href="/assets/js/114.1e231e2b.js"><link rel="prefetch" href="/assets/js/115.9d79ab8e.js"><link rel="prefetch" href="/assets/js/116.5f0ee7c3.js"><link rel="prefetch" href="/assets/js/117.1d875d61.js"><link rel="prefetch" href="/assets/js/118.2462fd13.js"><link rel="prefetch" href="/assets/js/119.4856f7c6.js"><link rel="prefetch" href="/assets/js/12.19e2c148.js"><link rel="prefetch" href="/assets/js/120.26b0cfed.js"><link rel="prefetch" href="/assets/js/121.9fa8feb3.js"><link rel="prefetch" href="/assets/js/122.565dd746.js"><link rel="prefetch" href="/assets/js/123.149974a7.js"><link rel="prefetch" href="/assets/js/124.b0057d70.js"><link rel="prefetch" href="/assets/js/125.08c340d8.js"><link rel="prefetch" href="/assets/js/13.bf35e539.js"><link rel="prefetch" href="/assets/js/14.478ed167.js"><link rel="prefetch" href="/assets/js/15.83a1a568.js"><link rel="prefetch" href="/assets/js/16.f27bc1db.js"><link rel="prefetch" href="/assets/js/17.e90a58a0.js"><link rel="prefetch" href="/assets/js/18.f7a469a3.js"><link rel="prefetch" href="/assets/js/19.0f7527b6.js"><link rel="prefetch" href="/assets/js/20.d1fa983b.js"><link rel="prefetch" href="/assets/js/21.3cb3cefa.js"><link rel="prefetch" href="/assets/js/22.938c9457.js"><link rel="prefetch" href="/assets/js/23.76e99741.js"><link rel="prefetch" href="/assets/js/24.7c2798c6.js"><link rel="prefetch" href="/assets/js/25.7a2c4183.js"><link rel="prefetch" href="/assets/js/26.144632a3.js"><link rel="prefetch" href="/assets/js/27.bbba3e2f.js"><link rel="prefetch" href="/assets/js/28.94e3a977.js"><link rel="prefetch" href="/assets/js/3.4daa0608.js"><link rel="prefetch" href="/assets/js/30.7666f34e.js"><link rel="prefetch" href="/assets/js/31.efc60d8c.js"><link rel="prefetch" href="/assets/js/32.8f2bb9b7.js"><link rel="prefetch" href="/assets/js/33.0ac7306b.js"><link rel="prefetch" href="/assets/js/34.b05cd920.js"><link rel="prefetch" href="/assets/js/35.13f1bf76.js"><link rel="prefetch" href="/assets/js/36.b42f0e74.js"><link rel="prefetch" href="/assets/js/37.cdabc070.js"><link rel="prefetch" href="/assets/js/38.e4485167.js"><link rel="prefetch" href="/assets/js/39.f912f646.js"><link rel="prefetch" href="/assets/js/4.54dd87c7.js"><link rel="prefetch" href="/assets/js/40.39b7a973.js"><link rel="prefetch" href="/assets/js/41.9c3be8b2.js"><link rel="prefetch" href="/assets/js/42.182ff86b.js"><link rel="prefetch" href="/assets/js/43.8acbd117.js"><link rel="prefetch" href="/assets/js/44.68d56362.js"><link rel="prefetch" href="/assets/js/45.db8a393e.js"><link rel="prefetch" href="/assets/js/46.e01d23ab.js"><link rel="prefetch" href="/assets/js/47.61660617.js"><link rel="prefetch" href="/assets/js/48.f85a4831.js"><link rel="prefetch" href="/assets/js/49.e6e930f7.js"><link rel="prefetch" href="/assets/js/5.17cd0efc.js"><link rel="prefetch" href="/assets/js/50.e2d00833.js"><link rel="prefetch" href="/assets/js/51.d1194bb4.js"><link rel="prefetch" href="/assets/js/52.4053d2b0.js"><link rel="prefetch" href="/assets/js/53.9b11c529.js"><link rel="prefetch" href="/assets/js/54.0d451237.js"><link rel="prefetch" href="/assets/js/55.fdf978f1.js"><link rel="prefetch" href="/assets/js/56.527a09c4.js"><link rel="prefetch" href="/assets/js/57.c3ee2482.js"><link rel="prefetch" href="/assets/js/58.03e7ac11.js"><link rel="prefetch" href="/assets/js/59.fb0641ef.js"><link rel="prefetch" href="/assets/js/6.4693f4d7.js"><link rel="prefetch" href="/assets/js/60.7f360777.js"><link rel="prefetch" href="/assets/js/61.71e5e7f1.js"><link rel="prefetch" href="/assets/js/62.bc9f001f.js"><link rel="prefetch" href="/assets/js/63.1c0e5f82.js"><link rel="prefetch" href="/assets/js/64.a6de6d85.js"><link rel="prefetch" href="/assets/js/65.475b228c.js"><link rel="prefetch" href="/assets/js/66.2845d8d8.js"><link rel="prefetch" href="/assets/js/67.8393d034.js"><link rel="prefetch" href="/assets/js/68.f28b1d17.js"><link rel="prefetch" href="/assets/js/69.9a62578c.js"><link rel="prefetch" href="/assets/js/7.28c424b4.js"><link rel="prefetch" href="/assets/js/70.5a0a876a.js"><link rel="prefetch" href="/assets/js/71.a4971a34.js"><link rel="prefetch" href="/assets/js/72.2736ddd7.js"><link rel="prefetch" href="/assets/js/73.f23a38b0.js"><link rel="prefetch" href="/assets/js/74.72100acf.js"><link rel="prefetch" href="/assets/js/75.223d11ae.js"><link rel="prefetch" href="/assets/js/76.c5aeeac3.js"><link rel="prefetch" href="/assets/js/77.654bb823.js"><link rel="prefetch" href="/assets/js/78.f87f0380.js"><link rel="prefetch" href="/assets/js/79.66b75a8e.js"><link rel="prefetch" href="/assets/js/8.957badf2.js"><link rel="prefetch" href="/assets/js/80.e82e60be.js"><link rel="prefetch" href="/assets/js/81.ff7393fe.js"><link rel="prefetch" href="/assets/js/82.32258b08.js"><link rel="prefetch" href="/assets/js/83.f7eefebe.js"><link rel="prefetch" href="/assets/js/84.de090cb5.js"><link rel="prefetch" href="/assets/js/85.3f4b4d42.js"><link rel="prefetch" href="/assets/js/86.3b6d2577.js"><link rel="prefetch" href="/assets/js/87.d750b44e.js"><link rel="prefetch" href="/assets/js/88.2eb6d962.js"><link rel="prefetch" href="/assets/js/89.aa71fba8.js"><link rel="prefetch" href="/assets/js/90.d3873577.js"><link rel="prefetch" href="/assets/js/91.51168428.js"><link rel="prefetch" href="/assets/js/92.c3dfe4bd.js"><link rel="prefetch" href="/assets/js/93.dece2ab2.js"><link rel="prefetch" href="/assets/js/94.051b35f6.js"><link rel="prefetch" href="/assets/js/95.aab71c64.js"><link rel="prefetch" href="/assets/js/96.11416d90.js"><link rel="prefetch" href="/assets/js/97.f035bcde.js"><link rel="prefetch" href="/assets/js/98.99f391e3.js"><link rel="prefetch" href="/assets/js/99.2683732e.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.0053ac3f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.44c319ae.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="https://www.minew.com/" target="_blank" class="home-link"><img src="/header-logo.png" alt="移动SDK文档" class="logo"> <span class="site-name can-hide"></span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="iOS" class="dropdown-title"><span class="title">iOS</span> <span class="arrow down"></span></button> <button type="button" aria-label="iOS" class="mobile-dropdown-title"><span class="title">iOS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_MTSensorKit_Software_Development_Kit_Guide.html" class="nav-link">
  Sensor
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_MTSensorV3Kit_Software_Development_Kit_Guide.html" class="nav-link">
  Sensor-V3
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_MTIndustrialSensorKit_Software_Development_Kit_Guide.html" class="nav-link">
  MTIndustrialSensorKit
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_MTIndustrialSensorKit_mst03_Software_Development_Kit_Guide.html" class="nav-link">
  Mst03SensorKit
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_MTIndustrialSensorKit_Radar_Development_Kit_Guide.html" class="nav-link">
  RadarSensorKit
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_MTIndustrialSensorKit_pt100_Software_Development_Kit_Guide.html" class="nav-link">
  PT100SensorKit
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_MTIndustrialSensorKit_mbt02_Development_Kit_Guide.html" class="nav-link">
  Connectable Asset Tag
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_BeaconPlus_Software_Development_Kit_Guide.html" class="nav-link">
  BeaconSET Plus
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_MinewTrackerKit_Software_Development_Kit_Guide.html" class="nav-link">
  TrackerKit
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_MinewModuleKit_Software_Development_Kit_Guide.html" class="nav-link">
  ModuleKit
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_BeaconAdmin_Software_Development_Kit_Guide.html" class="nav-link">
  BeaconAdmin
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_MinewToolsKit_Software_Development_Kit_Guide.html" class="nav-link">
  Tools
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_GatewayConfig_Develop_Kit.html" class="nav-link">
  GatewayConfig
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Android" class="dropdown-title"><span class="title">Android</span> <span class="arrow down"></span></button> <button type="button" aria-label="Android" class="mobile-dropdown-title"><span class="title">Android</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_MinewSensorKit_Software_Development_Kit_Guide.html" class="nav-link">
  Sensor
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_MinewSensorKit_v3_Software_Development_Kit_Guide.html" class="nav-link">
  Sensor-V3
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_MinewSensorKit_v3_MTIndustrialSensorKit_Software_Development_Kit_Guide.html" class="nav-link">
  MTIndustrialSensorKit
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_MinewSensorKit_v3_RadarSensorKit_Software_Development_Kit_Guide.html" class="nav-link">
  RadarSensorKit
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_MinewSensorKit_v3_Mst03_Software_Development_Kit_Guide.html" class="nav-link">
  Mst03SensorKit
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_MinewSensorKit_v3_S4_Software_Development_Kit_Guide.html" class="nav-link">
  S4V3SensorKit
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_MinewSensorKit_v3_Mst01_PT100_Software_Development_Kit_Guide.html" class="nav-link">
  MST01_PT100_V3SensorKit
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_MinewSensorKit_v3_MTB02_Software_Development_Kit_Guide.html" class="nav-link">
  MTB02_V3SensorKit
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_BeaconPlus_Software_Development_Kit_Guide.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  BeaconSET Plus
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_MinewTrackerKit_Software_Development_Kit_Guide.html" class="nav-link">
  TrackerKit
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_MinewModuleKit_Software_Development_Kit_Guide.html" class="nav-link">
  ModuleKit
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_BeaconAdmin_Software_Development_Kit_Guide.html" class="nav-link">
  BeaconAdmin
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_MinewToolsKit_Software_Development_Kit_Guide.html" class="nav-link">
  Tools
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_GatewayConfig_Develop_Kit.html" class="nav-link">
  GatewayConfig
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_MinewSensorKit_v3_Mbt02_version2_Software_Development_Kit_Guide.html" class="nav-link">
  Repeater
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_MinewSensorKit_v3_Mwc01_Software_Development_Kit_Guide.html" class="nav-link">
  Badge Bluetooth® Repeater
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_MinewSensorKit_v3_Mbt02_Connectable_Asset_Tag_Software_Development_Kit_Guide.html" class="nav-link">
  Connectable Asset Tag
</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_MinewSensorKit_v3_MTB06_Software_Development_Kit_Guide.html" class="nav-link">
  MTB06_V3SensorKit
</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_MinewMWC03Kit_Software_Development_Kit_Guide.html" class="nav-link">
  MWC03Kit
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">语言切换</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">语言切换</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Android/Android_BeaconPlus_Software_Development_Kit_Guide.html" class="nav-link">
  English
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_BeaconPlus_Software_Development_Kit_Guide.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  简体中文
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="iOS" class="dropdown-title"><span class="title">iOS</span> <span class="arrow down"></span></button> <button type="button" aria-label="iOS" class="mobile-dropdown-title"><span class="title">iOS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_MTSensorKit_Software_Development_Kit_Guide.html" class="nav-link">
  Sensor
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_MTSensorV3Kit_Software_Development_Kit_Guide.html" class="nav-link">
  Sensor-V3
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_MTIndustrialSensorKit_Software_Development_Kit_Guide.html" class="nav-link">
  MTIndustrialSensorKit
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_MTIndustrialSensorKit_mst03_Software_Development_Kit_Guide.html" class="nav-link">
  Mst03SensorKit
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_MTIndustrialSensorKit_Radar_Development_Kit_Guide.html" class="nav-link">
  RadarSensorKit
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_MTIndustrialSensorKit_pt100_Software_Development_Kit_Guide.html" class="nav-link">
  PT100SensorKit
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_MTIndustrialSensorKit_mbt02_Development_Kit_Guide.html" class="nav-link">
  Connectable Asset Tag
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_BeaconPlus_Software_Development_Kit_Guide.html" class="nav-link">
  BeaconSET Plus
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_MinewTrackerKit_Software_Development_Kit_Guide.html" class="nav-link">
  TrackerKit
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_MinewModuleKit_Software_Development_Kit_Guide.html" class="nav-link">
  ModuleKit
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_BeaconAdmin_Software_Development_Kit_Guide.html" class="nav-link">
  BeaconAdmin
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_MinewToolsKit_Software_Development_Kit_Guide.html" class="nav-link">
  Tools
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_GatewayConfig_Develop_Kit.html" class="nav-link">
  GatewayConfig
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Android" class="dropdown-title"><span class="title">Android</span> <span class="arrow down"></span></button> <button type="button" aria-label="Android" class="mobile-dropdown-title"><span class="title">Android</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_MinewSensorKit_Software_Development_Kit_Guide.html" class="nav-link">
  Sensor
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_MinewSensorKit_v3_Software_Development_Kit_Guide.html" class="nav-link">
  Sensor-V3
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_MinewSensorKit_v3_MTIndustrialSensorKit_Software_Development_Kit_Guide.html" class="nav-link">
  MTIndustrialSensorKit
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_MinewSensorKit_v3_RadarSensorKit_Software_Development_Kit_Guide.html" class="nav-link">
  RadarSensorKit
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_MinewSensorKit_v3_Mst03_Software_Development_Kit_Guide.html" class="nav-link">
  Mst03SensorKit
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_MinewSensorKit_v3_S4_Software_Development_Kit_Guide.html" class="nav-link">
  S4V3SensorKit
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_MinewSensorKit_v3_Mst01_PT100_Software_Development_Kit_Guide.html" class="nav-link">
  MST01_PT100_V3SensorKit
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_MinewSensorKit_v3_MTB02_Software_Development_Kit_Guide.html" class="nav-link">
  MTB02_V3SensorKit
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_BeaconPlus_Software_Development_Kit_Guide.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  BeaconSET Plus
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_MinewTrackerKit_Software_Development_Kit_Guide.html" class="nav-link">
  TrackerKit
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_MinewModuleKit_Software_Development_Kit_Guide.html" class="nav-link">
  ModuleKit
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_BeaconAdmin_Software_Development_Kit_Guide.html" class="nav-link">
  BeaconAdmin
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_MinewToolsKit_Software_Development_Kit_Guide.html" class="nav-link">
  Tools
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_GatewayConfig_Develop_Kit.html" class="nav-link">
  GatewayConfig
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_MinewSensorKit_v3_Mbt02_version2_Software_Development_Kit_Guide.html" class="nav-link">
  Repeater
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_MinewSensorKit_v3_Mwc01_Software_Development_Kit_Guide.html" class="nav-link">
  Badge Bluetooth® Repeater
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_MinewSensorKit_v3_Mbt02_Connectable_Asset_Tag_Software_Development_Kit_Guide.html" class="nav-link">
  Connectable Asset Tag
</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_MinewSensorKit_v3_MTB06_Software_Development_Kit_Guide.html" class="nav-link">
  MTB06_V3SensorKit
</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_MinewMWC03Kit_Software_Development_Kit_Guide.html" class="nav-link">
  MWC03Kit
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">语言切换</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">语言切换</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Android/Android_BeaconPlus_Software_Development_Kit_Guide.html" class="nav-link">
  English
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/Android/Android_BeaconPlus_Software_Development_Kit_Guide.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  简体中文
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>BeaconSET Plus Android开发套件说明</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zh-CN/Android/Android_BeaconPlus_Software_Development_Kit_Guide.html#设计说明" class="sidebar-link">设计说明</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh-CN/Android/Android_BeaconPlus_Software_Development_Kit_Guide.html#整体架构图" class="sidebar-link">整体架构图：</a></li><li class="sidebar-sub-header"><a href="/zh-CN/Android/Android_BeaconPlus_Software_Development_Kit_Guide.html#广播阶段" class="sidebar-link">广播阶段</a></li><li class="sidebar-sub-header"><a href="/zh-CN/Android/Android_BeaconPlus_Software_Development_Kit_Guide.html#连接阶段" class="sidebar-link">连接阶段</a></li></ul></li><li><a href="/zh-CN/Android/Android_BeaconPlus_Software_Development_Kit_Guide.html#开始上手" class="sidebar-link">开始上手</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh-CN/Android/Android_BeaconPlus_Software_Development_Kit_Guide.html#准备工作" class="sidebar-link">准备工作</a></li><li class="sidebar-sub-header"><a href="/zh-CN/Android/Android_BeaconPlus_Software_Development_Kit_Guide.html#开始开发" class="sidebar-link">开始开发</a></li><li class="sidebar-sub-header"><a href="/zh-CN/Android/Android_BeaconPlus_Software_Development_Kit_Guide.html#ota单独说明" class="sidebar-link">OTA单独说明</a></li></ul></li><li><a href="/zh-CN/Android/Android_BeaconPlus_Software_Development_Kit_Guide.html#注意事项" class="sidebar-link">注意事项</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/zh-CN/Android/Android_BeaconPlus_Software_Development_Kit_Guide.html#文档版本记录" class="sidebar-link">文档版本记录</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="beaconset-plus-android开发套件说明"><a href="#beaconset-plus-android开发套件说明" class="header-anchor">#</a> BeaconSET Plus Android开发套件说明</h1> <ul><li><strong>持续更新中...</strong></li></ul> <p>本套SDK仅支持基于miniBeaconPlus固件的设备，不再支持其他公司生产的产品。相对于之前的单一通道设备SDK来说，现在的这一套BeaconSET Plus SDK支持的特性更多。当然开发过程中也遇到过诸多问题，我们会在本文档说明设计缘由以及注意事项。所以，请仔细阅读此文档以便尽快上手进行项目开发。</p> <p>请按需阅读以下每个部分，第一部分我们会说明这套SDK的整体架构，第二部分会帮助开发者上手开发，第三部分会提及开发过程中的注意事项，第四部分可以查阅到错误码的对应说明。</p> <h2 id="设计说明"><a href="#设计说明" class="header-anchor">#</a> 设计说明</h2> <p>我们在SDK里把手机对设备的操作分成了两个阶段：广播阶段和连接阶段。为了便于理解，我们先来看看我们都提供了哪些可以操作的类以及它们的职责：</p> <p>MTCentralManager： 全局管理，可以检查当前手机的蓝牙状态，监听系统的蓝牙状态改变。另外最重要的是可以扫描以及连接到这些设备；</p> <p>MTPeripheral： 设备实例，当CentralManager发现一个新设备时，会对应为其生成一个MTPeripheral实例，以真实的物理设备为单位，一个设备对应一个MTPeripheral实例。它包括了MTConnectionHandler和MTFrameHandler两个属性（下文会继续描述这两个属性的作用）。</p> <p>MTFrameHandler：广播包解析，这个类可以解析某个设备所广播出来的所有数据包，也就是说，它是扫描阶段的核心，所有由MTCentralManager扫描出来的广播数据都由它来解析成对应的数据帧实例。</p> <p>MTConnectionHandler：连接状态操作，所有连接上设备后发生的操作都是由此类完成，包括监听连接状态改变，读取数据，写入数据等。</p> <p>MTSensorHandler：传感器操作，所有连接上设备后发生的传感器操作都是由此类完成，包括读取温湿度和设置红外参数。</p> <p>MinewFrame：数据帧，每个此类（或者子类）实例都对应一种数据帧，一般会由MTFrameHandler生成，如果设备正在广播多种数据帧，就会生成多个对应的MinewFrame实例。这些实例可以通过MTFrameHandler获取到。</p> <p>MTOTAManager：空中升级，此类只能用来更新设备固件，它操作的是MTConnectionHandler实例。</p> <h3 id="整体架构图"><a href="#整体架构图" class="header-anchor">#</a> 整体架构图：</h3> <p><img src="/assets/img/BeaconSET+.3b64ceba.png" alt="BeaconSET+"></p> <h3 id="广播阶段"><a href="#广播阶段" class="header-anchor">#</a> 广播阶段</h3> <p>这个阶段主要是扫描周围的miniBeaconPlus设备和解析这些设备上的广播数据，首先MTCentralManager发起扫描，MTCentralManager会为每一个物理设备生成一个MTPeripheral实例，开发者可以通过它的MTFrameHandler属性拿到关于此设备的所有广播数据。</p> <h3 id="连接阶段"><a href="#连接阶段" class="header-anchor">#</a> 连接阶段</h3> <p>当MTCentralManager扫描到物理设备并生成MTPeripheral实例后，就可以连接到设备，此时针对设备的连接操作都是通过MTConnectionHandler来完成的。</p> <h2 id="开始上手"><a href="#开始上手" class="header-anchor">#</a> 开始上手</h2> <h3 id="准备工作"><a href="#准备工作" class="header-anchor">#</a> 准备工作</h3> <h4 id="开发环境"><a href="#开发环境" class="header-anchor">#</a> 开发环境：</h4> <ul><li>Android Studio</li> <li>minSdkVersion 24</li></ul> <h4 id="导入到工程"><a href="#导入到工程" class="header-anchor">#</a> 导入到工程：</h4> <ol><li><p>将开发套件MTBeaconPlus.aar文件拷贝到libs目录下，然后在build.gradle中添加依赖。如下图所示：</p> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQ4AAABNCAYAAABXCorTAAAL5UlEQVR4nO3db2wT9x3H8feZsobQasz4z9qyUdxik9RpVqlau8QsoWPdHiyBhCWFB90TGv6o0p5DgCgdbZ9PWgulfThVhD8h4ekKSSFRkbauISbElhqYtjX4T0MCnRUR6tsD+xzbsWNf4sTx8X1JCLg73/1ysj/5/e7Ov6/iqdumIoQQOpiK3QAhROmR4BBC6PZYsRtQajZsdLBmbXnKsocPHhC4M07ku/tFapUQy0uCQ6cNGzex3mabs7wiGmXUO8SYf7QIrRJieclQpUAUk4mKF1/i+S2Vi9pPVcshju2vw66qRFUbr+2f/X/6eiGKRXocBeZyV+NyV8+7zbfBIF98/tkytUiIwpPgWMFMSpBLJ9/nEoCiFLs5QiQYbqhis9v4w5tvsu6H67Ju43A42LN7D2VlZcvYMiGMw3A9jrXlT2A2m2ltbaGr6wyTU5Mp6x0OB40NDUQiER4ve5zp6ekitTS3qGpj+4G9eBjk5Ik+Asm9Dns9B9tqsMWXqb4e3jlzI+m1L7DnSCNb4uuDVz/mw77gsrZfGJfhguPWrTF6L16ksaFhTngkh0ZX1xmmpqaK3NqFUay17G/z0X38PYYVhaitjrfbGjnWAu+cuZEIDZe/l854mNjr66hSAwzLkEcUgOGGKgBjY7HwKC8vp7W1hXU/XDcnNNJ7IqVEVUNcPXU2EQKmYD/nB8Lg3EKVqoLdghnw3fQmXhPo65fQEAVjyOCA1PDYvbvVMKEBQNjPjUDqovHwBGDGagcCYSYA147fx4JEiAIzbHDAbHiUla0xTmjMQ1GsWG1gUm7w6alBQjhpPtrOsfY2XrNJgIjCMdw1jnRjY2Nc6Oll8u5dQ4cGxIYwofj1T1Ownw/f7Y9f/6jB07YPTn3EpaAMV8TiGbrHobl9+5axQsPi5AV76qLqCmfGIYwp2M9fTg0SwoKrMu1FQizQIxEcRqMoVjxN9YnHzqPuXTS7FHwDsVu2UVsdb9QnfZ/GZsFKGN9IIMsehdDH8EOVQhu5/iWrV69e1D5mZmYW9Xo1NMDJAQsHjrYnlo1eeJfT3tm7LCN1h+g4En/GQw1xVYYpooAUmQFMCKGXDFWEELpJcAghdJPgEELoJsEhhNBNgkMIoZsEhxBCNwkOIYRuEhxCCN3kydESYbX/mFDgDq/+8lcZ149c/5J7k3eXuVXiUSXBUQI2V7pZb7ETCtzJWNMFWPRj8ELoIUOVFW5zpRtnZVWxmyFECgmOFUxCo3QZvXCWDFVWqKUIjah7F507Xaiqj+7jZ7POQarNrr7VqiS+dVvVcohmV/Zv16qhAU6e6INt+zjgsc5Zn/zt3VKmncN0j9os8hIcK9CqVSYmQkG+6J+t9rbYr+JrVDVEKOzEs83OcLY3etVWPIQJqpbEouEz7zMc/7f24ZkTBoqCnblf47fXt3FgZztvYIzwSP/5YrOs7eWYtTelRIWRyVBlBfpB2RrMVlvKH/vTz7C50l2Q/U9MhLG6KjJ2o6Oqje21Tnw+f0GOBTB+eZBRVcVsMeYMZLOzzNc8MnO7So9jBSovX7uk1zZC/YPQ1kh9VR+nvWkr7RW4LH6udoOntkAHjJdrmAgHgNkehzYfaraiUhDvrSQNfTJtkzy0gtlhk1bAKr04FcwdOlW1HKLJ6af7+CiVSdtmOl4m2izzmWQrrJVYPjHbU9FbSCuf85Nrm6qWQzSZB2OTQ+10zTl/mUhwPJK8jPgbaapwgzf1TVZdVwMDnzBEBZ4CHCmq2tjeVIM1PMj5YRK5oYUGA5/Q2RdMfGC0olIQnxKRHjqPB5Ne08jB+lDiw6Ttx+rvpfPkjcSy7VUQ8M4Oq4JXP6ZTe417F5072zloSf1QKoqLpiPQffw9TitKfLsdKcfL5imLGZgglJqNOs+VvkJaeZ2fPLaJcdJc6+fEn87GAiNHDR4ZqjyihvoHCaV1raO2OjzOxc9NqihWtu5rp+PIYTqPvoXHEuZqd9pvWi1MLseOZVJu8GmPP6W7b/KeS31zB27iC5MYZiXv52TXbNfJFOznkldJDLtUX0/Kfkzec5z3qVhrt6bUnUkvdMXwFa6E1KzDusR5c+/igMdKaODK4ope6Syklev85LsNABbwdc/fy0gmPY4SpEZV/vvvf/HMTzaimBb4Rg3cxBeuwVVp51Iw9sZ6qtKJ1T/Ih0EFMj9nll/70i8eunfRua8dl9bttlfgskBo4GbqGzUYJoQTqw1I+wWf3IVXQ9pSK9ZM+9Fox/GF5qwauumnyRkvYJU4VmqPwaQECWUYgWjBuDXp573y0buLn9M1uZDWcPa7XplkPj96ttHXW5LgKDHhYJCRr/7O/XtTfP9who3PbV7QfkxKkL8N+PHs2ErV5bMM4aa+1oKvx8uC+9rZjuU9x/mKQzTVaseKsXneoiPDeGgi/nfyrc/YLeT3GGk9TJP2Qc5y7WTO/rKs1wpYpYdULpknf178OYsV0rLwdlsNzUfbacoxyXTO85PnNgCEw7pOgwRHCZkIhbj2+WeYf13B+g1b8P31K9Y+8SQA96cmUX73LOp4BP6R51tgeBTfjkY82+wMhbfgCg9yMuk6RCEFQ2HQfsPHZX+2Q4n9dtzhTL04qChkumQcu1uT/WfOtj65gNVKkW8hrXzOj55zqLudBdiHWCZmi4UfWWw8nHnA3V+sZca8imtXLnPtymUemB+DBgd8n//tQJNyg76BMFbXVvbUOgn5snT5C8BmtZDoDsfH2a6KeW4vp/QmYqLqC1Q6k7bJNl5PX2+d+0BadYVztj1LLDHksVhSR4DxoVTG1+QqpJXP+clnmwWS4CglisJTTz/Nvb6vUcf/B4dfRvmgHuWDejj8Mur4d/BVlgFuFuMjfkIWZ+wW7OWl+RRpBaO0i4faMElx7eBgUuGoqK2Og9pj2tp4PylcqltTb6km9mOtZX+rO2U/r7nV7MfRClj16LuOsBhDN/0oigvPtlgIaBd2bUnHn6+QVlS18dr+pMfY8zg/eW2zQDJUKSH3pyYZ9V5HaX4ONjyRMqJQHl8Fa1dD83Oo57/Oe5+mYD9X/TU0MVqwD1H6xUOYOywxec/RwS46d85e50h+fsCENt5vpOPIDiD2TMN59qaMz03ec3QE61K2i+0HUJLX76XDM1ugqiAXM3Uwec9xwtLGgaTrOqMXPuZK7d7EbW89hbRmr4dkPz/5bLNQUpBpBVpvtfFq3dx5N/55bYBvzBGUP1bP+3r1z0MwFF6q5gkhPY6VaGZmhm+DqVftVDVK4Jv/wO6f5d7B6z+V4BBLSoJjBbo3eZcvPv8s4zrl2Sdzvl559kmkGymWkgRHiVHf7i92E4SQuypCCP0kOIQQuklwCCF0k+AQQugmwSGE0E2CQwihm9yO1WnDRgdr1panLHv44AGBO+NEvrtfpFYJsbwkOHTasHFTxmpqFdEoo94hxvyjRWiVEMvLsEMVm92GY9OmZTueYjJR8eJLPL+lctmOKUSxGLLHoSjw29d/g9lspvfiRcbGxpbt2C53NS73/F9C+zYYzPpIuRClwJA9DlWF3t6LRCIRGhsacDgcxW6SEIZiyOAAmJyapKvrjISHEEvAkEMVjRYera0tNDY0LPuwZSHmK8gzX+GcXEWJhCgkQwcHzIbH7t2tNDY0cKGnl9u3bxW7WRnlV5BnbuGcXEWJhCg0wwcHgHm9mbKyNUQiESbv3i12c7JLKcgTC4pAX39qr8ECvlOZixud7PImKnCZgv3LOjWeeLQY9hqHxuFw0NjQQCQSoavrDJNTk8VuUnbJBXmyVg5Ln5k7XpRoCWcoFyKdoYOjpEIDbXLZQUI4aT7azrH2trnVz9ML52SYAl+IpWbY4Ci10NDECvK8T8dHA4Sw4GnbNzc8MogVHRJieRgyOBQFXvn5KyUXGslyFuTR5CpKJMQSMGRwqCp0X+jmdFdXSYXGfAV5sslVlEiIpWDYuyrT09NMT08XfL8j179k9erVi9rHzMxMxuV6CvKkvC5HUSIhCk0KMgkhdDPkUEUIsbQkOIQQuklwCCF0k+AQQugmwSGE0E2CQwihmwSHEEI3CQ4hhG7/ByMn/fg9r756AAAAAElFTkSuQmCC" alt="make jar"></p> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAcAAAAA9CAYAAAA6XrkAAAATYElEQVR4nO2daWxb15WAvyuJEvlUkZRISdbqOI3GriV5SYsmtgczgzhtYgeDQZxp3MYB2iyIB838SdBO/tQtZlJg0DZN/3SKaZA2GSBJm6BJfhRxVk/RQRM7beJNkhuPPEmj1ZJImpQtkiJl3/nxuDxukihLlG2eD9APXt7lvPOe7nnnnnMvVXd3t0YQBEEQyoyK1RZAEARBEFYDMYCCIAhCWSIGUBAEQShLxAAKgiAIZYkYQEEQBKEsEQMoCIIglCViAAVBEISyRAygIAiCUJaIARQEQRDKEjGAgiAIQlkiBlAQBEEoS8QACoIgCGWJGEBBEAShLBEDKAiCIJQlYgAFQRCEskQMoCAIglCWiAEUBEEQyhIxgIIgCEJZUrXaAgjlyfou12qLIAjCFczpwdCKjyEeoCAIglCWiAEUBEEQyhIxgIIgCEJZsiIxQK07ufWx77C98QSvfuun9Cu1EsNccWOvJFp30tsG/WNDy9bHlaArrW9kx96v0VFvjn3p49f4c/1uNrr7OfzzZxmijd69j6Q+D5dARt3poWIb6F/70NRSf5OXmkgI38kgc1RTu6mFOkeY4PtTRLM+zypFzQ2duBvinD85Rjh6efJqfYm/u36W7bFq/n20csHy1PcNXta02ZiNhImMBJmdRw5tN6htN3A4DC6OfkowYF5DvWdxsmv/FBNnwlS2tdDYXp2/TjjGbCDE+ZEZLl4j/5OFmE8PAPHwDBcGp1L3RGtbzjN0raK1kfH/dFEpdE8zFR0RLh0MoUp87eIBXgXo1pvZ+9h3uPPLravax0rQeVva+AFMnwusojSgtYOKbQ4YmIYrYCJSqoI/n6+A6ks0ab1geUZboxq7x427y01lgToA9nYvTk8tNmPlrlcZ1djbG/F21a7YGFcLNqMW96ZWDHvhe1JW9AXQOKnoLfzSsFKsiAeo1BCHfvgQh8wPKzFEmdGKtxGYXN4+Vvs+ad2Kyw1a93HqN8/SH0jI8MEJ+pMylXiOUH/tgelpLvXFFvU2qlSccN8QYfPDisg0EarA77nE56phMr5weQ4OgxpHkHA09yutDRwNEA/HsBnpCWj2zBBnz2TWy35zL0R08C8EA5nfa7tB/SYvdk8j7kDu99ciefWgbdi7vNR7qqlrryV8JrxK0l05KBVHD0RQ2xpg+CyESvdsiAcorD7BSYb9qy0EaJcT1Q4MWJdi4sQiQCS+ekt3sUpOxy6x3qUXV24h7p9hDhsOT/6366p2FzWEiayw462iYc4lJvtKR+nf9K8UlIoTHfQxHdbQYFAzj2d+bVLg/+nTafS0DdVjlFSaksQA+1hr+fxbuO9B9vS0AODr/wU/e/aI2ea+B9lhKX/5mcNMJJTU842nuLM7T/vJ4/zPcz+lf2z+yUnrTnot7bQe5/TvDvL719JjZMq9NDmLHos3eOo5+Nt7b2dDk0rUfZqXDibidFsf5nv7tpgd9zzAd594gI+ef5CXjiX6ab2ZvffuZkNTS3r8yeO89/ZvOXRs/j5ePLo2bwwwKf/fdK/Bq0yZ/AMHM65zsfIXvB/Xf52vfqk38Wknt//TTvS5Q7zx6+N0fvVRSwyw0P1spfO2fWxf15z4PMHIsUMM/PFDQhn3wqzXfV0TrkR56JNDDHxwkOGst3PV4wQi6E+BxFdKxbkYgblIfhdr/vhNNTU3mG/7kBv7Sba3d3n5TIMNW6Jt3B/kgiVup1QFUzHYXneRpinFpJq/PINImEjEoK7BoHIk03PT2kZNgw0CIWZZvX2ZVq/I/BxjdjR/vFDbDeq7XNgt3qoOz3B+NEQ4EJ+3btwfJDiY671m3wOtY8wFQgQH0+On7jMhfINQ1+XCbqiErD6Co/O54JkknykchfWR75nKGz9bxPOzEJej00J1K9ta8LbFCb4fxrHJm9DVDOdPTuX9f1Iqjh6Oo7qd4AqXzAssuQe48b7vpAwDgLfnAe7eak6mO7LK77pj7cLtm7Zw5yOPs7O18JuU1jez94nMdkq1sOGWB3josbtozvMWtlQ5ix1LNe1i/6O72NCkLHUP8M3dnQWvJzXW1of53qMPZBg/s88t7Nh3gLu3Fv92qbUZK9zT04JXpWXy9jzAQ4/9Mz3LKP9S0fpGdux/JGX8zHGb6bjxHm7buxuXRcbO28x6Lsuk51q3k23/+A06LPW0dpje30g4Zylz9swQ/iImuCSOrpbUpA75Yz/2RB2bZUybx417U2OGdzAQqoRqc7nTSqHyNHFmA/HEMmi2gAYOB8wGZoq+tmLRdoP6NgOtY0T8sXS5Nqi/KVNPSiXihZsyY5e6wUvL5saMyRdAGbU4u1pxN1jq2l14N3kz6to87tw+tUH9psx7oFQ1Nk8j3qx7YI7lpnGzG7uRrmtvb8XTZlu8LrSNygLGr1gW+/wUlKUYnRZRN4mjy5vSFZE4s5F5/p+GI4AN1VG6FYKSngSj1BbWdx/nlSdNj61568Ps37eFDfsOoCdf55UnXzbLdz/M/lu24On5As2vfZryOsz243z0/NO8dGwo4amYk/X2L2/j0LNH8o7be9/9bFAqw1tLe2m7uOuOD/iZxWO5HDmLHQtAT77Oq8+9TN/oWnrveJA9t7Sk+zz2H/zrxB4efuR2PAO/5PFnjwBmn7d+aTNaj/PeC0+nvb2UThTrN2+DY0dQBfooqKsmlZKpf0yhW2/m1nvvZ0fTFu68bxv9WXqeV/4Cy4bq4//i1//ZamZ48t+8+eJBQkqh1cJJOp23fY0OpQh98gKH3zQ9vrRHuJNtXzzBG38aQ+sb6bgO9Lk+Dr/zLMOBZL1H2L6ul47PwvDHiU7XGiil0KG5BcdfDEpVU+WIMT3oIxyIJ97UWzJiP8n4mw7PEEx4hul6tTg8U8wmlybPV/K/xPDWANa5o1C5hTl/mLk2Fw5PNWHLxFPlMagizAU/0L4slw2Aves61uQp1zrG7JnMzFh7lxe7UsT9UymPK+0RunG3h/GPmvqrTRjQ82d8KW8jrS9FTUMtBMxlVnu7C5ul3zlHLbVdXpyGmzpPkGDAMr6h0GHTO5yNKjMrtsuL06jF3RVmIitOl6wbjVRjb/dS315NVR4POx/abqO2vQWnodD+sOndLXEVtKjnJ2/7xeu0WP0DKFVLTUOM6ROWez6ffoIR9LQT1eFA98UK11tGSu4Bnn4hvVx59uhveXdSm5N4YrIFOPvah3ykNTS20JjT/gAvJSZ7pYboe+b7vDupofvzOd4JmB7Nxm7QiSXMtDEdou+Zp3l3UpuTdVbbpci5lLGsfSo1RN9rB80+FyCZwPL4t7+bMn6psU6cWLB9PlLy6+O8+oP0daqxI7zzg1+acmXpeanyL5WUUfvkBd5462hquVOpMYbefJ6Bcxrnus2mF+hpxgngTrdXaozht77Niz//Fu99bPlndCbeBaeX7x9v9sxYaqIwYz/jmbEfh41KyFgKUypuJqC8/2lGAoVSlfz5AvyV61LGGIXKM4iEiUQwJ+nEvUkvf4ZLlnavVDWVDeks0NQE7p/CfyacMh7WOFlS5mSy0cQfxzOW2pSKEw1kGaiUYQimjKqKhpkZzYxBpurpGYInLUvO0TAzJ31EdW6cTusY5xOGUqk40ZGQWS8P9q7rWHPT2oy/ls2tOD3m0un5kcv0vIt4fvJRjE6LqWtlbtS36K1ASsVhGnDaCryeLz8l9QC1Hsc/ke+bCSZGsTglY/inINv6aX2cU0fJcF6UGmJiEmhsprkN+kazum5rxQuoROwrv1ymATt7uXIuYazcPotHt3ayprmVxpZWNjZtwdud7/17ESTkZ+DDnD2BSh3h1MD9rO/O1vPly18UCaOm1t3D3v335K2idRNOIOg/wUjwFrrre9n+lR8DyfjfCYYDYxltlMuG1jH0Mh0/qPUMET9Zz2oy9pNYAouEiURcOI1a6jebhsGM34SZjea6cwOhSv6h7SIbdQWnLPenULl13NlAnLo2Szaox4XTUERHZ1jum5c/C9RmekueRjyRMXMJLDGBK08jazz5+9LaRhVwMauvKsNGlcOGw2FQ2ZC1/Jg0DFmJFirg4+z7vtx6eV4ClDITg2oakvcq+U3iHi5RZWZ8MVxUjK4gRT4/88q1kE6XWPdiJEbxyqrKeGldSUp8GPbKTJZTk2dRPS14moFsA9icjmUtniXKuaSxlo6ZAHN/Kv5WFribMuJ586HUGH0v/gRu20d3Il7oWreT7et2os/1ceody9aLEjEXiaNUNdUGhKNxZk6OQ5cXZyIGZvO4qfe4zcSCwanMt+dZhZ85Pldn49QFFi7PGbc2tQxqbzDyGumVQkUTXp2jhbo2FzUjU0QNW0bsaiHMBAxLTOkKJ9+LQJrLvwalinx+8lCMTq82/S+Ga+LXIBqb1hT22ibG8enNlthXAZZjz1kJx9K6k1vvTcbrjnN6cpxTJ8ZgYoy+5r9PZ31eawQnCWmN8y+/4qW3jhauZ1ka7X/rR/TpVjq/uJmOdT101Dej6nvZeOtuhhOxx1JR5TA9zVg4KWac8JlxZgZt2NsNHA0GdqMaZdRS1xVn1rrnLlbJ6dgc212X4ILl9JdC5Vb8YaI3GNQ0GFSOxHE0UNLlT8iT/RiOE9eaqoAvJ86W1dCMQaXidTPMRuJEAnEIx4kaLlrKdIN9Uc9PFsXo9FrV/1VlAJXawsYbof9YuiwZt0p5bdmMjuEDPN2fp0cfXtnjvko5VtsXWN9oxhuzje2aLc0FGi3APPIvqOdS4Z8wwwTX9dKhP1z00WhKjTH8pzGG//R66vi1dre5VBoCdChORUc1uFiWZVDT28pMQkjGnPItoykVZ3Y0xOxoKJGZ6KXGkbn8lzz9ZXvdJZp0RcZ2iHzlmfIkl/QMatrj2JUiGlj+5c/5yMl+jMS5iBmbrNEz8xvjRMZq8tg1K1WerCW4ZL8OG5VaW7YyZG4jmJtn/Jx7dSWQXLLNw2Ken9z+itBpMXUvmzkILnOXBbjqNsKvv+dxdm41U+x1683c+piZdZkvbgXJ2JVpPO987C56LNslmrc+zDd/9BQH/mVP3q0QxbLiYzW15rbt/nxqHK076fnGv7H/lpY8jefpYwH5F6PnUqHUUYb/Akr1sm3vbjosqdeu67/O7Q/9iLvv3oVLa/T1X2fv/ie4++5dGfXcn23G6QaCk0wnC6cT2Z/O5UvBrrmhFSMRH9F2g9pNZsZj0vPSDV7W3LSW5l4XNZatEVWeZNwpTnZO6kSoAn+ebQ+Fyq1EA2GUqsbZXpte/iwRyWxBp5G+/qRRVqoW9yZ3hg4qG7x4vthJc68r8xi3BiNVT2sbNTfknruZ6tdw4+6qpVLrVGapXSnmAmbCTaHx892rUpL0lJWq5TOJazMzU10ZS8ZLeX7ysgidLqlukaS2Ik3HS3YA1FXlAWo9jn9qDTv2HWDHPmv5cV595nDBFNu+Z37JxifuZ0PTLvY8uos9WX2+99zLZsbmMmh9RcZKeGbepl3s//EuPnr+cV48+gGnp25nR9MW9jz6dMY4KRLGbkKpAn0UK//8ei4VQ2/+io79X6Ojfifbv7Iz4zutJzj1TmJZ8//eZuALPXTnqQcw/IFl+fPTMHqbA1xVFNxPUARazzAbMHB2tZqZqJby4OCMqUN/iOk2A6fhpn5zbtQ/Oppn+Sqx3Lnepfm9Ty1cbiWxDLrSE3uhbRCAJfvRHDs66CPa4MWeRwfJjMuLSuVN+MjB4vFFR0LEG1zYPI00ehotfc5wYSSWeobnH99yr0pMNBAGTy229lbWJLaoaH+QaVzUJSsV8fzkPcquCJ3OFan/JeFOeJLDkZIdin3VeYCnn/s+7/aPpz77+n/BUwv8koFSR3jxW2Y7n+Vt0tf/Oq/+5ACHFjhFphhWYiyljvD7351I9edtMbNf3/lBpi60HsfX/zqvPPmLnG0k+fqYT/5XLPKb/S6s51Kh1FHe/flPGPhkgpBFx6FPDnH4Nz9MJbYkk2Dey6qnz/Ux8PaTGdsglIqgR4B2A5ZpG0dkcJxzlk3fcX8Qn+Vkj2QSwzl/jLhVvvAM04NjeRMokqe/eOou5hyOna88s236yLNSbH63onXMPIkl6xcylApz7v1xprN0kF03qavpjE30Zp/nTkyZWxESS34AKhrCd9JHNFxY/9bxrffA7Hcqp24pUQEfUyMzKZni/iC+wdytCcU+P/naL0anxep/SXQ4gDh6uDR7AAFUd3f3VXEYnXkU2lneW2aDJawO67tW7+itQmiXk4rbnTAwge6/fC9QEITFobUNtbsZNe1Hv2sGXU8PLtOepHm46jxAQVgpVGja9AI7HOiyO6RYEFaRtU6UM47uL+2vY4gBFAQL+g9+cK7Ob5MJQjmitQ3V7YCR6ZL+FBKIARSEDJSKcOlwBLqdyxYLFARhHnobUExz6Q+l/23EqyYGKFxbXIkxQEEQrhxKEQO8qrZBCNcOpXi4BUEQ5kOWQAVBEISyRAygIAiCUJaIARQEQRDKEjGAgiAIQlkiBlAQBEEoS8QACoIgCGWJGEBBEAShLBEDKAiCIJQlYgAFQRCEskQMoCAIglCWiAEUBEEQyhIxgIIgCEJZIgZQEARBKEvEAAqCIAhliRhAQRAEoSwRAygIgiCUJWIABUEQhLLk/wEt0yuhlUHZTwAAAABJRU5ErkJggg==" alt="add jar"></p> <p>请在build.gradle下添加</p></li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//添加依赖库</span>
dependencies <span class="token punctuation">{</span>
    implementation <span class="token function">files</span><span class="token punctuation">(</span>'libs\\<span class="token class-name">MTBeaconPlus</span><span class="token punctuation">.</span>aar'<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ol start="2"><li>AndroidManifest.xml 文件下添加蓝牙权限和相应的组件注册。如下所示：</li></ol> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uses-permission</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>android.permission.ACCESS_COARSE_LOCATION<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uses-permission</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>android.permission.ACCESS_FINE_LOCATION<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uses-permission</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>android.permission.BLUETOOTH<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>maxSdkVersion</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>30<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uses-permission</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>android.permission.BLUETOOTH_ADMIN<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>maxSdkVersion</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>30<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uses-permission</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>android.permission.BLUETOOTH_SCAN<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name"><span class="token namespace">tools:</span>targetApi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>s<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uses-permission</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>android.permission.BLUETOOTH_CONNECT<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>service</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.minew.beaconplus.sdk.ConnectService<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>receiver</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.minew.beaconplus.sdk.receivers.BluetoothChangedReceiver<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>intent-filter</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>action</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>android.bluetooth.adapter.action.STATE_CHANGED<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>intent-filter</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>receiver</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ol start="3"><li>混淆文件 proguard-rules.pro 如下所示 ：</li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code>   
<span class="token operator">-</span>keep <span class="token keyword">public</span> <span class="token keyword">class</span> com<span class="token punctuation">.</span>minew<span class="token punctuation">.</span>beaconplus<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>*<span class="token operator">*</span><span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token operator">-</span>keep <span class="token keyword">public</span> <span class="token keyword">class</span> no<span class="token punctuation">.</span>nordicsemi<span class="token punctuation">.</span>android<span class="token punctuation">.</span>*<span class="token operator">*</span><span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">;</span><span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="开始开发"><a href="#开始开发" class="header-anchor">#</a> 开始开发</h3> <h4 id="获取管理类单例"><a href="#获取管理类单例" class="header-anchor">#</a> 获取管理类单例</h4> <p>首先开发者需要获取一个管理类单例，并且做好开发者需要的监听：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 获取管理类单例</span>
<span class="token class-name">MTCentralManager</span> mtCentralManager <span class="token operator">=</span> <span class="token class-name">MTCentralManager</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 如果需要监听系统蓝牙状态变化请这样做</span>
<span class="token comment">// *** 还可以通过bluetoothstate属性主动获取</span>
<span class="token comment">// *** 仅当state == PowerStatePoweredOn时开发套件才可正常工作</span>
mtCentralManager<span class="token punctuation">.</span><span class="token function">setBluetoothChangedListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OnBluetoothStateChangedListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onStateChanged</span><span class="token punctuation">(</span><span class="token class-name">BluetoothState</span> state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="扫描设备"><a href="#扫描设备" class="header-anchor">#</a> 扫描设备</h4> <p>需要通过扫描来发现附近的设备，这样才能获取它们的广播内容，连接并修改设备参数等。</p> <p>当前已在扫描状态尝试启动扫描，返回“操作失败：当前处于扫描状态，无需重复启动扫描。”</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//开始扫描</span>
mtCentralManager<span class="token punctuation">.</span><span class="token function">startScan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 遍历数组，获取每个设备实例</span>
<span class="token comment">// 也可以把它们绑定到UI上，将所有数据显示出来。</span>
mtCentralManager<span class="token punctuation">.</span><span class="token function">setMTCentralManagerListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MTCentralManagerListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onScanedPeripheral</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MTPeripheral</span><span class="token punctuation">&gt;</span></span> peripherals<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">MTPeripheral</span> mtPeripheral <span class="token operator">:</span> peripherals<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 获取设备广播实例</span>
            <span class="token class-name">MTFrameHandler</span> mtFrameHandler <span class="token operator">=</span> mtPeripheral<span class="token punctuation">.</span>mMTFrameHandler<span class="token punctuation">;</span>
            <span class="token class-name">String</span> mac <span class="token operator">=</span> mtFrameHandler<span class="token punctuation">.</span><span class="token function">getMac</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 		<span class="token comment">//设备Mac地址</span>
            <span class="token class-name">String</span> name <span class="token operator">=</span> mtFrameHandler<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">//设备名称</span>
            <span class="token keyword">int</span> battery <span class="token operator">=</span> mtFrameHandler<span class="token punctuation">.</span><span class="token function">getBattery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//设备电池电量</span>
            <span class="token keyword">int</span> rssi <span class="token operator">=</span> mtFrameHandler<span class="token punctuation">.</span><span class="token function">getRssi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">//rssi</span>
            <span class="token keyword">long</span> lastUpdate <span class="token operator">=</span> mtFrameHandler<span class="token punctuation">.</span><span class="token function">getLastUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//最近更新时间</span>
            <span class="token comment">// 设备广播的所有数据帧（iBeacon，UID，URL...）</span>
            <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MinewFrame</span><span class="token punctuation">&gt;</span></span> advFrames <span class="token operator">=</span> mtFrameHandler<span class="token punctuation">.</span><span class="token function">getAdvFrames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">MinewFrame</span> minewFrame <span class="token operator">:</span> advFrames<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            	<span class="token comment">//每个帧的最近更新时间</span>
                <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;lastUpdate:&quot;</span> <span class="token operator">+</span> minewFrame<span class="token punctuation">.</span><span class="token function">getLastUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>另外，你可以在任何时候停止扫描任务。</p> <p>当前未处于扫描状态尝试停止扫描，返回“操作失败：当前非扫描状态，无需执行停止扫描操作。”</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 通过这种方式停止扫描</span>
mtCentralManager<span class="token punctuation">.</span><span class="token function">stopScan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>获取扫描状态</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// true：扫描中，false：未扫描</span>
mtCentralManager<span class="token punctuation">.</span><span class="token function">isScanning</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>SDK会缓存所有扫描到的设备并返回，如果需要清理缓存，需要先停止扫描再清理缓存。</p> <p>当前正在扫描时尝试清除缓存，返回”操作失败：当前处于扫描状态，无法清除缓存，请先停止扫描。”</p> <p>下拉刷新的代码示例：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 停止扫描</span>
mtCentralManager<span class="token punctuation">.</span><span class="token function">stopScan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 清理缓存</span>
mtCentralManager<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 开启扫描</span>
mtCentralManager<span class="token punctuation">.</span><span class="token function">startScan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>通过以上方式我们就可以获取到设备在广播阶段的所有相关数据，进一步的，想要从frameHandler里获取到所有的数据帧，可以参考以下代码示例：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>
<span class="token comment">/*
 * mtFrameHandler: MTFrameHandler实例，
 */</span>
<span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MinewFrame</span><span class="token punctuation">&gt;</span></span> advFrames <span class="token operator">=</span> mtFrameHandler<span class="token punctuation">.</span><span class="token function">getAdvFrames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">MinewFrame</span> minewFrame <span class="token operator">:</span> advFrames<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">FrameType</span> frameType <span class="token operator">=</span> minewFrame<span class="token punctuation">.</span><span class="token function">getFrameType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>frameType<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token class-name">FrameiBeacon</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>iBeacon
            <span class="token class-name">IBeaconFrame</span> iBeaconFrame <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">IBeaconFrame</span><span class="token punctuation">)</span> minewFrame<span class="token punctuation">;</span>
            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span> iBeaconFrame<span class="token punctuation">.</span><span class="token function">getUuid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> iBeaconFrame<span class="token punctuation">.</span><span class="token function">getMajor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> 	iBeaconFrame<span class="token punctuation">.</span><span class="token function">getMinor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token class-name">FrameUID</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>uid
            <span class="token class-name">UidFrame</span> uidFrame <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">UidFrame</span><span class="token punctuation">)</span> minewFrame<span class="token punctuation">;</span>
            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span> uidFrame<span class="token punctuation">.</span><span class="token function">getNamespaceId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> uidFrame<span class="token punctuation">.</span><span class="token function">getInstanceId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> 
                uidFrame<span class="token punctuation">.</span><span class="token function">getTxPower</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token class-name">FrameAccSensor</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>acc
            <span class="token class-name">AccFrame</span> accFrame <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">AccFrame</span><span class="token punctuation">)</span> minewFrame<span class="token punctuation">;</span>
            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span> accFrame<span class="token punctuation">.</span><span class="token function">getXAxis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> accFrame<span class="token punctuation">.</span><span class="token function">getYAxis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> accFrame<span class="token punctuation">.</span><span class="token function">getZAxis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token class-name">FrameHTSensor</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>ht
            <span class="token class-name">HTFrame</span> htFrame <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">HTFrame</span><span class="token punctuation">)</span> minewFrame<span class="token punctuation">;</span>
            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span> htFrame<span class="token punctuation">.</span><span class="token function">getTemperature</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> htFrame<span class="token punctuation">.</span><span class="token function">getHumidity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token class-name">FrameTLM</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>tlm
            <span class="token class-name">TlmFrame</span> tlmFrame <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">TlmFrame</span><span class="token punctuation">)</span> minewFrame<span class="token punctuation">;</span>
            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span> tlmFrame<span class="token punctuation">.</span><span class="token function">getTemperature</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> tlmFrame<span class="token punctuation">.</span><span class="token function">getBatteryVol</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> tlmFrame<span class="token punctuation">.</span><span class="token function">getSecCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> tlmFrame<span class="token punctuation">.</span><span class="token function">getAdvCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token class-name">FrameURL</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>url
            <span class="token class-name">UrlFrame</span> urlFrame <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">UrlFrame</span><span class="token punctuation">)</span> minewFrame<span class="token punctuation">;</span>
            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Link:&quot;</span> <span class="token operator">+</span> urlFrame<span class="token punctuation">.</span><span class="token function">getUrlString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;Rssi @ 0m:&quot;</span> <span class="token operator">+</span> urlFrame<span class="token punctuation">.</span><span class="token function">getTxPower</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>  
        <span class="token keyword">case</span> <span class="token class-name">FrameLightSensor</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>light
            <span class="token class-name">LightFrame</span> lightFrame <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">LightFrame</span><span class="token punctuation">)</span> minewFrame<span class="token punctuation">;</span>
            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;battery:&quot;</span> <span class="token operator">+</span> lightFrame<span class="token punctuation">.</span><span class="token function">getBattery</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;%&quot;</span> <span class="token operator">+</span> lightFrame<span class="token punctuation">.</span><span class="token function">getLuxValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span> 
        <span class="token keyword">case</span> <span class="token class-name">FrameForceSensor</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>force
            <span class="token class-name">ForceFrame</span> forceFrame <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">ForceFrame</span><span class="token punctuation">)</span> minewFrame<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;battery:&quot;</span> <span class="token operator">+</span> forceFrame<span class="token punctuation">.</span><span class="token function">getBattery</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;%&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;force:&quot;</span> <span class="token operator">+</span>  forceFrame<span class="token punctuation">.</span><span class="token function">getForce</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;gram&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token class-name">FramePIRSensor</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>pir
            <span class="token class-name">PIRFrame</span> pirFrame <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">PIRFrame</span><span class="token punctuation">)</span> minewFrame<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;battery:&quot;</span> <span class="token operator">+</span> pirFrame<span class="token punctuation">.</span><span class="token function">getBattery</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;%&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;PIR:&quot;</span><span class="token punctuation">,</span> pirFrame<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
       <span class="token keyword">case</span> <span class="token class-name">FrameTempSensor</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>temp
            <span class="token class-name">TemperatureFrame</span> temperatureFrame <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">TemperatureFrame</span><span class="token punctuation">)</span> minewFrame<span class="token punctuation">;</span>
            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;battery:&quot;</span> <span class="token operator">+</span> temperatureFrame<span class="token punctuation">.</span><span class="token function">getBattery</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;%,temperature:&quot;</span> <span class="token operator">+</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%.2f&quot;</span><span class="token punctuation">,</span> temperatureFrame<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;°C&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
       <span class="token keyword">case</span> <span class="token class-name">FrameTVOCSensor</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>tvoc                  
            <span class="token class-name">TvocFrame</span> tvocFrame <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">TvocFrame</span><span class="token punctuation">)</span> minewFrame<span class="token punctuation">;</span>
            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;battery:&quot;</span> <span class="token operator">+</span> tvocFrame<span class="token punctuation">.</span><span class="token function">getBattery</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;,TVOC:&quot;</span> tvocFrame<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;ppb,&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;battery:&quot;</span> <span class="token operator">+</span>tvocFrame<span class="token punctuation">.</span><span class="token function">getBattery</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;mV&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
       <span class="token keyword">case</span> <span class="token class-name">FrameLineBeacon</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token class-name">FrameLineBeacon</span>
            <span class="token class-name">FrameLineBeacon</span> lineBeacon <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">FrameLineBeacon</span><span class="token punctuation">)</span> minewFrame<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Hwid:&quot;</span> <span class="token operator">+</span> lineBeacon<span class="token punctuation">.</span><span class="token function">getHwid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
                  <span class="token operator">+</span> <span class="token string">&quot;,Rssi@1m:&quot;</span><span class="token punctuation">,</span> lineBeacon<span class="token punctuation">.</span><span class="token function">getTxPower</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
                  <span class="token operator">+</span> <span class="token string">&quot;,authentication:&quot;</span>lineBeacon<span class="token punctuation">.</span><span class="token function">getAuthentication</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
                  <span class="token operator">+</span> <span class="token string">&quot;,timesTamp:&quot;</span> <span class="token operator">+</span> lineBeacon<span class="token punctuation">.</span><span class="token function">getTimesTamp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
       <span class="token keyword">case</span> <span class="token class-name">FrameTamperProof</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token class-name">TamperProofFrame</span>
            <span class="token class-name">TamperProofFrame</span> tamperProofFrame <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">TamperProofFrame</span><span class="token punctuation">)</span> minewFrame<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//</span>
            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;battery:&quot;</span> <span class="token operator">+</span> tamperProofFrame<span class="token punctuation">.</span><span class="token function">getBattery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
       <span class="token keyword">case</span> <span class="token class-name">FrameInfo</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token class-name">InfoFrame</span>
            <span class="token class-name">InfoFrame</span> infoFrame <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">InfoFrame</span><span class="token punctuation">)</span> minewFrame<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//</span>
            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span> infoFrame<span class="token punctuation">.</span><span class="token function">getMajor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> infoFrame<span class="token punctuation">.</span><span class="token function">getMinor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> 	infoFrame<span class="token punctuation">.</span><span class="token function">getBatteryVoltage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>     
       <span class="token keyword">case</span> <span class="token class-name">FrameGInfo</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token class-name">GInfoFrame</span>
            <span class="token class-name">GInfoFrame</span> <span class="token class-name">GinfoFrame</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">GInfoFrame</span><span class="token punctuation">)</span> minewFrame<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//</span>
            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span> <span class="token class-name">GinfoFrame</span><span class="token punctuation">.</span><span class="token function">getMac</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token class-name">GinfoFrame</span><span class="token punctuation">.</span><span class="token function">getBattery</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> 	<span class="token class-name">GinfoFrame</span><span class="token punctuation">.</span><span class="token function">getUuid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span> 
       <span class="token keyword">case</span> <span class="token class-name">FrameAutoclaveCycles</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token class-name">FrameAutoclaveCycles</span>
            <span class="token class-name">AutoclaveCyclesFrame</span> autoclaveCyclesFrame <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">AutoclaveCyclesFrame</span><span class="token punctuation">)</span> minewFrame<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//</span>
            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;AutoclaveCyclesFrame{&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot;timeStamp=&quot;</span> <span class="token operator">+</span> autoclaveCyclesFrame<span class="token punctuation">.</span><span class="token function">getShowTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span>
                <span class="token string">&quot;, highTemperatureThreshold=&quot;</span> <span class="token operator">+</span>  autoclaveCyclesFrame<span class="token punctuation">.</span><span class="token function">getHighTemperatureThreshold</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span>
                <span class="token string">&quot;, sterilizationCount=&quot;</span> <span class="token operator">+</span> autoclaveCyclesFrame<span class="token punctuation">.</span><span class="token function">getSterilizationCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token operator">+</span>
                <span class="token string">&quot;, storageFull=&quot;</span> <span class="token operator">+</span> autoclaveCyclesFrame<span class="token punctuation">.</span><span class="token function">getStorageFull</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span>
                <span class="token string">&quot;, battery=&quot;</span> <span class="token operator">+</span>  autoclaveCyclesFrame<span class="token punctuation">.</span><span class="token function">getBattery</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span>
                <span class="token string">&quot;, deviceModel=&quot;</span> <span class="token operator">+</span> autoclaveCyclesFrame<span class="token punctuation">.</span><span class="token function">getDeviceModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span>
                <span class="token string">&quot;}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>  
       <span class="token keyword">default</span><span class="token operator">:</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>                  
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br></div></div><p>**重要提示：**在获取所有的传感器数据时，如果值等于<em>MIN_VALUE</em>（各基本类型封装类的最小值），表示这个数据是无效的。所有的传感器实例（HTFrame、LightFrame、AccFrame、ForceFrame、PIRFrame）都有这种情况。请参考以下代码：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/*
 * htFrame: HTFrame实例
 * lightFrame:LightFrame实例
 * accFrame：AccFrame实例
 * forceFrame:ForceFrame实例
 * pirFrame:PIRFrame实例
 */</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>htFrame<span class="token punctuation">.</span>getTemperature <span class="token operator">==</span> <span class="token class-name">Double</span><span class="token punctuation">.</span><span class="token constant">MIN_VALUE</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;tag&quot;</span><span class="token punctuation">,</span><span class="token keyword">this</span> value is not available<span class="token punctuation">.</span>&quot;<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>lightFrame<span class="token punctuation">.</span>getLuxValue <span class="token operator">==</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token constant">MIN_VALUE</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;tag&quot;</span><span class="token punctuation">,</span><span class="token keyword">this</span> value is not available<span class="token punctuation">.</span>&quot;<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>accFrame<span class="token punctuation">.</span><span class="token function">getXAxis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">Double</span><span class="token punctuation">.</span><span class="token constant">MIN_VALUE</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;tag&quot;</span><span class="token punctuation">,</span><span class="token keyword">this</span> value is not available<span class="token punctuation">.</span>&quot;<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>forceFrame<span class="token punctuation">.</span><span class="token function">getXAxis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">Double</span><span class="token punctuation">.</span><span class="token constant">MIN_VALUE</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;tag&quot;</span><span class="token punctuation">,</span><span class="token keyword">this</span> value is not available<span class="token punctuation">.</span>&quot;<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>pirFrame<span class="token punctuation">.</span><span class="token function">getXAxis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">Double</span><span class="token punctuation">.</span><span class="token constant">MIN_VALUE</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;tag&quot;</span><span class="token punctuation">,</span><span class="token keyword">this</span> value is not available<span class="token punctuation">.</span>&quot;<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h4 id="连接设备"><a href="#连接设备" class="header-anchor">#</a> 连接设备</h4> <p>要对设备进一步操作（修改参数，OTA），需要先连接到设备。由于有些设备在连接时可能需要密码验证，所以请注意回调状态PASSWORDVALIDATING：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/*
  mtCentralManager： MTCentralManager的单例
  mtPeripheral： MTPeripheral实例
*/</span>
mtCentralManager<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>mtPeripheral<span class="token punctuation">,</span> connectionStatueListener<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 整个连接过程需要经过多个中间状态，如果遇到错误，会通过error抛出</span>
<span class="token comment">// 只有当status == COMPLETED时，才算是连接成功</span>
<span class="token keyword">private</span> <span class="token class-name">ConnectionStatueListener</span> connectionStatueListener <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConnectionStatueListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onUpdateConnectionStatus</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">ConnectionStatus</span> connectionStatus<span class="token punctuation">,</span> <span class="token keyword">final</span> <span class="token class-name">GetPasswordListener</span> getPasswordListener<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">runOnUiThread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">switch</span> <span class="token punctuation">(</span>connectionStatus<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                       	<span class="token keyword">case</span> <span class="token constant">CONNECTING</span><span class="token operator">:</span>
                            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span><span class="token string">&quot;minew_tag&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;: CONNECTING&quot;</span><span class="token punctuation">)</span>
                            <span class="token keyword">break</span><span class="token punctuation">;</span>
                        <span class="token keyword">case</span> <span class="token constant">CONNECTED</span><span class="token operator">:</span>
                           	<span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span><span class="token string">&quot;minew_tag&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;: CONNECTED&quot;</span><span class="token punctuation">)</span>
                            <span class="token keyword">break</span><span class="token punctuation">;</span>
                        <span class="token keyword">case</span> <span class="token constant">CONNECTED</span><span class="token operator">:</span>
                           	<span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span><span class="token string">&quot;minew_tag&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;: CONNECTED&quot;</span><span class="token punctuation">)</span>
                            <span class="token keyword">break</span><span class="token punctuation">;</span>
                        <span class="token keyword">case</span> <span class="token constant">READINGINFO</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>先进行使能通知，在读取固件信息
                            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span><span class="token string">&quot;minew_tag&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;: 读取设备固件信息&quot;</span><span class="token punctuation">)</span>
                            <span class="token keyword">break</span><span class="token punctuation">;</span>
                       <span class="token keyword">case</span> <span class="token constant">DEVICEVALIDATING</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>校验设备成功后，向设备写入校验key
                            <span class="token class-name">LogUtils</span><span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span><span class="token string">&quot;DEVICEVALIDATING&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                            <span class="token keyword">break</span><span class="token punctuation">;</span>   
                        <span class="token comment">//写入校验key后，如果需要连接密码，会回调这个状态</span>
                        <span class="token comment">//密码长度必须为8个长度</span>
                       <span class="token keyword">case</span> <span class="token constant">PASSWORDVALIDATING</span><span class="token operator">:</span>
                        	<span class="token class-name">String</span> password <span class="token operator">=</span> <span class="token string">&quot;minew123&quot;</span><span class="token punctuation">;</span>
                        	getPasswordListener<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        	<span class="token keyword">break</span><span class="token punctuation">;</span>
                       <span class="token keyword">case</span> <span class="token constant">SYNCHRONIZINGTIME</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>密码校验完成
                         	<span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span><span class="token string">&quot;minew_tag&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;: SYNCHRONIZINGTIME&quot;</span><span class="token punctuation">)</span>
                            <span class="token keyword">break</span><span class="token punctuation">;</span>
                       <span class="token keyword">case</span> <span class="token constant">READINGCONNECTABLE</span><span class="token operator">:</span>
                            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span><span class="token string">&quot;minew_tag&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;: 读取设备固件信息&quot;</span><span class="token punctuation">)</span>
                            <span class="token class-name">LogUtils</span><span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span><span class="token string">&quot;READINGCONNECTABLE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                            <span class="token keyword">break</span><span class="token punctuation">;</span>
                       <span class="token keyword">case</span> <span class="token constant">READINGFEATURE</span><span class="token operator">:</span>
                            <span class="token class-name">LogUtils</span><span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span><span class="token string">&quot;READINGFEATURE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                            <span class="token keyword">break</span><span class="token punctuation">;</span>
                        <span class="token keyword">case</span> <span class="token constant">READINGFRAMES</span><span class="token operator">:</span>
                            <span class="token class-name">LogUtils</span><span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span><span class="token string">&quot;READINGFRAMES&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                            <span class="token keyword">break</span><span class="token punctuation">;</span>
                        <span class="token keyword">case</span> <span class="token constant">READINGTRIGGERS</span><span class="token operator">:</span>
                            <span class="token class-name">LogUtils</span><span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span><span class="token string">&quot;READINGTRIGGERS&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                            <span class="token keyword">break</span><span class="token punctuation">;</span>
                        <span class="token keyword">case</span> <span class="token constant">READINGSENSORS</span><span class="token operator">:</span>
                            <span class="token class-name">LogUtils</span><span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span><span class="token string">&quot;READINGSENSORS&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                            <span class="token keyword">break</span><span class="token punctuation">;</span>
                        <span class="token keyword">case</span> <span class="token constant">COMPLETED</span><span class="token operator">:</span>
                        	<span class="token comment">//至此连接成功，并将参数写入了设备</span>
                        	<span class="token keyword">break</span><span class="token punctuation">;</span>
                        
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onError</span><span class="token punctuation">(</span><span class="token class-name">MTException</span> mtException<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 断开某个设备的连接状态</span>
mtCentralManager<span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span>mtPeripheral<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br></div></div><h4 id="获取基本信息"><a href="#获取基本信息" class="header-anchor">#</a> 获取基本信息</h4> <p>成功连接到设备后，就可以获取设备信息以及修改设备参数了。我们先来看看怎么获取各种基础数据。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/*
 * mtPeripheral： MTPeripheral实例
 */</span>
<span class="token class-name">MTConnectionHandler</span> mtConnectionHandler <span class="token operator">=</span> mtPeripheral<span class="token punctuation">.</span>mMTConnectionHandler<span class="token punctuation">;</span>
<span class="token comment">//当前的设备连接状态</span>
<span class="token class-name">ConnectState</span> connectState <span class="token operator">=</span> mtConnectionHandler<span class="token punctuation">.</span><span class="token function">getConnectState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 连接时是否需要密码，None不需要，Require需要</span>
<span class="token class-name">PasswordState</span> passwordState <span class="token operator">=</span> mtConnectionHandler<span class="token punctuation">.</span><span class="token function">getPasswordState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 设备信息，例如：（Firmware Version： 0.9.1）；</span>
<span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> systeminfos <span class="token operator">=</span> mtConnectionHandler<span class="token punctuation">.</span>systeminfos<span class="token punctuation">;</span>
<span class="token class-name">String</span> manufacturer <span class="token operator">=</span> systeminfos<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Constants</span><span class="token punctuation">.</span>manufacturer<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> modlenumber <span class="token operator">=</span> systeminfos<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Constants</span><span class="token punctuation">.</span>modlenumber<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> macAddress <span class="token operator">=</span> systeminfos<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Constants</span><span class="token punctuation">.</span>serialnumber<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> hardware <span class="token operator">=</span> systeminfos<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Constants</span><span class="token punctuation">.</span>hardware<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> firmware <span class="token operator">=</span> systeminfos<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Constants</span><span class="token punctuation">.</span>firmware<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> software <span class="token operator">=</span> systeminfos<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Constants</span><span class="token punctuation">.</span>software<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> deviceName <span class="token operator">=</span> systeminfos<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Constants</span><span class="token punctuation">.</span>deviceName<span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">// 设备特性；</span>
<span class="token class-name">MTConnectionFeature</span> mtConnectionFeature <span class="token operator">=</span> mtConnectionHandler<span class="token punctuation">.</span>mTConnectionFeature<span class="token punctuation">;</span>
<span class="token comment">// 设备的广播通道数量，可以根据此动态生成UI；</span>
<span class="token keyword">int</span> slotAtitude <span class="token operator">=</span> mtConnectionFeature<span class="token punctuation">.</span><span class="token function">getSlotAtitude</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 可以调节参数类型：none不可调，adv可调，txpower可调，adv/txpower均可调</span>
<span class="token class-name">FeatureSupported</span> featureSupported <span class="token operator">=</span> mtConnectionFeature<span class="token punctuation">.</span><span class="token function">getFeatureSupported</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 支持的广播帧类型（多种）</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">FrameType</span><span class="token punctuation">&gt;</span></span> supportedSlots <span class="token operator">=</span> mtConnectionFeature<span class="token punctuation">.</span><span class="token function">getSupportedSlots</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 支持的Txpower（多档位）</span>
<span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> supportedTxpowers <span class="token operator">=</span> mtConnectionFeature<span class="token punctuation">.</span><span class="token function">getSupportedTxpowers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//支持的Trigger（多种）</span>
<span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TriggerType</span><span class="token punctuation">&gt;</span></span> supportTriggers <span class="token operator">=</span> mtConnectionFeature<span class="token punctuation">.</span>supportTriggers<span class="token punctuation">;</span>
<span class="token comment">// 固件版本枚举，方便处理版本号区分；</span>
<span class="token class-name">Version</span> version <span class="token operator">=</span> mtConnectionFeature<span class="token punctuation">.</span><span class="token function">getVersion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><p><strong>PS:</strong> <strong>MTConnectionHandler</strong>的<em>Version</em>属性说明：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Versoin</span>值来自设备的固件版本号，可以通过检查<span class="token class-name">Version</span>的值来判断当前设备支持的功能：
 
<span class="token comment">// 初始化值 </span>
<span class="token constant">UNDEFIND</span>

<span class="token comment">// 基础版本，仅支持基础功能</span>
<span class="token class-name">VersionBase</span>

<span class="token comment">// 此版本及以上支持自定义连接密码 / 设备信息广播帧</span>
<span class="token class-name">Version0_9_8</span>

<span class="token comment">// 此版本及以上支持远程关机命令</span>
<span class="token class-name">Version0_9_9</span>

<span class="token comment">// 此版本及以上开始支持触发器</span>
<span class="token class-name">Version2_0_0</span>

<span class="token comment">// 此版本及以上开始支持带广播设置的触发器配置</span>
<span class="token class-name">Version2_2_60</span>

<span class="token comment">//区别蓝牙4.2 和 5.0</span>
<span class="token constant">VERSION2_5_X</span>

<span class="token comment">//新版</span>
<span class="token constant">VERSION2_NEW</span>

<span class="token comment">// 理想值，支持所有特性。</span>
<span class="token class-name">VersionMax</span> <span class="token operator">=</span> <span class="token number">1000</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h4 id="获取各通道数据"><a href="#获取各通道数据" class="header-anchor">#</a> 获取各通道数据</h4> <p>接下来可以获取每个通道对应的参数数据，之所以单独讲这部分，是因为所有与修改相关的内容全部在这里。</p> <p>在阅读代码之前，我们先来了解通道的概念：通道相当于一个广播工具，它不管里面是什么内容，只管把内容广播出来，例如一个6通道的设备可能是这样的：</p> <table><thead><tr><th>通道序号</th> <th>0</th> <th>1</th> <th>2</th> <th>3</th> <th>4</th> <th>5</th></tr></thead> <tbody><tr><td>广播内容</td> <td>iBeacon</td> <td>TLM</td> <td>UID</td> <td>URL</td> <td>HTSensor</td> <td>None</td></tr> <tr><td>广播间隔（ms）</td> <td>1000</td> <td>2000</td> <td>500</td> <td>900</td> <td>3000</td> <td>0</td></tr> <tr><td>RSSI@0/1m（dbm）</td> <td>-1</td> <td>0</td> <td>-4</td> <td>-10</td> <td>-3</td> <td>0</td></tr> <tr><td>信号强度（dbm）</td> <td>4</td> <td>0</td> <td>-4</td> <td>4</td> <td>0</td> <td>0</td></tr></tbody></table> <p>上表的意思是，第0个通道广播iBeacon数据，第1个通道广播TLM数据，…，第5个通道不广播任何数据。它们每个都有独立的广播间隔，信号强度和校准值，互相之间没有关系也不产生任何影响。</p> <p>PS：校准值：RSSI@0/1m 指的是手机在设备0/1m（iBeacon为1，其它为0）处的信号强度。</p> <p>接下来我们来看下怎么获取设备的通道数据。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/*
 * mtConnectionHandler: MTConnectionHandler实例
 */</span>

<span class="token comment">// 当前设备每一个通道对应的数据帧</span>
<span class="token comment">// 此数组的数量和通道数量保持一致（也就是mtConnectionFeature.getSlotAtitude()）</span>
<span class="token comment">// 按照通道顺序严格排序，比如：0. -&gt; MinewiBeacon，1. -&gt; MinewUID ...</span>
<span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MinewFrame</span><span class="token punctuation">&gt;</span></span> allFrames <span class="token operator">=</span> mtConnectionHandler<span class="token punctuation">.</span>allFrames<span class="token punctuation">;</span>

<span class="token comment">/*
 * 假如第3个通道为iBeacon数据，第4个通道数据为UID，
 * 我们尝试解析第3个通道的数据。
 */</span>

<span class="token comment">// 由于默认指针是MinewFrame（MinewiBeacon的父级）类型，需要做一下转换。</span>

<span class="token comment">// 获取第3个通道的数据帧</span>
<span class="token class-name">MinewFrame</span> minewFrame <span class="token operator">=</span> allFrames<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 确认此通道是iBeacon类型，如果类型确认，可以不需要做这一步判断</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>minewFrame<span class="token punctuation">.</span><span class="token function">getFrameType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token class-name">FrameType<span class="token punctuation">.</span>FrameiBeacon</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token class-name">IBeaconFrame</span> iBeaconFrame <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">IBeaconFrame</span><span class="token punctuation">)</span> minewFrame<span class="token punctuation">;</span>
  
  <span class="token comment">// iBeacon数据</span>
  <span class="token class-name">String</span> uuid <span class="token operator">=</span> iBeaconFrame<span class="token punctuation">.</span><span class="token function">getUuid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">int</span> major <span class="token operator">=</span> iBeaconFrame<span class="token punctuation">.</span><span class="token function">getMajor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">int</span> minor <span class="token operator">=</span> iBeaconFrame<span class="token punctuation">.</span><span class="token function">getMinor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 所处通道的参数</span>
  <span class="token keyword">int</span> curSlot <span class="token operator">=</span> iBeaconFrame<span class="token punctuation">.</span><span class="token function">getCurSlot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 第几通道</span>
  <span class="token keyword">int</span> advInterval <span class="token operator">=</span> iBeaconFrame<span class="token punctuation">.</span><span class="token function">getAdvInterval</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 此通道的广播间隔</span>
  <span class="token keyword">int</span> advtxPower <span class="token operator">=</span> iBeaconFrame<span class="token punctuation">.</span><span class="token function">getAdvtxPower</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 此通道的信号校准值 iBeacon：RSSI@1m others： RSSI@0m</span>
  <span class="token keyword">int</span> radiotxPower <span class="token operator">=</span> iBeaconFrame<span class="token punctuation">.</span><span class="token function">getRadiotxPower</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 此通道信号强度</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><p>你可以使用同样的方式来解析其它所有通道，值得注意的是，当frameType == FrameNone 时，说明此通道没有广播数据。</p> <h4 id="修改通道数据"><a href="#修改通道数据" class="header-anchor">#</a> 修改通道数据</h4> <p>通过我们的开发套件，开发者可以自由的修改每个通道的广播数据。</p> <p>我们区分了静态数据帧和动态数据帧，静态数据帧指的是广播数据不会发生变化的：iBeacon，UID，URL等等，动态数据帧指的是广播数据不定时发生变化的：TLM，各类传感器数据等。</p> <p>可以通过下面的参考代码实现。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/*
 * mtConnectionHandler: MTConnectionHandler实例
 */</span>

<span class="token comment">// 生成一个uid实例</span>
<span class="token class-name">UidFrame</span> uidFrame <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UidFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
uidFrame<span class="token punctuation">.</span><span class="token function">setFrameType</span><span class="token punctuation">(</span><span class="token class-name">FrameType<span class="token punctuation">.</span>FrameUID</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 配置uid的namespaceId和instanceId参数</span>
uidFrame<span class="token punctuation">.</span><span class="token function">setNamespaceId</span><span class="token punctuation">(</span><span class="token string">&quot;0123456789abdcdcba12&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
uidFrame<span class="token punctuation">.</span><span class="token function">setInstanceId</span><span class="token punctuation">(</span><span class="token string">&quot;0123456789dc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 通道相关配置</span>
uidFrame<span class="token punctuation">.</span><span class="token function">setRadiotxPower</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 配置这个通道的广播功率</span>
uidFrame<span class="token punctuation">.</span><span class="token function">setAdvInterval</span><span class="token punctuation">(</span><span class="token number">600</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 配置这个通道的广播间隔</span>
uidFrame<span class="token punctuation">.</span><span class="token function">setAdvtxPower</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 配置这个通道的信号校准值 RSSI@0m</span>

<span class="token comment">// 写入到设备</span>
<span class="token comment">// 详情：1.把1通道设置为UID广播，namespaceId：0123456789abdcdcba12，instanceId：0123456789dc</span>
<span class="token comment">//      2.设置1通道的广播间隔为600ms，RSSI@0m为-3dbm，广播功率为：4dbm</span>
<span class="token comment">// 第二个参数为通道序号</span>
 mtConnectionHandler<span class="token punctuation">.</span><span class="token function">writeSlotFrame</span><span class="token punctuation">(</span>uidFrame<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">MTCOperationCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token annotation punctuation">@Override</span>
     <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onOperation</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> success<span class="token punctuation">,</span> <span class="token class-name">MTException</span> mtException<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token keyword">if</span><span class="token punctuation">(</span>success<span class="token punctuation">)</span><span class="token punctuation">{</span>
             <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Success!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
             <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span>mtException<span class="token punctuation">.</span>getMessage<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
     <span class="token punctuation">}</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//设置 LineaBeaconFrame</span>
<span class="token class-name">LineBeaconFrame</span> lineBeaconFrame <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LineBeaconFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
lineBeaconFrame<span class="token punctuation">.</span><span class="token function">setFrameType</span><span class="token punctuation">(</span><span class="token class-name">FrameType<span class="token punctuation">.</span>FrameLineBeacon</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> hwid <span class="token operator">=</span> <span class="token string">&quot;123456abfc&quot;</span><span class="token punctuation">;</span><span class="token comment">//Hwid长度为 10，包含 a-f/A-F/0-9</span>
<span class="token class-name">String</span> vendorKey <span class="token operator">=</span> <span class="token string">&quot;123456ad&quot;</span><span class="token punctuation">;</span><span class="token comment">//VendorKey长度为 8，包含 a-f/A-F/0-9</span>
<span class="token class-name">Stirng</span> lotKey <span class="token operator">=</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">;</span><span class="token comment">//LotKey长度为 16 包含 a-f/A-F/0-9</span>
lineBeaconFrame<span class="token punctuation">.</span><span class="token function">setHwid</span><span class="token punctuation">(</span>hwid<span class="token punctuation">)</span><span class="token punctuation">;</span>
lineBeaconFrame<span class="token punctuation">.</span><span class="token function">setVendorKey</span><span class="token punctuation">(</span>vendorKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
lineBeaconFrame<span class="token punctuation">.</span><span class="token function">setLotKey</span><span class="token punctuation">(</span>lotKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 第二个参数为通道序号</span>
 mtConnectionHandler<span class="token punctuation">.</span><span class="token function">writeSlotFrame</span><span class="token punctuation">(</span>lineBeaconFrame<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">MTCOperationCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token annotation punctuation">@Override</span>
     <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onOperation</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> success<span class="token punctuation">,</span> <span class="token class-name">MTException</span> mtException<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token keyword">if</span><span class="token punctuation">(</span>success<span class="token punctuation">)</span><span class="token punctuation">{</span>
             <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Success!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
             <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span>mtException<span class="token punctuation">.</span>getMessage<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
     <span class="token punctuation">}</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//设置高温灭菌产品温度范围</span>
            mMTConnectionHandler<span class="token punctuation">.</span><span class="token function">setHighTemperatureSterilization</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MTCOperationCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token annotation punctuation">@Override</span>
                <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onOperation</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> success<span class="token punctuation">,</span> <span class="token class-name">MTException</span> mtException<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         		<span class="token keyword">if</span><span class="token punctuation">(</span>success<span class="token punctuation">)</span><span class="token punctuation">{</span>
             			<span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Success!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         		<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
             			<span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span>mtException<span class="token punctuation">.</span>getMessage<span class="token punctuation">)</span><span class="token punctuation">;</span>
        		 <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>startTemp<span class="token punctuation">,</span> endTemp<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//查询高温灭菌产品温度范围</span>
	mMTConnectionHandler<span class="token punctuation">.</span><span class="token function">inquireSterilizationValue</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MTSensorOperateCallback</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SensorSterilizationModel</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                  <span class="token annotation punctuation">@Override</span>
                  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onResult</span><span class="token punctuation">(</span><span class="token class-name">SensorSterilizationModel</span> sensorSterilizationModel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                           <span class="token keyword">if</span> <span class="token punctuation">(</span>sensorSterilizationModel<span class="token punctuation">.</span><span class="token function">isSuccess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                                     	<span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;StartTemp &quot;</span><span class="token operator">+</span>sensorSterilizationModel<span class="token punctuation">.</span><span class="token function">getStartTemp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    			<span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;EndTemp &quot;</span><span class="token operator">+</span>sensorSterilizationModel<span class="token punctuation">.</span><span class="token function">getEndTemp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                           <span class="token punctuation">}</span>
                 <span class="token punctuation">}</span>
         <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br></div></div><p>注意，Slot参数有范围：</p> <ul><li><strong>Advertisement interval</strong>: 100 - 5000 (ms)</li> <li><strong>RSSI@0m</strong>: -127 - 0 (dbm)</li></ul> <p>注意**: Radio Txpower不是一个范围，它是几个特征值，如：-8，-4，0，4.你可以从“MTConnectionHandler”的feature属性获取所有支持的Radio Txpowers。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/*
 * mtConnectionFeature: a property of MTConnectionHandler.
 */</span>

<span class="token comment">// get all supported Radio txpower of current device.</span>
<span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> supportedTxpowers <span class="token operator">=</span> mtConnectionFeature<span class="token punctuation">.</span><span class="token function">getSupportedTxpowers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>你可以通过相同的方式修改任何一个通道的广播数据，如果需要关闭某个通道，只需要创建一个frameType=FrameNone的对象写入到设备即可，当然，别忘了设置通道序号。</p> <h4 id="特殊的帧数据"><a href="#特殊的帧数据" class="header-anchor">#</a> 特殊的帧数据</h4> <p>1.修改蓝牙广播方式：蓝牙5.0 125Kbps</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>   <span class="token comment">/**
     * 设置广播速率
     * @param mCurrentSlot 当前选择的通道值
     * @param templateBroadcastRate 1mbps设置为0， 125kbps设置为1
     * @return broadCastRate
     */</span>
<span class="token keyword">int</span> broadCastRate <span class="token operator">=</span> mtConnectionHandler<span class="token punctuation">.</span><span class="token function">calculateBroadCastRate</span><span class="token punctuation">(</span><span class="token keyword">int</span> mCurrentSlot<span class="token punctuation">,</span> <span class="token keyword">int</span> templateBroadcastRate<span class="token punctuation">)</span><span class="token punctuation">;</span>
mtConnectionHandler<span class="token punctuation">.</span><span class="token function">setBroadcastRate</span><span class="token punctuation">(</span><span class="token keyword">int</span> broadCastRate<span class="token punctuation">,</span> <span class="token class-name">MTCOperationCallback</span> mtcOperationCallback<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 设置广播速率</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>2.设置 Acc 帧参数：int odr, int wakeupThreshold, int wakeupDuration</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//获取Acc 的源参数：int odr, int wakeupThreshold, int wakeupDuration</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">AccParamsModel</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> mtConnectionHandler<span class="token punctuation">.</span><span class="token function">getSetAccParamsValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">AccParamsModel</span> paramsModel <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Pair</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> ordvalues <span class="token operator">=</span> paramsModel<span class="token punctuation">.</span><span class="token function">getOrdsVelues</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">Integer</span> odr<span class="token operator">=</span> ordvalues<span class="token punctuation">.</span>second<span class="token punctuation">;</span>
	<span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> wakeupTimeValues <span class="token operator">=</span> paramsModel<span class="token punctuation">.</span><span class="token function">getWakeupTimeValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//表示唤醒阈值范围</span>
    <span class="token keyword">int</span> wakeupTime_min <span class="token operator">=</span> wakeupTimeValuesp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//唤醒阈值最小值</span>
    <span class="token keyword">int</span> wakeupTime_max <span class="token operator">=</span> wakeupTimeValuesp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//唤醒阈值最大值</span>
	<span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> wakeupDurationValues <span class="token operator">=</span> paramsModel<span class="token punctuation">.</span><span class="token function">getWakeupDurationValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//唤醒持续时间范围</span>
    <span class="token keyword">int</span> wakeupDuration_min <span class="token operator">=</span> wakeupTimeValuesp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//唤醒持续时间最小值</span>
    <span class="token keyword">int</span> wakeupDuration_max <span class="token operator">=</span> wakeupTimeValuesp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//唤醒持续时间最大值</span>
<span class="token punctuation">}</span>

<span class="token comment">/*
设置Acc 的参数：wakeupThreshold 在 int[]wakeupTimeValues 范围内取值，wakeupDuration在int[] wakeupDurationValues范围内取值
*/</span>
mtConnectionHandler<span class="token punctuation">.</span><span class="token function">setAccValue</span><span class="token punctuation">(</span><span class="token class-name">MTCOperationCallback</span> mtcOperationCallback<span class="token punctuation">,</span> <span class="token keyword">int</span> odr<span class="token punctuation">,</span> <span class="token keyword">int</span> wakeupThreshold<span class="token punctuation">,</span> <span class="token keyword">int</span> wakeupDuration<span class="token punctuation">)</span><span class="token punctuation">;</span> 


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h4 id="修改设备全局参数"><a href="#修改设备全局参数" class="header-anchor">#</a> 修改设备全局参数</h4> <p>设备全局参数指的是设备级的一些特性，比如：配置设备是否可连接，是否需要密码，恢复出厂等。</p> <p>可以通过以下代码示例参考。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 恢复出厂设置</span>
mtConnectionHandler<span class="token punctuation">.</span><span class="token function">resetFactorySetting</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MTCOperationCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onOperation</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> success<span class="token punctuation">,</span> <span class="token class-name">MTException</span> mtException<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>success<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Success!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Failed!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 更新设备可连接设置</span>
<span class="token comment">// CONNECTABLE_YES为可连接，CONNECTABLE_NO不可连接，</span>
<span class="token comment">// 配置设备不可连接后，可以通过按下设备上的按钮再次连接到设备。</span>
<span class="token comment">// !!!:如果设备上没有按钮，且把设备配置为不可连后，设备将无法再次被连接。</span>
mtConnectionHandler<span class="token punctuation">.</span><span class="token function">updateConnectable</span><span class="token punctuation">(</span><span class="token constant">CONNECTABLE_NO</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">MTCOperationCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onOperation</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token keyword">boolean</span> success<span class="token punctuation">,</span> <span class="token keyword">final</span> <span class="token class-name">MTException</span> mtException<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>success<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Success!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Failed!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 修改/增加密码</span>
<span class="token comment">// !!!: 只能设置8位密码，数字或英文字母；</span>
<span class="token comment">// 设备没有密码时，会添加密码，设备有密码时，会更新密码。</span>
mtConnectionHandler<span class="token punctuation">.</span><span class="token function">modifyPassword</span><span class="token punctuation">(</span><span class="token string">&quot;minew123&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">MTCOperationCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onOperation</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token keyword">boolean</span> success<span class="token punctuation">,</span> <span class="token class-name">MTException</span> mtException<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>success<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Success!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Failed!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 移除密码</span>
mtConnectionHandler<span class="token punctuation">.</span><span class="token function">removePassword</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MTCOperationCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onOperation</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token keyword">boolean</span> success<span class="token punctuation">,</span> <span class="token class-name">MTException</span> mtException<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>success<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Success!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Failed!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * 远程关闭设备
 * !!!:请确认设备上有按钮，可以通过按下按钮的方式重启，否则关闭后无法重启设备。
 * 
 * （新增）注意：如果model name为Beacon Plus-BL，设备不支持关机操作，将直接
 * 抛出UnsupportedOperationException异常。需要进行预先判断model name的值
 *
 * 通过MTConnectionHandler.systeminfos.get(Constants.modlenumber)获取model name的值
 */</span>
mtConnectionHandler<span class="token punctuation">.</span><span class="token function">powerOff</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MTCOperationCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onOperation</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> success<span class="token punctuation">,</span> <span class="token class-name">MTException</span> mtException<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>success<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Success!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Failed!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br></div></div><h4 id="设备上的传感器数据"><a href="#设备上的传感器数据" class="header-anchor">#</a> 设备上的传感器数据</h4> <p>BeaconPlus设备整合了温湿度，光感，加速度等多种传感器，目前我们提供了温湿度历史数据的读取接口和红外传感器参数设置接口。</p> <p>**请注意：**在2019年1月9日，我们提供了新的接口来获取温湿度数据，如果使用的是在此日期后提供的新接口，请及时更换。代码如下：</p> <ol><li>红外传感器数据</li></ol> <p>请确认此设备带有温湿度传感器，否则无法正确获取数据。</p> <p>可以通过以下代码示例参考。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/*
 *  mtConnectionHandler: MTConnectionHandler实例
 *  
 * long longtime = System.currentTimeMillis();
 * int time = (int) (longtime / 1000);
 * byte[] curTime = Tools.intToBytes(time)
 */</span>

<span class="token comment">// 从设备上读取温湿度数据</span>
mMTConnectionHandler<span class="token punctuation">.</span><span class="token function">getMtSensorHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">readSensorHistory</span><span class="token punctuation">(</span>curTime<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">MTSensorOperateCallback</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SensorHTModel</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onResult</span><span class="token punctuation">(</span><span class="token class-name">SensorHTModel</span> sensorHTModel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> date <span class="token operator">=</span> sensorModel<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 此数据的Unix时间戳；</span>
        <span class="token keyword">float</span> temperature <span class="token operator">=</span> sensorModel<span class="token punctuation">.</span><span class="token function">getTemperature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 温度数据；</span>
        <span class="token keyword">float</span> humidity <span class="token operator">=</span> sensorModel<span class="token punctuation">.</span><span class="token function">getHumidity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 湿度数据；</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onNoHistoricalData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 从设备上读取温度数据</span>
mMTConnectionHandler<span class="token punctuation">.</span><span class="token function">getMtSensorHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">readTempSensorHistory</span><span class="token punctuation">(</span>curTime<span class="token punctuation">,</span> <span class="token keyword">new</span>  <span class="token class-name">MTSensorOperateCallback</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SensorTempModel</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onResult</span><span class="token punctuation">(</span><span class="token class-name">SensorTempModel</span> sensorTempModel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> date <span class="token operator">=</span> sensorTempModel<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 此数据的Unix时间戳；</span>
        <span class="token keyword">float</span> temperature <span class="token operator">=</span> sensorModel<span class="token punctuation">.</span><span class="token function">getTemperature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 温度数据</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 从设备上六轴传感器数据</span>
mMTConnectionHandler<span class="token punctuation">.</span><span class="token function">getMtSensorHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">readLSMHistory</span><span class="token punctuation">(</span><span class="token class-name">Tools</span><span class="token punctuation">.</span><span class="token function">intToBytes</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">MTSensorOperateCallback</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SensorSixAxisModel</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token annotation punctuation">@Override</span>
                    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onResult</span><span class="token punctuation">(</span><span class="token class-name">SensorSixAxisModel</span> sensorSixAxisModel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token keyword">int</span> date <span class="token operator">=</span> sensorSixAxisModel<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 此数据的Unix时间戳；</span>
                        <span class="token keyword">double</span> <span class="token class-name">A_XAxis</span> <span class="token operator">=</span> sensorSixAxisModel<span class="token punctuation">.</span><span class="token function">getA_XAxis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">double</span> <span class="token class-name">A_YAxis</span> <span class="token operator">=</span> sensorSixAxisModel<span class="token punctuation">.</span><span class="token function">getA_YAxis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">double</span> <span class="token class-name">A_ZAxis</span> <span class="token operator">=</span> sensorSixAxisModel<span class="token punctuation">.</span><span class="token function">getA_ZAxis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">double</span> <span class="token class-name">D_XAxis</span> <span class="token operator">=</span> sensorSixAxisModel<span class="token punctuation">.</span><span class="token function">getD_XAxis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">double</span> <span class="token class-name">D_YAxis</span> <span class="token operator">=</span> sensorSixAxisModel<span class="token punctuation">.</span><span class="token function">getD_YAxis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">double</span> <span class="token class-name">D_ZAxis</span> <span class="token operator">=</span> sensorSixAxisModel<span class="token punctuation">.</span><span class="token function">getD_ZAxis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 从设备上磁力计传感器数据</span>
mMTConnectionHandler<span class="token punctuation">.</span><span class="token function">getMtSensorHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">readLISHistory</span><span class="token punctuation">(</span><span class="token class-name">Tools</span><span class="token punctuation">.</span><span class="token function">intToBytes</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">MTSensorOperateCallback</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SensorMAGModel</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token annotation punctuation">@Override</span>
                    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onResult</span><span class="token punctuation">(</span><span class="token class-name">SensorMAGModel</span> sensorMAGModel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token keyword">int</span> date <span class="token operator">=</span> sensorMAGModel<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 此数据的Unix时间戳；</span>
                    	<span class="token keyword">double</span> <span class="token class-name">A_XAxis</span> <span class="token operator">=</span> sensorMAGModel<span class="token punctuation">.</span><span class="token function">getA_XAxis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">double</span> <span class="token class-name">A_YAxis</span> <span class="token operator">=</span> sensorMAGModel<span class="token punctuation">.</span><span class="token function">getA_YAxis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">double</span> <span class="token class-name">A_ZAxis</span> <span class="token operator">=</span> sensorMAGModel<span class="token punctuation">.</span><span class="token function">getA_ZAxis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 从设备上大气压力传感器数据</span>
mMTConnectionHandler<span class="token punctuation">.</span><span class="token function">getMtSensorHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">readDPSHistory</span><span class="token punctuation">(</span><span class="token class-name">Tools</span><span class="token punctuation">.</span><span class="token function">intToBytes</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">MTSensorOperateCallback</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SensorAPModel</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token annotation punctuation">@Override</span>
                    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onResult</span><span class="token punctuation">(</span><span class="token class-name">SensorAPModel</span> sensorAPModel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        	<span class="token keyword">int</span> date <span class="token operator">=</span> sensorAPModel<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 此数据的Unix时间戳；</span>
                    	    <span class="token keyword">double</span> pressure <span class="token operator">=</span> sensorAPModel<span class="token punctuation">.</span><span class="token function">getPressure</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br></div></div><p>你可以用表格或者曲线的方式把这些数据生动的呈现出来。</p> <ol start="2"><li>红外传感器数据</li></ol> <p>请确认此设备带有红外传感器，否则无法正确获取数据。可以通过以下代码示例参考：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/*
 *  mtConnectionHandler: MTConnectionHandler实例
 */</span>
<span class="token class-name">MTSensorHandler</span> mtSensorHandler <span class="token operator">=</span> mMtConnectionHandler<span class="token punctuation">.</span><span class="token function">getMtSensorHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">MTSensorModel</span><span class="token punctuation">&gt;</span></span> sensorMap <span class="token operator">=</span> mtSensorHandler<span class="token punctuation">.</span><span class="token function">getSensorMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">SensorPIRModel</span> sensorPIRModel <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">SensorPIRModel</span><span class="token punctuation">)</span> sensorMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">FrameType<span class="token punctuation">.</span>FramePIRSensor</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//触发时间</span>
<span class="token keyword">int</span> time <span class="token operator">=</span> sensorPIRModel<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//是否允许重复触发</span>
<span class="token keyword">boolean</span> repeatTrigger <span class="token operator">=</span> sensorPIRModel<span class="token punctuation">.</span><span class="token function">isRepeatTrigger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="特殊历史数据获取"><a href="#特殊历史数据获取" class="header-anchor">#</a> 特殊历史数据获取</h4> <ol><li><p>获取高温灭菌设备历史数据</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//获取当前时间</span>
         <span class="token keyword">final</span> <span class="token keyword">long</span> longtime <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token keyword">int</span> time <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>longtime <span class="token operator">/</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//时间值转为 bytes</span>
         <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> timeBytes <span class="token operator">=</span> <span class="token class-name">Tools</span><span class="token punctuation">.</span><span class="token function">intToBytes</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 获取历史数据</span>
mMtConnectionHandler<span class="token punctuation">.</span><span class="token function">readHighTempSterilizationHistory</span><span class="token punctuation">(</span>timeBytes<span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">MTSensorOperateCallback</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SensorSterilizationModel</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

             <span class="token annotation punctuation">@Override</span>
             <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onResult</span><span class="token punctuation">(</span><span class="token class-name">SensorSterilizationModel</span> sensorSterilizationModel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                 <span class="token keyword">if</span> <span class="token punctuation">(</span>syncDataBtn<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                     syncDataBtn<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                         <span class="token annotation punctuation">@Override</span>
                         <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                             <span class="token keyword">if</span> <span class="token punctuation">(</span>sensorSterilizationModel<span class="token punctuation">.</span><span class="token function">isSuccess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                                     sterilizationModelList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>sensorSterilizationModel<span class="token punctuation">)</span><span class="token punctuation">;</span>
                             <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
                                 <span class="token keyword">if</span> <span class="token punctuation">(</span>sterilizationModelList<span class="token operator">==</span><span class="token keyword">null</span><span class="token operator">||</span>sterilizationModelList<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                                     <span class="token keyword">if</span> <span class="token punctuation">(</span>sensorSterilizationModel<span class="token punctuation">.</span><span class="token function">getTag</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                                         <span class="token comment">//没有历史数据</span>
                                     <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
                                         <span class="token comment">//获取数据超时</span>
                                     <span class="token punctuation">}</span>
                                 <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
				   					<span class="token comment">//刷新界面</span>
                                 <span class="token punctuation">}</span>
                             <span class="token punctuation">}</span>
                         <span class="token punctuation">}</span>
                     <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                 <span class="token punctuation">}</span>
             <span class="token punctuation">}</span>
         <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//整数 转 4个字节的字节数组</span>
 <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">intToBytes</span><span class="token punctuation">(</span><span class="token keyword">int</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> src <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
     src<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>value <span class="token operator">&gt;&gt;</span> <span class="token number">24</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token number">0xFF</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     src<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>value <span class="token operator">&gt;&gt;</span> <span class="token number">16</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token number">0xFF</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     src<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>value <span class="token operator">&gt;&gt;</span> <span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token number">0xFF</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     src<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>value <span class="token operator">&amp;</span> <span class="token number">0xFF</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">return</span> src<span class="token punctuation">;</span>
 <span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div></li> <li><p>清空高温灭菌设备历史记录</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>		mMtConnectionHandler<span class="token punctuation">.</span><span class="token function">cleanHighTempSterilizationHistory</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MTSensorOperateCallback</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SensorSterilizationModel</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

                             <span class="token annotation punctuation">@Override</span>
                             <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onResult</span><span class="token punctuation">(</span><span class="token class-name">SensorSterilizationModel</span> mtSensorModel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     							<span class="token keyword">if</span> <span class="token punctuation">(</span>mtSensorModel<span class="token punctuation">.</span><span class="token function">isSuccess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         							<span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Success!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     							<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
         							<span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Failed!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     							<span class="token punctuation">}</span>
                             <span class="token punctuation">}</span>
                         <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></li></ol> <h5 id="配置触发器"><a href="#配置触发器" class="header-anchor">#</a> 配置触发器</h5> <p>BeaconPlus设备加入了触发器功能，你可以给每个通道独立的配置触发器，仅当满足触发条件时设备才会开启对应通道进行广播，否则，对应通道将会一直处于关闭状态。</p> <p>可以通过以下代码示例参考。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/*
   mtConnectionHandler: MTConnectionHandler 单例
*/</span>

<span class="token class-name">Trigger</span> trigger <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Trigger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
trigger<span class="token punctuation">.</span><span class="token function">setCurSlot</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// Target slot：2</span>
trigger<span class="token punctuation">.</span><span class="token function">setTriggerType</span><span class="token punctuation">(</span><span class="token constant">TEMPERATURE_ABOVE_ALARM</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// Triggering condition：temperature above</span>
trigger<span class="token punctuation">.</span><span class="token function">setCondition</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// value：10</span>
mMTConnectionHandler<span class="token punctuation">.</span><span class="token function">setTriggerCondition</span><span class="token punctuation">(</span>trigger<span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">SetTriggerListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onSetTrigger</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> success<span class="token punctuation">,</span> <span class="token class-name">MTException</span> mtException<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>success<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Success!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Failed!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//设置通道</span>
<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token class-name">SetPassage</span><span class="token punctuation">(</span><span class="token keyword">int</span> slot<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">Trigger</span> trigger <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Trigger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//实例化触发器</span>
    <span class="token comment">//一般是有 6个通道</span>
	 <span class="token function">swith</span><span class="token punctuation">(</span>slot<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token number">0</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>表示通道 <span class="token number">1</span>  
        trigger<span class="token punctuation">.</span><span class="token function">setCurSlot</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>表示通道 <span class="token number">2</span>
        trigger<span class="token punctuation">.</span><span class="token function">setCurSlot</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token number">2</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>表示通道 <span class="token number">3</span>
        trigger<span class="token punctuation">.</span><span class="token function">setCurSlot</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token number">3</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>表示通道 <span class="token number">4</span>
        trigger<span class="token punctuation">.</span><span class="token function">setCurSlot</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token number">4</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>表示通道 <span class="token number">5</span>
        trigger<span class="token punctuation">.</span><span class="token function">setCurSlot</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token number">5</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>表示通道 <span class="token number">6</span>
        trigger<span class="token punctuation">.</span><span class="token function">setCurSlot</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">default</span>：
        <span class="token keyword">break</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">switch</span><span class="token punctuation">(</span><span class="token class-name">TriggerType</span> triggerType<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//这里的参数是一个枚举</span>
        <span class="token keyword">case</span> <span class="token constant">TEMPERATURE_ABOVE_ALARM</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>温度高于
            trigger<span class="token punctuation">.</span><span class="token function">setTriggerType</span><span class="token punctuation">(</span><span class="token constant">TEMPERATURE_ABOVE_ALARM</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//触发条件：温度高于</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token constant">TEMPERATURE_BELOW_ALARM</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>温度低于
            trigger<span class="token punctuation">.</span><span class="token function">setTriggerType</span><span class="token punctuation">(</span><span class="token constant">TEMPERATURE_BELOW_ALARM</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token constant">HUMIDITY_ABOVE_ALRM</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>湿度高于
            trigger<span class="token punctuation">.</span><span class="token function">setTriggerType</span><span class="token punctuation">(</span><span class="token constant">HUMIDITY_ABOVE_ALRM</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token constant">HUMIDITY_BELOW_ALRM</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>湿度低于
            trigger<span class="token punctuation">.</span><span class="token function">setTriggerType</span><span class="token punctuation">(</span><span class="token constant">HUMIDITY_BELOW_ALRM</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token constant">BTN_DTAP_EVT</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>双击
            trigger<span class="token punctuation">.</span><span class="token function">setTriggerType</span><span class="token punctuation">(</span><span class="token constant">BTN_DTAP_EVT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token constant">BTN_TTAP_EVT</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>三击
            trigger<span class="token punctuation">.</span><span class="token function">setTriggerType</span><span class="token punctuation">(</span><span class="token constant">BTN_TTAP_EVT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token constant">TEMPERATURE_RECOVER</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>温度恢复正常
            trigger<span class="token punctuation">.</span><span class="token function">setTriggerType</span><span class="token punctuation">(</span><span class="token constant">TEMPERATURE_RECOVER</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    
<span class="token keyword">int</span> mTemCondition<span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token comment">//达到触发条件后，广播时长：10s</span>
<span class="token keyword">switch</span> <span class="token punctuation">(</span>triggerType<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token keyword">case</span> <span class="token constant">TEMPERATURE_ABOVE_ALARM</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>温度高于
                        <span class="token keyword">case</span> <span class="token constant">TEMPERATURE_BELOW_ALARM</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>温度低于
                        <span class="token keyword">case</span> <span class="token constant">HUMIDITY_ABOVE_ALRM</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>湿度高于
                        <span class="token keyword">case</span> <span class="token constant">HUMIDITY_BELOW_ALRM</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>湿度低于
                        <span class="token keyword">case</span> <span class="token constant">LIGHT_ABOVE_ALRM</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>光感高于
                        <span class="token keyword">case</span> <span class="token constant">LIGHT_BELOW_ALARM</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>光感低于
                        <span class="token keyword">case</span> <span class="token constant">FORCE_ABOVE_ALRM</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>压感高于
                        <span class="token keyword">case</span> <span class="token constant">FORCE_BELOW_ALRM</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>压感低于
                        <span class="token keyword">case</span> <span class="token constant">TVOC_ABOVE_ALARM</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token constant">TVOC</span>高于
                        <span class="token keyword">case</span> <span class="token constant">TVOC_BELOW_ALARM</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token constant">TVOC</span>低于
        				<span class="token keyword">case</span> <span class="token constant">TEMPERATURE_RECOVER</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>温度恢复正常
                            trigger<span class="token punctuation">.</span><span class="token function">setCondition</span><span class="token punctuation">(</span>mTemCondition<span class="token punctuation">)</span><span class="token punctuation">;</span>
                            <span class="token keyword">break</span><span class="token punctuation">;</span>
                        <span class="token keyword">default</span><span class="token operator">:</span>
                            trigger<span class="token punctuation">.</span><span class="token function">setCondition</span><span class="token punctuation">(</span>mTemCondition <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
    
trigger<span class="token punctuation">.</span><span class="token function">setAlwaysAdvertising</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> alwaysAdvertising<span class="token punctuation">)</span><span class="token comment">//设置是否开启基础参数广播。true：开启，false:关闭。</span>
trigger<span class="token punctuation">.</span><span class="token function">setTriggerType</span><span class="token punctuation">(</span><span class="token class-name">TriggerType</span><span class="token punctuation">.</span><span class="token constant">TRIGGER_SRC_NONE</span><span class="token punctuation">)</span><span class="token comment">//设置是否开启触发器广播。当值为TRIGGER_SRC_NONE时关闭，其它值时开启。</span>

   
trigger<span class="token punctuation">.</span><span class="token function">setAdvInterval</span><span class="token punctuation">(</span><span class="token keyword">int</span> advInterval<span class="token punctuation">)</span><span class="token comment">//广播的条件：时间间隔，最大值为 5000ms</span>
trigger<span class="token punctuation">.</span><span class="token function">setRadioTxpower</span><span class="token punctuation">(</span><span class="token keyword">int</span> radioTxpower<span class="token punctuation">)</span><span class="token comment">//广播条件：广播信号强度，最大为 4，一般这个是负值</span>
mMTConnectionHandler<span class="token punctuation">.</span><span class="token function">setTriggerCondition</span><span class="token punctuation">(</span>trigger<span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">SetTriggerListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onSetTrigger</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> success<span class="token punctuation">,</span> <span class="token class-name">MTException</span> mtException<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>success<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Success!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;beaconplus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Failed!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">TriggerType</span><span class="token punctuation">{</span>
 <span class="token function">MOTION_DETECT</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">//加速度</span>
    <span class="token function">TEMPERATURE_ABOVE_ALARM</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">//温度高于</span>
    <span class="token function">TEMPERATURE_BELOW_ALARM</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">//温度低于</span>
    <span class="token function">HUMIDITY_ABOVE_ALRM</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">//湿度高于</span>
    <span class="token function">HUMIDITY_BELOW_ALRM</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">//湿度低于</span>
    <span class="token function">LIGHT_ABOVE_ALRM</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">//光感高于</span>
    <span class="token function">BTN_PUSH_EVT</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">//按下按键</span>
    <span class="token function">BTN_RELEASE_EVT</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">//按键弹出</span>
    <span class="token function">BTN_STAP_EVT</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">//单击按键</span>
    <span class="token function">BTN_DTAP_EVT</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">//双击按键</span>
    <span class="token function">BTN_TTAP_EVT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">//三击按键</span>
    <span class="token function">LIGHT_BELOW_ALARM</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">//光感低于</span>
    <span class="token function">FORCE_ABOVE_ALRM</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">//压感大于</span>
    <span class="token function">FORCE_BELOW_ALRM</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">//压感低于</span>
    <span class="token function">PIR_DETECT</span><span class="token punctuation">(</span><span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">//红外</span>
    <span class="token function">TVOC_ABOVE_ALARM</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">//TVOC大于</span>
    <span class="token function">TVOC_BELOW_ALARM</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">//TVOC低于</span>
    <span class="token function">VIBRATION_DETECT</span><span class="token punctuation">(</span><span class="token number">17</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">//振动触发</span>
    <span class="token function">LEAKAGE_ALARM</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">//泄露报警</span>
    <span class="token function">TEMPERATURE_RECOVER</span><span class="token punctuation">(</span><span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">//温度恢复(用于进入高温后恢复至正常温度时触发)</span>
    
    <span class="token function">TRIGGER_SRC_NONE</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br></div></div><h5 id="振动传感器相关操作"><a href="#振动传感器相关操作" class="header-anchor">#</a> 振动传感器相关操作</h5> <div class="language-java line-numbers-mode"><pre class="language-java"><code> <span class="token comment">/**
     * 设置振动传感器的灵敏度
     * 超高：0x00, 高：0x01，中：0x02，低：0x03，超低：0x04
     */</span>
<span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token number">0x00</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
mMTConnectionHandler<span class="token punctuation">.</span><span class="token function">setVibrationSensitivity</span><span class="token punctuation">(</span>bytes<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">MTCOperationCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onOperation</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> success<span class="token punctuation">,</span> <span class="token class-name">MTException</span> mtException<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">runOnUiThread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token annotation punctuation">@Override</span>
                    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    	
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/**
* 设置报警时区
* String startTime = &quot;19:00&quot; 
* String endTime = &quot;21:00&quot;
* int switch_status = 0 // 0：关，1：开
*/</span>
mMTConnectionHandler<span class="token punctuation">.</span><span class="token function">setAlarmTime</span><span class="token punctuation">(</span>startTime1<span class="token punctuation">,</span>endTime1<span class="token punctuation">,</span>switch_status1<span class="token punctuation">,</span>
startTime2<span class="token punctuation">,</span>endTime2<span class="token punctuation">,</span>switch_status2<span class="token punctuation">,</span>
startTime3<span class="token punctuation">,</span>endTime3<span class="token punctuation">,</span>switch_status3<span class="token punctuation">,</span>
mtcOperationCallback<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//设置报警时区的回调方法</span>
<span class="token class-name">MTCOperationCallback</span> mtcOperationCallback <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MTCOperationCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onOperation</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> success<span class="token punctuation">,</span> <span class="token class-name">MTException</span> mtException<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">runOnUiThread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token annotation punctuation">@Override</span>
                <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">/**
* 设置振动功能开关
* 0x01：开，0x00: 关
* byte[] statusByte = new byte[]{0x00}; 关
* byte[] statusByte = new byte[]{0x01};	开
*/</span>
statusByte <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token number">0x00</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
mMTConnectionHandler<span class="token punctuation">.</span><span class="token function">setVibrationsensorStatus</span><span class="token punctuation">(</span>statusByte<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">MTCOperationCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token annotation punctuation">@Override</span>
          <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onOperation</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> success<span class="token punctuation">,</span> <span class="token class-name">MTException</span> mtException<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token function">runOnUiThread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            <span class="token annotation punctuation">@Override</span>
                            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                
                            <span class="token punctuation">}</span>
                        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


mMTConnectionHandler<span class="token punctuation">.</span><span class="token function">inquireVibrationSensitivity</span><span class="token punctuation">(</span>mtSensorOperateCallback<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获取振动灵敏度</span>
mMTConnectionHandler<span class="token punctuation">.</span><span class="token function">inquireVibrationsensorStatus</span><span class="token punctuation">(</span>mtSensorOperateCallback<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//查询振动状态</span>
mMTConnectionHandler<span class="token punctuation">.</span><span class="token function">inquireAlarmTime</span><span class="token punctuation">(</span>mtSensorOperateCallback<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//查询报警时区</span>

 <span class="token comment">/**
  * 获取振动灵敏度，查询振动状态，查询报警时区的回调方法
  */</span>
<span class="token class-name">MTSensorOperateCallback</span> mtSensorOperateCallback <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MTSensorOperateCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token annotation punctuation">@Override</span>
   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onResult</span><span class="token punctuation">(</span><span class="token class-name">MTSensorModel</span> mtSensorModel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   	<span class="token keyword">if</span> <span class="token punctuation">(</span>mtSensorModel <span class="token keyword">instanceof</span> <span class="token class-name">VibrationSensorModel</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token class-name">VibrationSensorModel</span> vibrationSensorModel <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">VibrationSensorModel</span><span class="token punctuation">)</span> mtSensorModel<span class="token punctuation">;</span>

     <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>mtSensorModel <span class="token keyword">instanceof</span> <span class="token class-name">VibrationStatusModel</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token class-name">VibrationStatusModel</span> vibrationStatusModel <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">VibrationStatusModel</span><span class="token punctuation">)</span> mtSensorModel<span class="token punctuation">;</span>
               
     <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>mtSensorModel <span class="token keyword">instanceof</span> <span class="token class-name">SensorTimeModel</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token class-name">SensorTimeModel</span> sensorTimeModel <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">SensorTimeModel</span><span class="token punctuation">)</span> mtSensorModel<span class="token punctuation">;</span>
                        <span class="token keyword">switch</span> <span class="token punctuation">(</span>sensorTimeModel<span class="token punctuation">.</span><span class="token function">getTimeInterval</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            <span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span>
                                startTime1 <span class="token operator">=</span> sensorTimeModel<span class="token punctuation">.</span><span class="token function">getStartTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                endTime1 <span class="token operator">=</span> sensorTimeModel<span class="token punctuation">.</span><span class="token function">getEndTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                timeSwitch1 <span class="token operator">=</span> sensorTimeModel<span class="token punctuation">.</span><span class="token function">getTimeSwitch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                <span class="token keyword">break</span><span class="token punctuation">;</span>
                            <span class="token keyword">case</span> <span class="token number">2</span><span class="token operator">:</span>
                                startTime2 <span class="token operator">=</span> sensorTimeModel<span class="token punctuation">.</span><span class="token function">getStartTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                endTime2 <span class="token operator">=</span> sensorTimeModel<span class="token punctuation">.</span><span class="token function">getEndTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                timeSwitch2 <span class="token operator">=</span> sensorTimeModel<span class="token punctuation">.</span><span class="token function">getTimeSwitch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                <span class="token keyword">break</span><span class="token punctuation">;</span>
                            <span class="token keyword">case</span> <span class="token number">3</span><span class="token operator">:</span>
                                startTime3 <span class="token operator">=</span> sensorTimeModel<span class="token punctuation">.</span><span class="token function">getStartTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                endTime3 <span class="token operator">=</span> sensorTimeModel<span class="token punctuation">.</span><span class="token function">getEndTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                timeSwitch3 <span class="token operator">=</span> sensorTimeModel<span class="token punctuation">.</span><span class="token function">getTimeSwitch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                <span class="token keyword">break</span><span class="token punctuation">;</span>
                            <span class="token keyword">default</span><span class="token operator">:</span>
                                <span class="token keyword">break</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>；
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br></div></div><h4 id="修改设备名称"><a href="#修改设备名称" class="header-anchor">#</a> 修改设备名称</h4> <p>BeaconPlus 设备可以修改设备名称。</p> <ol><li><p>如果设备已连接并且密码验证已完成，则可以从以下代码中获取设备名称 :</p> <p>MTConnectionHandler mtConnectionHandler = mtPeripheral.mMTConnectionHandler;
HashMap&lt;String, String&gt; systeminfos = mtConnectionHandler.systeminfos;
String deviceName = systeminfos.get(Constants.deviceName);</p></li> <li><p>如果设备名称不为空，则表示当前SDK版本支持修改设备名称，API如下 :</p></li> <li><p>byte[] deviceNameBytes = new byte[12];</p> <p>设备名称的字节长度必须小于或等于11个字节，这意味着设备名称的最大长度为11个字节。
第12个字节的末尾必须是0x00，如果设备名称的长度小于11个字节，则剩余的字节也将填充0x00。</p> <p>例如：
byte[] deviceNameBytes = new byte[12]{(byte)0x50,(byte)0x4C,(byte)55,(byte)53,(byte)30,(byte)30,(byte)30,(byte)31,(byte)00,(byte)00,(byte)00,(byte)00};</p></li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code>
            <span class="token class-name">String</span> hexDeviceName <span class="token operator">=</span> <span class="token class-name">Tools</span><span class="token punctuation">.</span><span class="token function">stringToHex</span><span class="token punctuation">(</span>deviceName<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> deviceNameBytes <span class="token operator">=</span> <span class="token class-name">Tools</span><span class="token punctuation">.</span><span class="token function">hexStringToByte</span><span class="token punctuation">(</span>hexDeviceName<span class="token punctuation">)</span><span class="token punctuation">;</span>

	   <span class="token comment">// 如果deviceNameBytes的长度小于11个字节，请用0x00填充剩余部分</span>
            <span class="token keyword">int</span> noneBytesLength <span class="token operator">=</span> <span class="token number">12</span> <span class="token operator">-</span> deviceNameBytes<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
            <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> noneBytes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span>noneBytesLength<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> sendDeviceNameBytes <span class="token operator">=</span> <span class="token class-name">Tools</span><span class="token punctuation">.</span><span class="token function">byteMerger</span><span class="token punctuation">(</span>deviceNameBytes<span class="token punctuation">,</span>noneBytes<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span>mMtConnectionHandler<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                mMtConnectionHandler<span class="token punctuation">.</span><span class="token function">modifyDeviceName</span><span class="token punctuation">(</span>sendDeviceNameBytes<span class="token punctuation">,</span> <span class="token punctuation">(</span>success<span class="token punctuation">,</span> mtException<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>success<span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token comment">// 修改成功</span>
                    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token comment">// 修改失败                </span>
		    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>现在，你可以参考以上示例进行开发了。</p> <h3 id="ota单独说明"><a href="#ota单独说明" class="header-anchor">#</a> OTA单独说明</h3> <p>常规的OTA逻辑比较复杂，所以单独封装了 MTOTAManager 来执行 OTA 操作，必须在已经和设备建立连接的状态下才能进行。</p> <ol><li>AndroidManifest.xml 文件添加如下配置 ：</li></ol> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>service</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.minew.beaconplus.sdk.services.DfuService<span class="token punctuation">&quot;</span></span>
             <span class="token attr-name"><span class="token namespace">android:</span>foregroundServiceType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>connectedDevice|location<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="2"><li>Gradle 文件添加如下配置 ：</li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code>	implementation 'no<span class="token punctuation">.</span>nordicsemi<span class="token punctuation">.</span>android<span class="token operator">:</span>dfu<span class="token operator">:</span><span class="token number">2.5</span><span class="token number">.0</span>'
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="3"><li>代码实现 ：</li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">MTOTAManager</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">startOTA</span><span class="token punctuation">(</span>
	<span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>			<span class="token comment">//上下文对象</span>
    mMtConnectionHandler<span class="token punctuation">,</span> 	<span class="token comment">//连接持有者对象</span>
    tem_path<span class="token punctuation">,</span> 				<span class="token comment">//文件路径</span>
    mMtDfuListener			<span class="token comment">//升级回调监听</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	
<span class="token comment">//回调监听实现以下接口</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">MtDfuListener</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">onOTAStateChanged</span><span class="token punctuation">(</span><span class="token class-name">OTAState</span> otaState<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">onProgressChanged</span><span class="token punctuation">(</span> <span class="token keyword">final</span> <span class="token keyword">int</span> percent<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">onError</span><span class="token punctuation">(</span><span class="token class-name">MTException</span> mtException<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//升级状态枚举类</span>
<span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">OTAState</span> <span class="token punctuation">{</span>
    <span class="token class-name">OTAStateUndefined</span><span class="token punctuation">,</span>
    <span class="token class-name">OTAStateEnablingDfuMode</span><span class="token punctuation">,</span>
    <span class="token class-name">OTAStateWaitingReconnect</span><span class="token punctuation">,</span>
    <span class="token class-name">OTAStateReConnecting</span><span class="token punctuation">,</span>
    <span class="token class-name">OTAStateStarting</span><span class="token punctuation">,</span>
    <span class="token class-name">OTAStateUploading</span><span class="token punctuation">,</span>
    <span class="token class-name">OTAStateValidating</span><span class="token punctuation">,</span>
    <span class="token class-name">OTAStateDisconnecting</span><span class="token punctuation">,</span>
    <span class="token class-name">OTAStateCompleted</span><span class="token punctuation">,</span>
    <span class="token class-name">OTAStateAborted</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
	
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h2 id="注意事项"><a href="#注意事项" class="header-anchor">#</a> 注意事项</h2> <ol><li>在Android-6.0以上版本蓝牙扫描需要动态申请地理位置权限，具体如下：</li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code>  <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> requestPermissions<span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Build</span><span class="token punctuation">.</span><span class="token constant">VERSION</span><span class="token punctuation">.</span><span class="token constant">SDK_INT</span> <span class="token operator">&gt;=</span> <span class="token class-name">Build<span class="token punctuation">.</span>VERSION_CODES<span class="token punctuation">.</span>S</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          requestPermissions <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span>
                  <span class="token class-name">Manifest</span><span class="token punctuation">.</span>permission<span class="token punctuation">.</span><span class="token constant">BLUETOOTH_SCAN</span><span class="token punctuation">,</span>
                  <span class="token class-name">Manifest</span><span class="token punctuation">.</span>permission<span class="token punctuation">.</span><span class="token constant">BLUETOOTH_CONNECT</span><span class="token punctuation">,</span>
                  <span class="token class-name">Manifest</span><span class="token punctuation">.</span>permission<span class="token punctuation">.</span><span class="token constant">ACCESS_COARSE_LOCATION</span><span class="token punctuation">,</span>
                  <span class="token class-name">Manifest</span><span class="token punctuation">.</span>permission<span class="token punctuation">.</span><span class="token constant">ACCESS_FINE_LOCATION</span>
          <span class="token punctuation">}</span><span class="token punctuation">;</span>

      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          requestPermissions <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span>
                  <span class="token class-name">Manifest</span><span class="token punctuation">.</span>permission<span class="token punctuation">.</span><span class="token constant">ACCESS_COARSE_LOCATION</span><span class="token punctuation">,</span>
                  <span class="token class-name">Manifest</span><span class="token punctuation">.</span>permission<span class="token punctuation">.</span><span class="token constant">ACCESS_FINE_LOCATION</span>
          <span class="token punctuation">}</span><span class="token punctuation">;</span>

      <span class="token punctuation">}</span>
      <span class="token class-name">ActivityCompat</span><span class="token punctuation">.</span><span class="token function">requestPermissions</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>
              requestPermissions<span class="token punctuation">,</span> <span class="token constant">PERMISSION_CODE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><ol start="2"><li><p>由于设备的连接过程是放在Service中，所以建议在app启动后调用以下方法开启服务，否者连接功能将不能使用。具体如下：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/*
 * mtCentralManager:MTCentralManager实例
 */</span>
<span class="token class-name">MTCentralManager</span> mtCentralManager <span class="token operator">=</span> <span class="token class-name">MTCentralManager</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mtCentralManager<span class="token punctuation">.</span><span class="token function">startService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//断开服务</span>
mtCentralManager<span class="token punctuation">.</span><span class="token function">stopService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li></ol> <h2 id="文档版本记录"><a href="#文档版本记录" class="header-anchor">#</a> 文档版本记录</h2> <ul><li>2025.04.09  v1.22.3  新增医疗高温资产标签</li> <li>2025.03.07  v1.21.2  新增修改设备名称功能</li> <li>2024.01.16  v1.20.7  添加清理缓存方法说明，修正一些方法的使用以及说明</li> <li>2024.01.02  v1.20.6  添加设置基础参数广播和触发器广播开关的注释，增加 TriggerType 类型，增加设备和帧的最新更新时间获取方式说明</li> <li>2022.05.23  v1.16.0  新增 GInfo 广播帧的解析和参数修改，特殊的帧数据：支持蓝牙 5.0 125 kbps 速率，支持 ACC 帧的参数修改 ，新增广播帧 InfoFrame</li> <li>2022.02.23  v1.15.1  新增防拆帧 TamperProofFrame ，修复优化 SDK 无法连接设备问题</li> <li>2021.04.28  v1.11.1  新增振动传感器</li> <li>2021.04.21  v1.11.0  新增六轴/磁力计/大气压力传感器</li> <li>2020.10.27  v1.10.2  每个广播帧新增 lastUpdate 属性</li> <li>2020.03.25  v1.10  添加支持 LineBeacon 帧的信息展示和数据设置</li> <li>2019.12.04  v1.3  修改 Android 9.0 中部分手机在息屏状态下无法扫描的问题，增加过滤条件</li> <li>2019.07.11  v1.2  第三版，更改 powerOff 使用</li> <li>2019.01.09  v1.1  第二版</li> <li>2017.10.13  v1.0  初版</li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新::</span> <span class="time">2025/4/24 10:18:14</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.34ff7344.js" defer></script><script src="/assets/js/2.31f2ce87.js" defer></script><script src="/assets/js/1.a9521bca.js" defer></script><script src="/assets/js/29.32b8b022.js" defer></script>
  </body>
</html>
