(window.webpackJsonp=window.webpackJsonp||[]).push([[86],{410:function(a,n,t){"use strict";t.r(n);var s=t(14),e=Object(s.a)({},(function(){var a=this,n=a._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[n("h1",{attrs:{id:"minewbeacon-android开发套件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#minewbeacon-android开发套件"}},[a._v("#")]),a._v(" MinewBeacon Android开发套件")]),a._v(" "),n("h1",{attrs:{id:"新建工程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#新建工程"}},[a._v("#")]),a._v(" 新建工程")]),a._v(" "),n("p",[a._v("Android Studio配置")]),a._v(" "),n("p",[a._v("targetSdkVersion版本选择 21\n将minewBeaconScan.jar包放入道libs文件夹下,然后在当前工程下的build.gradle文件配置项中的dependencies新增内容,如下compile files('libs/minewBeaconScan.jar')")]),a._v(" "),n("p",[a._v("Eclipse配置")]),a._v(" "),n("p",[a._v("targetSdkVersion版本选择 21\n将scanBeacon.jar包放入道libs文件夹下,右击工程propeties,选择Java build Path，在Library选项中添加minewBeaconScan依赖关系")]),a._v(" "),n("p",[a._v("targetSdkVersion版本大于等于23时，需要动态申请权限")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v('<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>\n<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>\n')])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br")])]),n("p",[a._v("当前SDK需要的权限：\n​\t"),n("uses-permission",{attrs:{"android:name":"android.permission.BLUETOOTH"}}),a._v("\n​\t"),n("uses-permission",{attrs:{"android:name":"android.permission.BLUETOOTH_ADMIN"}}),a._v("\n​\t"),n("uses-feature",{attrs:{"android:name":"android.hardware.bluetooth_le","android:required":"true"}}),a._v("\n添加service和receiver,如下\n​\t"),n("service",{attrs:{"android:name":"com.minew.beacon.ScanService"}}),a._v("\n​\t"),n("receiver",{attrs:{"android:name":"com.minew.beacon.BluetoothChangedReceiver"}},[a._v("\n​\t        "),n("intent-filter",[a._v("\n​\t            "),n("action",{attrs:{"android:name":"android.bluetooth.adapter.action.STATE_CHANGED"}}),a._v("\n​\t        ")],1),a._v("\n​\t")],1),a._v("\n具体实现细节，请参考demo。")],1),a._v(" "),n("h2",{attrs:{id:"开始使用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#开始使用"}},[a._v("#")]),a._v(" 开始使用")]),a._v(" "),n("p",[a._v("MinewBeaconManager（以下简称Manager）类用来发起和停止扫描周边的蓝牙设备，它将为每一个蓝牙设备生成一个对应的Minewbeacon（以下简称Beacon）实例。当Manager扫描到蓝牙设备时，它会持续监听蓝牙设备的数据更新以及这些设备的进出状态（十秒内没有数据更新的设备被认为是消失设备，第一次扫描到或者消失后再次扫描到的设备被认为是出现设备），同时，Manager类还可以监听蓝牙状态的改变并且回调给对应的代理实例。以下是相关代码。")]),a._v(" "),n("p",[a._v("1.获取设备实例，配置回调监听:")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("MinewBeaconManager mMinewBeaconManager = MinewBeaconManager.getInstance(this);\nmMinewBeaconManager.setDeviceManagerDelegateListener(new MinewBeaconManagerListener() {})；\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br")])]),n("p",[a._v("2.扫描设备")]),a._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[a._v("mMinewBeaconManager"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("startScan")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br")])]),n("p",[a._v("3.通过回调获取设备数据更新")]),a._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 获取持续的设备数据更新，此方法每1秒回调一次，当且仅当扫描到设备时才会回调。")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("void")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("onRangeBeacons")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("final")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("List")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("MinewBeacon")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v(" minewBeacons"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br")])]),n("p",[a._v("4.获取beacon实例的数据")]),a._v(" "),n("p",[a._v("通过-MinewBeacon.getBeaconValue:(BeaconValueIndex)index方法来获取设备数据，为了数据通用性，我们使用了MinewBeaconValue类（以下简称value）来统一所有的数据类型，value可以对应字符串、整型、浮点型、布尔型数据。每一个index对应一个值，如下示例：")]),a._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[a._v("在列表中通过"),n("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Beacon")]),a._v("集合展示数据\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 获取uuid")]),a._v("\nmMinewBeacon"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("getBeaconValue")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("BeaconValueIndex"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("MinewBeaconValueIndex_UUID")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("getStringValue")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 获取major")]),a._v("\nmMinewBeacon"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("getBeaconValue")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("BeaconValueIndex"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("MinewBeaconValueIndex_Major")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("getStringValue")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 获取minor")]),a._v("\nmMinewBeacon"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("getBeaconValue")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("BeaconValueIndex"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("MinewBeaconValueIndex_Minor")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("getStringValue")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br"),n("span",{staticClass:"line-number"},[a._v("8")]),n("br")])]),n("p",[a._v("附表：ValueIndex以及对应数据类型")]),a._v(" "),n("table",[n("thead",[n("tr",[n("th",[a._v("index")]),a._v(" "),n("th",[a._v("数据名")]),a._v(" "),n("th",[a._v("类型")]),a._v(" "),n("th",[a._v("备注")])])]),a._v(" "),n("tbody",[n("tr",[n("td",[a._v("BeaconValueIndex_UUID")]),a._v(" "),n("td",[a._v("uuid")]),a._v(" "),n("td",[a._v("stringValue")]),a._v(" "),n("td")]),a._v(" "),n("tr",[n("td",[a._v("BeaconValueIndex_Name")]),a._v(" "),n("td",[a._v("设备名")]),a._v(" "),n("td",[a._v("stringValue")]),a._v(" "),n("td")]),a._v(" "),n("tr",[n("td",[a._v("BeaconValueIndex_Major")]),a._v(" "),n("td",[a._v("major")]),a._v(" "),n("td",[a._v("intValue")]),a._v(" "),n("td")]),a._v(" "),n("tr",[n("td",[a._v("BeaconValueIndex_Minor")]),a._v(" "),n("td",[a._v("minor")]),a._v(" "),n("td",[a._v("intValue")]),a._v(" "),n("td")]),a._v(" "),n("tr",[n("td",[a._v("BeaconValueIndex_WechatId")]),a._v(" "),n("td",[a._v("微信设备id")]),a._v(" "),n("td",[a._v("intValue")]),a._v(" "),n("td",[a._v("部分支持")])]),a._v(" "),n("tr",[n("td",[a._v("BeaconValueIndex_Mac")]),a._v(" "),n("td",[a._v("mac地址")]),a._v(" "),n("td",[a._v("stringValue")]),a._v(" "),n("td",[a._v("部分支持")])]),a._v(" "),n("tr",[n("td",[a._v("BeaconValueIndex_RSSI")]),a._v(" "),n("td",[a._v("rssi")]),a._v(" "),n("td",[a._v("intValue")]),a._v(" "),n("td")]),a._v(" "),n("tr",[n("td",[a._v("BeaconValueIndex_BatteryLevel")]),a._v(" "),n("td",[a._v("电池电量")]),a._v(" "),n("td",[a._v("intValue")]),a._v(" "),n("td")]),a._v(" "),n("tr",[n("td",[a._v("BeaconValueIndex_Temperature")]),a._v(" "),n("td",[a._v("温度")]),a._v(" "),n("td",[a._v("floatValue")]),a._v(" "),n("td",[a._v("部分支持")])]),a._v(" "),n("tr",[n("td",[a._v("BeaconValueIndex_Humidity")]),a._v(" "),n("td",[a._v("湿度")]),a._v(" "),n("td",[a._v("floatValue")]),a._v(" "),n("td",[a._v("部分支持")])]),a._v(" "),n("tr",[n("td",[a._v("BeaconValueIndex_Txpower")]),a._v(" "),n("td",[a._v("txPower")]),a._v(" "),n("td",[a._v("intValue")]),a._v(" "),n("td")]),a._v(" "),n("tr",[n("td",[a._v("BeaconValueIndex_InRange")]),a._v(" "),n("td",[a._v("是否在范围内")]),a._v(" "),n("td",[a._v("boolValue")]),a._v(" "),n("td")]),a._v(" "),n("tr",[n("td",[a._v("BeaconValueIndex_Connectable")]),a._v(" "),n("td",[a._v("是否可连接")]),a._v(" "),n("td",[a._v("boolValue")]),a._v(" "),n("td")])])]),a._v(" "),n("p",[a._v("你只需要按照对应的index来获取想要的数据就可以了。")]),a._v(" "),n("p",[a._v("至此，就完成了SDK的基础使用，如果需要更多支持可以参照如下示例：")]),a._v(" "),n("p",[a._v("监听设备的进出状态：")]),a._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 如果设备8秒内没有数据更新，此设备被认为是已经消失，消失的设备将会在此回调，此方法每5秒一个周期，")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("void")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("onDisappearBeacons")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("List")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("MinewBeacon")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v(" minewBeacons"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("MinewBeacon")]),a._v(" minewBeacon "),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" minewBeacons"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n                    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("String")]),a._v(" deviceName "),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" minewBeacon"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("getBeaconValue")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("BeaconValueIndex"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("MinewBeaconValueIndex_Name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("getStringValue")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n                    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Toast")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("makeText")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("getApplicationContext")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" deviceName "),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("+")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[a._v('"  out range"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Toast")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[a._v("LENGTH_SHORT")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("show")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 第一次被扫描到的或者消失后重新被扫描到的设备被认为是新出现设备，新出现的设备将会在此回调，此方法每3秒一个周期。")]),a._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("void")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("onAppearBeacons")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("List")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("MinewBeacon")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v(" minewBeacons"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br"),n("span",{staticClass:"line-number"},[a._v("8")]),n("br"),n("span",{staticClass:"line-number"},[a._v("9")]),n("br"),n("span",{staticClass:"line-number"},[a._v("10")]),n("br"),n("span",{staticClass:"line-number"},[a._v("11")]),n("br"),n("span",{staticClass:"line-number"},[a._v("12")]),n("br"),n("span",{staticClass:"line-number"},[a._v("13")]),n("br")])]),n("p",[a._v("监听蓝牙模块状态更新")]),a._v(" "),n("p",[a._v("蓝牙状态一共有三种：")]),a._v(" "),n("p",[a._v("BluetoothState：BluetoothStatePowerOn（蓝牙开启），BluetoothStatePowerOff（蓝牙关闭），BluetoothStateNotSupport（蓝牙不支持ble）")]),a._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 因用户或者系统改变的蓝牙开关，都能在以下方法监听到：")]),a._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("void")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("onUpdateBluetoothState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("BluetoothState")]),a._v(" state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br")])]),n("p",[a._v("当然，你也可以手动检查蓝牙状态：")]),a._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("BluetoothState")]),a._v(" bluetoothState "),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" mMinewDeviceManager"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("checkBluetoothState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("switch")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("bluetoothState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("case")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("BluetoothStateNotSupported")]),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("\n                "),n("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Toast")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("makeText")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Not Support BLE"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Toast")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[a._v("LENGTH_SHORT")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("show")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n                "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("finish")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("break")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("case")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("BluetoothStatePowerOff")]),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("\n                "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("showBLEDialog")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("break")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("case")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("BluetoothStatePowerOn")]),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("break")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br"),n("span",{staticClass:"line-number"},[a._v("8")]),n("br"),n("span",{staticClass:"line-number"},[a._v("9")]),n("br"),n("span",{staticClass:"line-number"},[a._v("10")]),n("br"),n("span",{staticClass:"line-number"},[a._v("11")]),n("br"),n("span",{staticClass:"line-number"},[a._v("12")]),n("br")])]),n("h2",{attrs:{id:"类说明"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#类说明"}},[a._v("#")]),a._v(" 类说明")]),a._v(" "),n("h3",{attrs:{id:"minewbeacon"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#minewbeacon"}},[a._v("#")]),a._v(" MinewBeacon")]),a._v(" "),n("p",[a._v("设备类，每一个设备对应一个此类实例，此类仅有一个方法，通过对应的Index来获取设备的信息：")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("public MinewBeaconValue getBeaconValue(NS_ENUM ns_enum);\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br")])]),n("p",[a._v("例如获取某个设备实例的UUID：")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("aBeacon getBeaconValue(NS_ENUM.MinewBeaconValueIndex_UUID).getStringValue;\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br")])]),n("p",[a._v("// 这里是设备数据的对应枚举；\n// !!!:必须按照每个设备的数据类型来获取数据。")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("public enum BeaconValueIndex {\n\n  MinewBeaconValueIndex_UUID,  // UUID\n\n  MinewBeaconValueIndex_Major,   // major\n\n  MinewBeaconValueIndex_Minor,   // minor\n\n  MinewBeaconValueIndex_Name,   // 设备名称\n\n  MinewBeaconValueIndex_RSSI,   // RSSI\n\n  MinewBeaconValueIndex_BatteryLevel,  // 电池电量\n\n  //MinewBeaconValueIndex_Temperature,  // 温度 暂不提供数据\n\n//MinewBeaconValueIndex_Humidity,   // 湿度 暂不提供数据\n\n  MinewBeaconValueIndex_TxPower,  // TxPower\n\n  MinewBeaconValueIndex_InRage  // 是否在范围内\n\n}\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br"),n("span",{staticClass:"line-number"},[a._v("8")]),n("br"),n("span",{staticClass:"line-number"},[a._v("9")]),n("br"),n("span",{staticClass:"line-number"},[a._v("10")]),n("br"),n("span",{staticClass:"line-number"},[a._v("11")]),n("br"),n("span",{staticClass:"line-number"},[a._v("12")]),n("br"),n("span",{staticClass:"line-number"},[a._v("13")]),n("br"),n("span",{staticClass:"line-number"},[a._v("14")]),n("br"),n("span",{staticClass:"line-number"},[a._v("15")]),n("br"),n("span",{staticClass:"line-number"},[a._v("16")]),n("br"),n("span",{staticClass:"line-number"},[a._v("17")]),n("br"),n("span",{staticClass:"line-number"},[a._v("18")]),n("br"),n("span",{staticClass:"line-number"},[a._v("19")]),n("br"),n("span",{staticClass:"line-number"},[a._v("20")]),n("br"),n("span",{staticClass:"line-number"},[a._v("21")]),n("br"),n("span",{staticClass:"line-number"},[a._v("22")]),n("br"),n("span",{staticClass:"line-number"},[a._v("23")]),n("br")])]),n("h3",{attrs:{id:"minewbeaconvalue"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#minewbeaconvalue"}},[a._v("#")]),a._v(" MinewBeaconValue")]),a._v(" "),n("p",[a._v("设备数据类：MinewBeaconValue，从设备获取的所有数据均得到此类实例，请严格按照对应数据类型获取数据\n​\t//  获取整形数据\n​\tprivate int intValue;\n​\t\n// 获取浮点型数据\nprivate float floatValue;")]),a._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[a._v("// 获取字符串型数据\nprivate String stringValue;\n\n//获取boolean型数据\nprivate boolean bool;\n\n// 获取16进制data型数据\nprivate byte[] dataValue;\n")])])]),n("h3",{attrs:{id:"蓝牙状态枚举类"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#蓝牙状态枚举类"}},[a._v("#")]),a._v(" 蓝牙状态枚举类：")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("public enum  BluetoothState {\n    BluetoothStatePowerOn, //蓝牙已开启\n\n    BluetoothStatePowerOff, //蓝牙已关闭\n\n    BluetoothStateNotSupported,//不支持蓝牙4.0\n}\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br")])]),n("h2",{attrs:{id:"minewbeaconmanagerlistener"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#minewbeaconmanagerlistener"}},[a._v("#")]),a._v(" MinewBeaconManagerListener")]),a._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[a._v("设备管理类回调接口。\n// 发现了新的设备，该函数每3秒回调一次\nvoid onAppearBeacons(List<MinewBeacon> minewBeacons);\n\n// 设备消失的情况下，每秒钟回调一次。\nvoid onDisappearBeacons(List<MinewBeacon> minewBeacons);\n\n//定期回调数据更新函数，每秒钟回调一次\nvoid onRangeBeacons(List<MinewBeacon> minewBeacons);\n\n// 蓝牙状态更新\nvoid onUpdateState(BluetoothState state);\n")])])]),n("h2",{attrs:{id:"minewbeaconmanager"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#minewbeaconmanager"}},[a._v("#")]),a._v(" MinewBeaconManager")]),a._v(" "),n("p",[a._v("设备管理类，用来扫描设备以及更新设备状态等。\n// 设备管理类代理\n​\tpublic void setDeviceManagerDelegateListener(MinewBeaconManagerListener minewBeaconManagerListener) {\n​\t}\n// 单例")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("public static MinewBeaconManager getInstance(Context context) {}\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br")])]),n("p",[a._v("// 获取蓝牙状态")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("public BluetoothState checkBluetoothState() {}\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br")])]),n("p",[a._v("// 开始扫描设备")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("public void startScan() throws Exception {}\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br")])]),n("p",[a._v("// 停止扫描设备")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("public void stopScan() {}\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br")])]),n("p",[a._v("// 扫描到的所有设备")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("public static List<MinewBeacon> scannedBeacons;\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br")])]),n("p",[a._v("// 当前在范围内的设备")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("public static List<MinewBeacon> inRangeBeacons;\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br")])]),n("h2",{attrs:{id:"更新内容"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#更新内容"}},[a._v("#")]),a._v(" 更新内容")]),a._v(" "),n("h4",{attrs:{id:"_2019-07-17"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2019-07-17"}},[a._v("#")]),a._v(" 2019.07.17")]),a._v(" "),n("p",[a._v('修复了"java.lang.NegativeArraySizeException"的异常；')]),a._v(" "),n("h4",{attrs:{id:"_2018-11-20"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2018-11-20"}},[a._v("#")]),a._v(" 2018.11.20")]),a._v(" "),n("p",[a._v("修复扫描时异常；")]),a._v(" "),n("h4",{attrs:{id:"_2016-11-29"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2016-11-29"}},[a._v("#")]),a._v(" 2016.11.29")]),a._v(" "),n("p",[a._v("添加对温湿度传感器数据的支持；")])])}),[],!1,null,null,null);n.default=e.exports}}]);