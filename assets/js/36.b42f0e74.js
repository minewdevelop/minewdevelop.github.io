(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{331:function(s,t,a){s.exports=a.p+"assets/img/design.ac742719.png"},332:function(s,t){s.exports="data:image/png;base64,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"},420:function(s,t,a){"use strict";a.r(t);var n=a(14),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"minewmodulekit说明文档"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#minewmodulekit说明文档"}},[s._v("#")]),s._v(" MinewModuleKit说明文档")]),s._v(" "),t("p",[s._v("本套SDK仅支持Minew公司出品的蓝牙模块设备。通过SDK可以帮助开发者处理手机和蓝牙模块之间的一切工作，包括：扫描设备，连接设备，向设备写入数据，从设备接收数据等。")]),s._v(" "),t("h2",{attrs:{id:"架构"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#架构"}},[s._v("#")]),s._v(" 架构")]),s._v(" "),t("p",[s._v("整体框架如下图所示：MTModuleManager为设备管理类，在APP运行时始终是单例。MTModule是设备实例类，此套件会为每一个设备生成一个MTModule实例以便于对监听设备和操作设备。")]),s._v(" "),t("p",[s._v("整体设计思路如下图所示：")]),s._v(" "),t("p",[t("img",{attrs:{src:a(331),alt:"设计说明"}})]),s._v(" "),t("p",[s._v("MTModuleManager：设备管理类，可以扫描周围的Module设备，并且可以连接它们，校验它们等。")]),s._v(" "),t("p",[s._v("MTModule：设备实例类，当Manager发现一个物理设备时，Manager会生成一个Module实例，这个实例就对应一个物理设备。")]),s._v(" "),t("h2",{attrs:{id:"准备工作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#准备工作"}},[s._v("#")]),s._v(" 准备工作")]),s._v(" "),t("h3",{attrs:{id:"开发环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#开发环境"}},[s._v("#")]),s._v(" 开发环境：")]),s._v(" "),t("ul",[t("li",[s._v("Android Studio")])]),s._v(" "),t("h3",{attrs:{id:"导入到工程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#导入到工程"}},[s._v("#")]),s._v(" 导入到工程：")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("将开发套件的MTModuleKit.jar文件拷贝到libs目录下，然后在对应模块的build.gradle文件中添加依赖。如下图所示：")]),s._v(" "),t("p",[t("img",{attrs:{src:a(332),alt:"添加framework"}})])]),s._v(" "),t("li",[t("p",[s._v("AndroidManifest.xml 文件下添加蓝牙权限和相应的组件注册。如下所示：")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[s._v("    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("uses")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("permission android"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"android.permission.ACCESS_COARSE_LOCATION"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("uses")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("permission android"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"android.permission.ACCESS_FINE_LOCATION"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("uses")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("permission android"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"android.permission.BLUETOOTH"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("uses")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("permission android"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"android.permission.BLUETOOTH_ADMIN"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("uses")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("permission android"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"android.permission.READ_PHONE_STATE"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("在Android-6.0以上版本蓝牙扫描需要动态申请地理位置权限，具体如下：")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ContextCompat")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("checkSelfPermission")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Manifest")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("permission"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ACCESS_COARSE_LOCATION")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("PackageManager")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PERMISSION_GRANTED")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ActivityCompat")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("requestPermissions")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Manifest")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("permission"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ACCESS_COARSE_LOCATION")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PERMISSION_COARSE_LOCATION")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])])])]),s._v(" "),t("h2",{attrs:{id:"开始开发"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#开始开发"}},[s._v("#")]),s._v(" 开始开发")]),s._v(" "),t("h3",{attrs:{id:"扫描设备"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#扫描设备"}},[s._v("#")]),s._v(" 扫描设备")]),s._v(" "),t("p",[s._v("首先需要获取到MTModuleManager的单例，然后检查手机当前的蓝牙状态，接着就可以进行设备扫描了。")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 获取Manager单例，并传入context对象")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MTModuleManager")]),s._v(" mMTModuleManager"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MTModuleManager")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getInstance")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("context"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//获取手机当前蓝牙开关状态")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("BluetoothState")]),s._v(" bluetoothState "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MTModuleManager")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getInstance")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("checkBluetoothState")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//根据状态进行响应")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("switch")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("bluetoothState"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("case")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("BluetoothStateNotSupported")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//不支持蓝牙")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("break")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("case")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("BluetoothStatePowerOff")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//蓝牙关闭状态")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("break")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("case")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("BluetoothStatePowerOn")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n            \t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//蓝牙开启状态，可进行扫描设备")]),s._v("\n            \t"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MTModuleManager")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getInstance")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getContext")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("startScan")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("mScanMTModuleCallback"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("break")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br")])]),t("h4",{attrs:{id:"新增扫描方法-20200408"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#新增扫描方法-20200408"}},[s._v("#")]),s._v(" 新增扫描方法(20200408)")]),s._v(" "),t("p",[s._v("开放系统扫描的过滤条件以及扫描的设置属性配置，属于高级操作，"),t("strong",[s._v("不建议随意使用")]),s._v("，如下")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[s._v("    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Build")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("VERSION")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SDK_INT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Build")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("VERSION_CODES")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("LOLLIPOP")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ScanSettings")]),s._v(" scanSettings "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ScanSettings"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Builder")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setScanMode")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ScanSettings")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SCAN_MODE_LOW_LATENCY")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setReportDelay")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("build")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ArrayList")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ScanFilter")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" list "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ArrayList")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        list"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ScanFilter"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Builder")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setServiceUuid")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ParcelUuid")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("fromString")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0000ffe1-0000-1000-8000-00805f9b34fb"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("build")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        list"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ScanFilter"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Builder")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setManufacturerData")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0x004c")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("byte")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("build")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        mtModuleManager"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("startScan")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("scanMTModuleCallback"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" list"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" scanSettings"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("p",[t("strong",[s._v("PS: 只有手机蓝牙状态处于Power on时，整个SDK才能够正常工作。")])]),s._v(" "),t("h3",{attrs:{id:"连接到设备"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#连接到设备"}},[s._v("#")]),s._v(" 连接到设备")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 从上一步能够获取到扫描到的设备")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MTModule")]),s._v(" mtModule "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" mtModules"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("position"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 监听设备连接状态。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ！！！只有在连接状态为Connected的时候，这个设备才是可以写入数据的")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MTModuleManager")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getInstance")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getContext")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setModuleChangeConnection")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ModuleChangeConnection")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n       "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n       "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("onDeviceChangeStatus")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MTModule")]),s._v(" device"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ConnectionState")]),s._v(" status"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n           "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("switch")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("status"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n               "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("case")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("DeviceLinkStatus_Connected")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n                   "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("break")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n               "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("case")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("DeviceLinkStatus_ConnectFailed")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n               "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("case")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("DeviceLinkStatus_Disconnect")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n                   "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("break")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n           "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n       "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 连接到一个模块设备")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MTModuleManager")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getInstance")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getContext")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("connect")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("mtModule"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br")])]),t("h3",{attrs:{id:"向设备写入数据"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#向设备写入数据"}},[s._v("#")]),s._v(" 向设备写入数据")]),s._v(" "),t("p",[s._v("接上一步，当手机成功与某个设备建立连接后，就可以对设备进行读写操作了。")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 对设备写入数据")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 首先要构造你想写入的数据,这里构造了一组四个字节的数据 0x01,0x02,0x03,0x04.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("byte")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" bytes "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0x01")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0x02")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0x03")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0x04")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 然后可以直接执行一下方法，将上述构造的数据写入到设备中。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 同时你可以在WriteCallback回调中获取到写入是否成功的结果。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("module")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("writeData")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("bytes"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("WriteCallback")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("write")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" success"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ModuleException")]),s._v(" exception"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("success"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//写入成功")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//写入失败")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br")])]),t("h3",{attrs:{id:"从设备接收数据"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#从设备接收数据"}},[s._v("#")]),s._v(" 从设备接收数据")]),s._v(" "),t("p",[s._v("由于手机并不知道什么时候设备会发送数据过来，所以在这里使用回调接口的方式来实现数据接收。")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 配置MTModuleListener回调接口等待接收数据")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("module")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setMTModuleListener")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MTModuleListener")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("didReceiveData")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("byte")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" bytes"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h3",{attrs:{id:"从设备读取系统信息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#从设备读取系统信息"}},[s._v("#")]),s._v(" 从设备读取系统信息")]),s._v(" "),t("p",[s._v("如果固件带有系统信息，可进行获取，方法如下")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 获取设备对应的系统信息")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HashMap")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" systemInfos "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" mMTModule"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getSystemInfos")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nsystemInfos"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Constants")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MANUFACTURER")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nsystemInfos"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Constants")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MODLENUMBER")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nsystemInfos"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Constants")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SOFTWARE_VERSION")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nsystemInfos"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Constants")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("HARDWARE_VERSION")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nsystemInfos"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Constants")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("FIRMWARE_VERSION")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nsystemInfos"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Constants")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SERIALNUMBER")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[s._v("系统信息由固件版本控制，支持的固件版本分别为：")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("固件版本(Verison)")]),s._v(" "),t("th",[s._v("是否支持")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("Version < 1.6.0")]),s._v(" "),t("td",[s._v("否")])]),s._v(" "),t("tr",[t("td",[s._v("1.6.0 <= Version < 2.0.0")]),s._v(" "),t("td",[s._v("是")])]),s._v(" "),t("tr",[t("td",[s._v("2.0.0 <= Version < 2.3.0")]),s._v(" "),t("td",[s._v("否")])]),s._v(" "),t("tr",[t("td",[s._v("2.3.0 <= Version < 3.0.0")]),s._v(" "),t("td",[s._v("是")])]),s._v(" "),t("tr",[t("td",[s._v("3.0.0 <= Version < 3.1.0")]),s._v(" "),t("td",[s._v("否")])]),s._v(" "),t("tr",[t("td",[s._v("3.1.0 <= Version")]),s._v(" "),t("td",[s._v("是")])])])]),s._v(" "),t("h2",{attrs:{id:"附表"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#附表"}},[s._v("#")]),s._v(" 附表")]),s._v(" "),t("h3",{attrs:{id:"mtmodulemanager-属性说明"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mtmodulemanager-属性说明"}},[s._v("#")]),s._v(" MTModuleManager 属性说明")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("名称")]),s._v(" "),t("th",[s._v("类型")]),s._v(" "),t("th",[s._v("备注")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("mBluetoothState")]),s._v(" "),t("td",[s._v("BluetoothState")]),s._v(" "),t("td",[s._v("当前的手机蓝牙状态")])]),s._v(" "),t("tr",[t("td",[s._v("scannedModules")]),s._v(" "),t("td",[s._v("LinkedList")]),s._v(" "),t("td",[s._v("扫描到的设备")])]),s._v(" "),t("tr",[t("td",[s._v("connectedModules")]),s._v(" "),t("td",[s._v("HashMap")]),s._v(" "),t("td",[s._v("当前连接中的设备")])])])]),s._v(" "),t("h3",{attrs:{id:"mtmodule"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mtmodule"}},[s._v("#")]),s._v(" MTModule")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("名称")]),s._v(" "),t("th",[s._v("类型")]),s._v(" "),t("th",[s._v("备注")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("name")]),s._v(" "),t("td",[s._v("String")]),s._v(" "),t("td",[s._v("设备的蓝牙名称")])]),s._v(" "),t("tr",[t("td",[s._v("macAddress")]),s._v(" "),t("td",[s._v("String")]),s._v(" "),t("td",[s._v("设备的mac地址")])]),s._v(" "),t("tr",[t("td",[s._v("advertisingData")]),s._v(" "),t("td",[s._v("byte[]")]),s._v(" "),t("td",[s._v("设备的广播数据")])]),s._v(" "),t("tr",[t("td",[s._v("lastUpdate")]),s._v(" "),t("td",[s._v("long")]),s._v(" "),t("td",[s._v("设备最后一次被扫描到的时间戳")])]),s._v(" "),t("tr",[t("td",[s._v("connection")]),s._v(" "),t("td",[s._v("ConnectionState")]),s._v(" "),t("td",[s._v("设备的连接状态")])]),s._v(" "),t("tr",[t("td",[s._v("rssi")]),s._v(" "),t("td",[s._v("int")]),s._v(" "),t("td",[s._v("设备的RSSI")])])])]),s._v(" "),t("h2",{attrs:{id:"文档版本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#文档版本"}},[s._v("#")]),s._v(" 文档版本：")]),s._v(" "),t("ul",[t("li",[s._v("20200408   新增扫描方法；")]),s._v(" "),t("li",[s._v("20190905   注释log日志；")]),s._v(" "),t("li",[s._v("20180830   新增获取系统信息；")]),s._v(" "),t("li",[s._v("20180614   初版；")])])])}),[],!1,null,null,null);t.default=e.exports}}]);