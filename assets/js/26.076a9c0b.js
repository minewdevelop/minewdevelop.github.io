(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{342:function(t,s,a){t.exports=a.p+"assets/img/design.ac742719.png"},343:function(t,s,a){t.exports=a.p+"assets/img/addframework.afaca928.png"},344:function(t,s,a){t.exports=a.p+"assets/img/frameworkadded.f41a4903.png"},345:function(t,s,a){t.exports=a.p+"assets/img/bluetoothdescription.7ceeb2e7.png"},463:function(t,s,a){"use strict";a.r(s);var n=a(14),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"minewmodulekit说明文档"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#minewmodulekit说明文档"}},[t._v("#")]),t._v(" MinewModuleKit说明文档")]),t._v(" "),s("p",[t._v("本套SDK仅支持Minew公司出品的蓝牙模块设备。通过SDK可以帮助开发者处理手机和蓝牙模块之间的一切工作，包括：扫描设备，连接设备，向设备写入数据，从设备接收数据等。")]),t._v(" "),s("h3",{attrs:{id:"前期工作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前期工作"}},[t._v("#")]),t._v(" 前期工作")]),t._v(" "),s("p",[t._v("整体框架如下图所示：MTModuleManager为设备管理类，在APP运行时始终是单例。MTModule是设备实例类，此套件会为每一个设备生成一个MTModule实例以便于对监听设备和操作设备。")]),t._v(" "),s("p",[t._v("整体设计思路如下图所示：")]),t._v(" "),s("p",[s("img",{attrs:{src:a(342),alt:"设计说明"}})]),t._v(" "),s("p",[t._v("*MTModuleManager：*设备管理类，可以扫描周围的Module设备，并且可以连接它们，校验它们等。")]),t._v(" "),s("p",[t._v("MTModule：设备实例类，当Manager发现一个物理设备时，Manager会生成一个Module实例，这个实例就对应一个物理设备。")]),t._v(" "),s("h3",{attrs:{id:"开始上手"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开始上手"}},[t._v("#")]),t._v(" 开始上手")]),t._v(" "),s("h4",{attrs:{id:"开发环境"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开发环境"}},[t._v("#")]),t._v(" 开发环境：")]),t._v(" "),s("ul",[s("li",[t._v("Xcode9+，当前SDK使用Xcode9编译，请使用Xcode9及以上版本进行开发；")]),t._v(" "),s("li",[t._v("iOS8，限制最低系统版本为iOS8；")])]),t._v(" "),s("h4",{attrs:{id:"导入到工程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#导入到工程"}},[t._v("#")]),t._v(" 导入到工程：")]),t._v(" "),s("h5",{attrs:{id:"cocoapods"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cocoapods"}},[t._v("#")]),t._v(" CocoaPods")]),t._v(" "),s("p",[t._v("MTModuleKit可通过"),s("a",{attrs:{href:"http://cocoapods.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("CocoaPods获得"),s("OutboundLink")],1),t._v("。要安装它，只需将以下行添加到您的Podfile中，然后导入 <MTModuleKit/MTModuleKit.h>：")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("pod 'MTModuleKit'\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h5",{attrs:{id:"手动导入"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#手动导入"}},[t._v("#")]),t._v(" 手动导入")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("将开发套件的framework文件：MTModuleKit.framework拷贝到项目工程目录下，然后添加到工程中，target为当前的工程，然后点“Add”，如下图所示：")]),t._v(" "),s("p",[s("img",{attrs:{src:a(343),alt:"添加framework"}})]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v("依次找到：“Target” -> General -> Embedded Binaries，点击下面的“+”，继续点击“Add Other”将MTTrackit.framework文件添加进来。同样的，也需要添加到 ”Linked Frameworks and Libraries“，添加完应该如下图：")])])])]),t._v(" "),s("p",[s("img",{attrs:{src:a(344),alt:"frameworkadded"}})]),t._v(" "),s("ol",{attrs:{start:"3"}},[s("li",[s("p",[t._v("*如果使用Swift开发，需要添加一个Objective C BridgingHeader .h文件（此处不再赘述），并且在此文件添加：import ，如果使用Objective C进行开发，在需要的文件的顶端添加：import")])]),t._v(" "),s("li",[s("p",[t._v('!!!在iOS10及以上版本，苹果对蓝牙APi添加了权限限制，你需要在工程的info.plist文件里添加一项字符串：Privacy - Bluetooth Peripheral Usage Description - "你的使用描述"。如下图所示：')])])]),t._v(" "),s("p",[s("img",{attrs:{src:a(345),alt:"bluetoothdescription"}})]),t._v(" "),s("ol",{attrs:{start:"5"}},[s("li",[t._v('!!!在iOS13及以上版本，苹果对蓝牙APi添加了权限限制，你需要在工程的info.plist文件里添加一项字符串：Privacy - Bluetooth Always Usage Description - "你的使用描述"。')])]),t._v(" "),s("h4",{attrs:{id:"开始开发"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开始开发"}},[t._v("#")]),t._v(" 开始开发")]),t._v(" "),s("h5",{attrs:{id:"初始化及扫描设备"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#初始化及扫描设备"}},[t._v("#")]),t._v(" 初始化及扫描设备")]),t._v(" "),s("p",[t._v("首先需要获取到MTModuleManager的单例，此时，SDK将会调用系统蓝牙模组并进行核心初始化，需要注意的是，唤醒系统的蓝牙模组需要一定的时间，如果一切正常，唤醒后蓝牙工作状态为Poweron，需要注意的是，所有的操作都必须且只能在Poweron状态下进行。监听系统蓝牙变化及扫描设备请参考下述代码：")]),t._v(" "),s("div",{staticClass:"language-objc line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-objc"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取Manager单例")]),t._v("\nMTModuleManager "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("manager "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("MTModuleManager sharedInstance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如果你需要对手机的蓝牙状态作出响应。请监听回调。")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("manager didChangesBluetoothStatus"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("BluetoothStatus status"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("switch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("status"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" Poweron"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// !!! SDK只能工作在Poweron状态下")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("NSLog")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('@"bluetooth status change to poweron"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 开始进行设备扫描")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("manager startScan"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("NSArray"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("MTModule "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("Modules"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 当检测到周围的设备后，此block会回调。")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("      \n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n         "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" Poweroff"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("NSLog")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('@"bluetooth status change to poweroff"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" Unknown"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("NSLog")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('@"bluetooth status change to unknown"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br")])]),s("h5",{attrs:{id:"单独获取手机蓝牙状态"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#单独获取手机蓝牙状态"}},[t._v("#")]),t._v(" 单独获取手机蓝牙状态")]),t._v(" "),s("p",[t._v("如果你想在某些情况下检查当前手机的蓝牙状态，请参考如下代码，需要注意，此代码获取的是即时状态，若需要监听变化请参见上一项。")]),t._v(" "),s("div",{staticClass:"language-objc line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-objc"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("manager"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("status "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" Poweron"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("NSLog")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('@"the bluetooth status is Poweron."')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("h5",{attrs:{id:"连接到设备"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#连接到设备"}},[t._v("#")]),t._v(" 连接到设备")]),t._v(" "),s("div",{staticClass:"language-objc line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-objc"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 从上一步能够获取到扫描到的设备")]),t._v("\nMTModule "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("module "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" modules"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 监听设备连接状态。")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ！！！只有在连接状态为Connected的时候，这个设备才是可以写入数据的")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("module didChangeConnection"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Connection con"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("con "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" Connected"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("NSLog")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('@"设备已经建立连接"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 连接到一个模块设备")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("manager connect"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br")])]),s("h5",{attrs:{id:"向设备写入数据"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#向设备写入数据"}},[t._v("#")]),t._v(" 向设备写入数据")]),t._v(" "),s("p",[t._v("接上一步，当手机成功与某个设备建立连接后，就可以对设备进行读写操作了。")]),t._v(" "),s("div",{staticClass:"language-objc line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-objc"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 对设备写入数据")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 首先要构造你想写入的数据,这里构造了一组四个字节的数据 0x01,0x02,0x03,0x04.")]),t._v("\nuint8_t bytes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0x01")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0x02")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0x03")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0x04")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nNSData "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("data "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("NSData dataWithBytes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("bytes length"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 然后可以直接执行一下方法，将上述构造的数据写入到设备中。")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 同时你可以在block中获取到写入是否成功的结果。")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("module writeData"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("data completion"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("BOOL success"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" NSError "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("success"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("NSLog")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('@"write data successfully."')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("NSLog")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('@"write data failed."')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br")])]),s("h5",{attrs:{id:"从设备接收数据"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#从设备接收数据"}},[t._v("#")]),t._v(" 从设备接收数据")]),t._v(" "),s("p",[t._v("由于手机并不知道什么时候设备会发送数据过来，所以在这里使用监听block的方式来实现数据接收。")]),t._v(" "),s("div",{staticClass:"language-objc line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-objc"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 配置block等待接收数据")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("module didReceiveData"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("NSData "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("NSLog")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('@"从设备端接收到数据：%@"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("h5",{attrs:{id:"从设备读取系统信息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#从设备读取系统信息"}},[t._v("#")]),t._v(" 从设备读取系统信息")]),t._v(" "),s("p",[t._v("如果固件带有系统信息，可进行获取，方法如下")]),t._v(" "),s("div",{staticClass:"language-objc line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-objc"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\n  infos属性为设备的BLE DIS字典，包含当前设备的所有基本信息\n  \n*/")]),t._v("\nNSDictionary"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("String "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" String "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("disDict "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" aMTModule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("infos"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br")])]),s("p",[t._v("infos如果为空，表示此设备不支持。关于支持DIS的固件版本，请见下表：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("固件版本(Verison)")]),t._v(" "),s("th",[t._v("是否支持")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("Version < 1.6.0")]),t._v(" "),s("td",[t._v("否")])]),t._v(" "),s("tr",[s("td",[t._v("1.6.0 <= Version < 2.0.0")]),t._v(" "),s("td",[t._v("是")])]),t._v(" "),s("tr",[s("td",[t._v("2.0.0 <= Version < 2.3.0")]),t._v(" "),s("td",[t._v("否")])]),t._v(" "),s("tr",[s("td",[t._v("2.3.0 <= Version < 3.0.0")]),t._v(" "),s("td",[t._v("是")])]),t._v(" "),s("tr",[s("td",[t._v("3.0.0 <= Version < 3.1.0")]),t._v(" "),s("td",[t._v("否")])]),t._v(" "),s("tr",[s("td",[t._v("3.1.0 <= Version")]),t._v(" "),s("td",[t._v("是")])])])]),t._v(" "),s("h3",{attrs:{id:"附表"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#附表"}},[t._v("#")]),t._v(" 附表")]),t._v(" "),s("h5",{attrs:{id:"mtmodulemanager-属性说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mtmodulemanager-属性说明"}},[t._v("#")]),t._v(" MTModuleManager 属性说明")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("名称")]),t._v(" "),s("th",[t._v("类型")]),t._v(" "),s("th",[t._v("备注")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("status")]),t._v(" "),s("td",[t._v("BluetoothStatus")]),t._v(" "),s("td",[t._v("当前的手机蓝牙状态")])]),t._v(" "),s("tr",[s("td",[t._v("scannedModules")]),t._v(" "),s("td",[t._v("NSArray")]),t._v(" "),s("td",[t._v("扫描到的设备")])]),t._v(" "),s("tr",[s("td",[t._v("connectedModules")]),t._v(" "),s("td",[t._v("NSArray")]),t._v(" "),s("td",[t._v("当前连接中的设备")])])])]),t._v(" "),s("h5",{attrs:{id:"mtmodule"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mtmodule"}},[t._v("#")]),t._v(" MTModule")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("名称")]),t._v(" "),s("th",[t._v("类型")]),t._v(" "),s("th",[t._v("备注")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("name")]),t._v(" "),s("td",[t._v("NSString")]),t._v(" "),s("td",[t._v("设备的蓝牙名称")])]),t._v(" "),s("tr",[s("td",[t._v("identifier")]),t._v(" "),s("td",[t._v("NSString")]),t._v(" "),s("td",[t._v("设备的识别码*")])]),t._v(" "),s("tr",[s("td",[t._v("advertisingData")]),t._v(" "),s("td",[t._v("NSData")]),t._v(" "),s("td",[t._v("设备的广播数据")])]),t._v(" "),s("tr",[s("td",[t._v("lastUpdate")]),t._v(" "),s("td",[t._v("NSDate")]),t._v(" "),s("td",[t._v("设备最后一次被扫描到的时间戳")])]),t._v(" "),s("tr",[s("td",[t._v("connection")]),t._v(" "),s("td",[t._v("Connection")]),t._v(" "),s("td",[t._v("设备的连接状态")])]),t._v(" "),s("tr",[s("td",[t._v("rssi")]),t._v(" "),s("td",[t._v("NSInteger")]),t._v(" "),s("td",[t._v("设备的RSSI")])]),t._v(" "),s("tr",[s("td",[t._v("uuids")]),t._v(" "),s("td",[t._v("NSDictionary")]),t._v(" "),s("td",[t._v("设备的读写服务UUID")])]),t._v(" "),s("tr",[s("td",[t._v("infos")]),t._v(" "),s("td",[t._v("NSDictionary")]),t._v(" "),s("td",[t._v("设备信息**")])])])]),t._v(" "),s("p",[t._v("*：由于iOS系统限制，应用层无法获取到设备的Mac地址，所以只能以此id来代替mac地址作为识别码，需要注意的是，即使是同一个设备，每次重新扫描数据时，它的identifier都是不一样的。")]),t._v(" "),s("p",[t._v("**：仅部分设备支持获取设备信息，为空即为不支持。")]),t._v(" "),s("h3",{attrs:{id:"注意事项"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#注意事项"}},[t._v("#")]),t._v(" 注意事项")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("如果添加 SDK 之后，运行显示无法找到路径，可以在 General -> Frameworks,Libraries,and Embedded Content ，把包删除再重新添加一次即可。")])]),t._v(" "),s("li",[s("p",[t._v("如果运行 SDK 之后，项目发生闪退，错误为 "),s("code",[t._v("**Reason: image not found**")]),t._v(" , 可在 General -> Frameworks,Libraries,and Embedded Content ，查看设置是否正确。")]),t._v(" "),s("p",[s("img",{attrs:{src:"/Users/minew/internet.Docs.mobile/src/zh-CN/iOS/pics/modulekit/Tips_1.png",alt:"Tips_1"}})])])]),t._v(" "),s("h3",{attrs:{id:"文档版本记录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#文档版本记录"}},[t._v("#")]),t._v(" 文档版本记录")]),t._v(" "),s("ul",[s("li",[t._v("v1.0 初版；")]),t._v(" "),s("li",[t._v("2021.02.01  v1.1 修复错误的 log 打印 ;")])])])}),[],!1,null,null,null);s.default=e.exports}}]);