(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{186:function(s,t,a){s.exports=a.p+"assets/img/BeaconSET+.bcc1157c.png"},187:function(s,t){s.exports="data:image/png;base64,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"},188:function(s,t){s.exports="data:image/png;base64,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"},223:function(s,t,a){"use strict";a.r(t);var n=[function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"content"},[n("h1",{attrs:{id:"beaconplus-android开发套件说明"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#beaconplus-android开发套件说明","aria-hidden":"true"}},[s._v("#")]),s._v(" BeaconPlus Android开发套件说明")]),s._v(" "),n("ul",[n("li",[n("strong",[s._v("持续更新中...")])])]),s._v(" "),n("p",[s._v("本套SDK仅支持基于miniBeaconPlus固件的设备，不再兼容之前的iBeacon，Eddystone等其它设备。相对于之前的单一通道设备SDK来说，现在的这一套BeaconSET+ SDK支持的特性更多。当然开发过程中也遇到过诸多问题，我们会在本文档说明设计缘由以及注意事项。所以，请仔细阅读此文档以便尽快上手进行项目开发。")]),s._v(" "),n("p",[s._v("请按需阅读以下每个部分，第一部分我们会说明这套SDK的整体架构，第二部分会帮助开发者上手开发，第三部分会提及开发过程中的注意事项，第四部分可以查阅到错误码的对应说明。")]),s._v(" "),n("h2",{attrs:{id:"设计说明"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#设计说明","aria-hidden":"true"}},[s._v("#")]),s._v(" 设计说明")]),s._v(" "),n("p",[s._v("我们在SDK里把手机对设备的操作分成了两个阶段：广播阶段和连接阶段。为了便于理解，我们先来看看我们都提供了哪些可以操作的类以及它们的职责：")]),s._v(" "),n("p",[s._v("MTCentralManager： 全局管理，可以检查当前手机的蓝牙状态，监听系统的蓝牙状态改变。另外最重要的是可以扫描以及连接到这些设备；")]),s._v(" "),n("p",[s._v("MTPeripheral： 设备实例，当CentralManager发现一个新设备时，会对应为其生成一个MTPeripheral实例，以真实的物理设备为单位，一个设备对应一个MTPeripheral实例。它包括了MTConnectionHandler和MTFrameHandler两个属性（下文会继续描述这两个属性的作用）。")]),s._v(" "),n("p",[s._v("MTFrameHandler：广播包解析，这个类可以解析某个设备所广播出来的所有数据包，也就是说，它是扫描阶段的核心，所有由MTCentralManager扫描出来的广播数据都由它来解析成对应的数据帧实例。")]),s._v(" "),n("p",[s._v("MTConnectionHandler：连接状态操作，所有连接上设备后发生的操作都是由此类完成，包括监听连接状态改变，读取数据，写入数据等。")]),s._v(" "),n("p",[s._v("MinewFrame：数据帧，每个此类（或者子类）实例都对应一种数据帧，一般会由MTFrameHandler生成，如果设备正在广播多种数据帧，就会生成多个对应的MinewFrame实例。这些实例可以通过MTFrameHandler获取到。")]),s._v(" "),n("p",[s._v("MTOTAManager：空中升级，此类只能用来更新设备固件，它操作的是MTConnectionHandler实例。")]),s._v(" "),n("h4",{attrs:{id:"整体架构图："}},[n("a",{staticClass:"header-anchor",attrs:{href:"#整体架构图：","aria-hidden":"true"}},[s._v("#")]),s._v(" 整体架构图：")]),s._v(" "),n("p",[n("img",{attrs:{src:a(186),alt:"BeaconSET+"}})]),s._v(" "),n("h4",{attrs:{id:"广播阶段"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#广播阶段","aria-hidden":"true"}},[s._v("#")]),s._v(" 广播阶段")]),s._v(" "),n("p",[s._v("这个阶段主要是扫描周围的miniBeaconPlus设备和解析这些设备上的广播数据，首先MTCentralManager发起扫描，MTCentralManager会为每一个物理设备生成一个MTPeripheral实例，开发者可以通过它的MTFrameHandler属性拿到关于此设备的所有广播数据。")]),s._v(" "),n("h4",{attrs:{id:"连接阶段"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#连接阶段","aria-hidden":"true"}},[s._v("#")]),s._v(" 连接阶段")]),s._v(" "),n("p",[s._v("当MTCentralManager扫描到物理设备并生成MTPeripheral实例后，就可以连接到设备，此时针对设备的连接操作都是通过MTConnectionHandler来完成的。")]),s._v(" "),n("h4",{attrs:{id:"ota单独说明"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ota单独说明","aria-hidden":"true"}},[s._v("#")]),s._v(" OTA单独说明")]),s._v(" "),n("p",[s._v("常规的OTA逻辑比较复杂，所以单独封装了MTOTAManager来执行OTA操作，必须在已经和设备建立连接的状态下才能进行。")]),s._v(" "),n("h2",{attrs:{id:"开始上手"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#开始上手","aria-hidden":"true"}},[s._v("#")]),s._v(" 开始上手")]),s._v(" "),n("h4",{attrs:{id:"准备工作"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#准备工作","aria-hidden":"true"}},[s._v("#")]),s._v(" 准备工作")]),s._v(" "),n("h5",{attrs:{id:"开发环境："}},[n("a",{staticClass:"header-anchor",attrs:{href:"#开发环境：","aria-hidden":"true"}},[s._v("#")]),s._v(" 开发环境：")]),s._v(" "),n("ul",[n("li",[s._v("Android Studio")]),s._v(" "),n("li",[s._v("minSdkVersion 18")])]),s._v(" "),n("h5",{attrs:{id:"导入到工程："}},[n("a",{staticClass:"header-anchor",attrs:{href:"#导入到工程：","aria-hidden":"true"}},[s._v("#")]),s._v(" 导入到工程：")]),s._v(" "),n("ol",[n("li",[n("p",[s._v("将开发套件MTBeaconPlus.jar文件拷贝到libs目录下，然后在build.gradle中添加依赖。如下图所示：")]),s._v(" "),n("p",[n("img",{attrs:{src:a(187),alt:"make jar"}})]),s._v(" "),n("p",[n("img",{attrs:{src:a(188),alt:"add jar"}})]),s._v(" "),n("p",[s._v("在20180502版本后，dfu功能将采用外部依赖方式。请在build.gradle下添加")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code")]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"})])])]),s._v(" "),n("ul",[n("li",[s._v("//添加依赖库\ndependencies {")])]),s._v(" "),n("ul",[n("li",[n("pre",[n("code",[s._v("  compile files('libs/MTBeaconPlus.jar')\n")])])]),s._v(" "),n("li",[n("pre",[n("code",[s._v("  compile 'no.nordicsemi.android:dfu:1.6.1'\n")])])])]),s._v(" "),n("ul",[n("li",[n("pre",[n("code",[s._v("  implementation files('libs/MTBeaconPlus.jar')\n")])])]),s._v(" "),n("li",[n("pre",[n("code",[s._v("  implementation 'no.nordicsemi.android:dfu:1.6.1'\n")])]),s._v("\n}"),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("\n否则空中升级时将会crash。app混淆时请在混淆文件中加入以下代码:\n\n```java\n-keep public class no.nordicsemi.android.**{*;}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])])])]),s._v(" "),n("ol",{attrs:{start:"2"}},[n("li",[s._v("AndroidManifest.xml 文件下添加蓝牙权限和相应的组件注册。如下所示：")])]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[s._v("   "),n("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v("uses"),n("span",{attrs:{class:"token operator"}},[s._v("-")]),s._v("permission android"),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v("name"),n("span",{attrs:{class:"token operator"}},[s._v("=")]),n("span",{attrs:{class:"token string"}},[s._v('"android.permission.ACCESS_COARSE_LOCATION"')]),n("span",{attrs:{class:"token operator"}},[s._v("/")]),n("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("\n   "),n("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v("uses"),n("span",{attrs:{class:"token operator"}},[s._v("-")]),s._v("permission android"),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v("name"),n("span",{attrs:{class:"token operator"}},[s._v("=")]),n("span",{attrs:{class:"token string"}},[s._v('"android.permission.ACCESS_FINE_LOCATION"')]),n("span",{attrs:{class:"token operator"}},[s._v("/")]),n("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("\n   "),n("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v("uses"),n("span",{attrs:{class:"token operator"}},[s._v("-")]),s._v("permission android"),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v("name"),n("span",{attrs:{class:"token operator"}},[s._v("=")]),n("span",{attrs:{class:"token string"}},[s._v('"android.permission.BLUETOOTH"')]),n("span",{attrs:{class:"token operator"}},[s._v("/")]),n("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("\n   "),n("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v("uses"),n("span",{attrs:{class:"token operator"}},[s._v("-")]),s._v("permission android"),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v("name"),n("span",{attrs:{class:"token operator"}},[s._v("=")]),n("span",{attrs:{class:"token string"}},[s._v('"android.permission.BLUETOOTH_ADMIN"')]),n("span",{attrs:{class:"token operator"}},[s._v("/")]),n("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("\n   "),n("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v("uses"),n("span",{attrs:{class:"token operator"}},[s._v("-")]),s._v("permission android"),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v("name"),n("span",{attrs:{class:"token operator"}},[s._v("=")]),n("span",{attrs:{class:"token string"}},[s._v('"android.permission.READ_EXTERNAL_STORAGE"')]),n("span",{attrs:{class:"token operator"}},[s._v("/")]),n("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("\n   "),n("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v("uses"),n("span",{attrs:{class:"token operator"}},[s._v("-")]),s._v("permission android"),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v("name"),n("span",{attrs:{class:"token operator"}},[s._v("=")]),n("span",{attrs:{class:"token string"}},[s._v('"android.permission.WRITE_EXTERNAL_STORAGE"')]),n("span",{attrs:{class:"token operator"}},[s._v("/")]),n("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[s._v("   "),n("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v("service android"),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v("name"),n("span",{attrs:{class:"token operator"}},[s._v("=")]),n("span",{attrs:{class:"token string"}},[s._v('"com.minew.beaconplus.sdk.ConnectService"')]),n("span",{attrs:{class:"token operator"}},[s._v("/")]),n("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("\n   "),n("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v("service android"),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v("name"),n("span",{attrs:{class:"token operator"}},[s._v("=")]),n("span",{attrs:{class:"token string"}},[s._v('"com.minew.beaconplus.sdk.services.DfuService"')]),n("span",{attrs:{class:"token operator"}},[s._v("/")]),n("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("\n   "),n("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v("receiver android"),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v("name"),n("span",{attrs:{class:"token operator"}},[s._v("=")]),n("span",{attrs:{class:"token string"}},[s._v('"com.minew.beaconplus.sdk.receivers.BluetoothChangedReceiver"')]),n("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("\n       "),n("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v("intent"),n("span",{attrs:{class:"token operator"}},[s._v("-")]),s._v("filter"),n("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("\n           "),n("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v("action android"),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v("name"),n("span",{attrs:{class:"token operator"}},[s._v("=")]),n("span",{attrs:{class:"token string"}},[s._v('"android.bluetooth.adapter.action.STATE_CHANGED"')]),n("span",{attrs:{class:"token operator"}},[s._v("/")]),n("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("\n       "),n("span",{attrs:{class:"token operator"}},[s._v("<")]),n("span",{attrs:{class:"token operator"}},[s._v("/")]),s._v("intent"),n("span",{attrs:{class:"token operator"}},[s._v("-")]),s._v("filter"),n("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("\n   "),n("span",{attrs:{class:"token operator"}},[s._v("<")]),n("span",{attrs:{class:"token operator"}},[s._v("/")]),s._v("receiver"),n("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("h4",{attrs:{id:"开始开发"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#开始开发","aria-hidden":"true"}},[s._v("#")]),s._v(" 开始开发")]),s._v(" "),n("h5",{attrs:{id:"获取管理类单例"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#获取管理类单例","aria-hidden":"true"}},[s._v("#")]),s._v(" 获取管理类单例")]),s._v(" "),n("p",[s._v("首先开发者需要获取一个管理类单例，并且做好开发者需要的监听：")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{attrs:{class:"token comment"}},[s._v("// 获取管理类单例")]),s._v("\nMTCentralManager mtCentralManager "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" MTCentralManager"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("getInstance")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token keyword"}},[s._v("this")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 如果需要监听系统蓝牙状态变化请这样做")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// *** 还可以通过bluetoothstate属性主动获取")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// *** 仅当state == PowerStatePoweredOn时开发套件才可正常工作")]),s._v("\nmtCentralManager"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("setBluetoothChangedListener")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{attrs:{class:"token class-name"}},[s._v("OnBluetoothStateChangedListener")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n  "),n("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("onStateChanged")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("BluetoothState state"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("h5",{attrs:{id:"扫描设备"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#扫描设备","aria-hidden":"true"}},[s._v("#")]),s._v(" 扫描设备")]),s._v(" "),n("p",[s._v("需要通过扫描来发现附近的设备，这样才能获取它们的广播内容，连接并修改设备参数等。")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{attrs:{class:"token comment"}},[s._v("//开始扫描")]),s._v("\nmtCentralManager"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("startScan")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 遍历数组，获取每个设备实例")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 也可以把它们绑定到UI上，将所有数据显示出来。")]),s._v("\nmtCentralManager"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("setMTCentralManagerListener")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{attrs:{class:"token class-name"}},[s._v("MTCentralManagerListener")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),n("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n            "),n("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("onScanedPeripheral")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token keyword"}},[s._v("final")]),s._v(" List"),n("span",{attrs:{class:"token generics function"}},[n("span",{attrs:{class:"token punctuation"}},[s._v("<")]),s._v("MTPeripheral"),n("span",{attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" peripherals"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n               \t"),n("span",{attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("MTPeripheral mtPeripheral "),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" peripherals"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),n("span",{attrs:{class:"token comment"}},[s._v("// 获取设备广播阶段实例")]),s._v("\n                    MTFrameHandler mtFrameHandler "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" mtPeripheral"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("mMTFrameHandler"),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                    String mac "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" mtFrameHandler"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("getMac")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \t\t"),n("span",{attrs:{class:"token comment"}},[s._v("//设备Mac地址")]),s._v("\n                    String name "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" mtFrameHandler"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("getName")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\t\t"),n("span",{attrs:{class:"token comment"}},[s._v("//设备名称")]),s._v("\n                  \t"),n("span",{attrs:{class:"token keyword"}},[s._v("int")]),s._v(" battery "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" mtFrameHandler"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("getBattery")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\t"),n("span",{attrs:{class:"token comment"}},[s._v("//设备电池电量")]),s._v("\n                    "),n("span",{attrs:{class:"token keyword"}},[s._v("int")]),s._v(" rssi "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" mtFrameHandler"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("getRssi")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\t\t"),n("span",{attrs:{class:"token comment"}},[s._v("//rssi")]),s._v("\n                  \t"),n("span",{attrs:{class:"token comment"}},[s._v("// 设备广播的所有数据帧（iBeacon，UID，URL...）")]),s._v("\n                    ArrayList"),n("span",{attrs:{class:"token generics function"}},[n("span",{attrs:{class:"token punctuation"}},[s._v("<")]),s._v("MinewFrame"),n("span",{attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" advFrames "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" mtFrameHandler"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("getAdvFrames")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br")])]),n("p",[s._v("另外，你可以在任何时候停止扫描任务。")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{attrs:{class:"token comment"}},[s._v("// 通过这种方式停止扫描")]),s._v("\nmtCentralManager"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("stopScan")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("通过以上方式我们就可以获取到设备在广播阶段的所有相关数据，进一步的，想要从frameHandler里获取到所有的数据帧，可以参考以下代码示例：")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("/*\n  mtFrameHandler: MTFrameHandler实例，\n*/")]),s._v("\nArrayList"),n("span",{attrs:{class:"token generics function"}},[n("span",{attrs:{class:"token punctuation"}},[s._v("<")]),s._v("MinewFrame"),n("span",{attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" advFrames "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" mtFrameHandler"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("getAdvFrames")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                    "),n("span",{attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("MinewFrame minewFrame "),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" advFrames"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                        FrameType frameType "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" minewFrame"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("getFrameType")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                        "),n("span",{attrs:{class:"token keyword"}},[s._v("switch")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("frameType"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                            "),n("span",{attrs:{class:"token keyword"}},[s._v("case")]),s._v(" FrameiBeacon"),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v("\n                                IBeaconFrame iBeaconFrame "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("IBeaconFrame"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" minewFrame"),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                                Log"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("v")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('"beaconplus"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" iBeaconFrame"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("getUuid")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("+")]),s._v(" iBeaconFrame"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("getMajor")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("+")]),s._v(" iBeaconFrame"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("getMinor")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                                "),n("span",{attrs:{class:"token keyword"}},[s._v("break")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                            "),n("span",{attrs:{class:"token keyword"}},[s._v("case")]),s._v(" FrameUID"),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v("\n                                UidFrame uidFrame "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("UidFrame"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" minewFrame"),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                                Log"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("v")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('"beaconplus"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" uidFrame"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("getNamespaceId")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("+")]),s._v(" uidFrame"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("getInstanceId")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                                "),n("span",{attrs:{class:"token keyword"}},[s._v("break")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                            "),n("span",{attrs:{class:"token comment"}},[s._v("/*\n                               更多类型，请自行处理\n                            */")]),s._v("\n                        "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n                    "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br")])]),n("p",[s._v("**重要提示：**在获取所有的传感器数据时，如果值等于"),n("em",[s._v("MTNAValue")]),s._v('（我们定义的无效值常量，在"MTPublicHeader.h“文件中），表示这个数据是无效的。所有的传感器实例（HTFrame，LightFrame，AccFrame）都有这种情况。请参考以下代码：')]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{attrs:{class:"token comment"}},[s._v("/*\n    htFrame: HTFrame实例\n    lightFrame:LightFrame实例\n    accFrame：AccFrame实例\n*/")]),s._v("\n\n"),n("span",{attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("htFrame"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("getTemperature "),n("span",{attrs:{class:"token operator"}},[s._v("==")]),s._v(" Double"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("MIN_VALUE"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    Log"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("v")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('"tag"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{attrs:{class:"token keyword"}},[s._v("this")]),s._v(" value is not available"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v('"'),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),n("span",{attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("lightFrame"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("getLuxValue "),n("span",{attrs:{class:"token operator"}},[s._v("==")]),s._v(" Integer"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("MIN_VALUE"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    Log"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("v")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('"tag"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{attrs:{class:"token keyword"}},[s._v("this")]),s._v(" value is not available"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v('"'),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),n("span",{attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("accFrame"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("getXAxis")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("==")]),s._v(" Double"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("MIN_VALUE"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\tLog"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("v")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('"tag"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{attrs:{class:"token keyword"}},[s._v("this")]),s._v(" value is not available"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v('"'),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br")])]),n("h5",{attrs:{id:"连接设备"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#连接设备","aria-hidden":"true"}},[s._v("#")]),s._v(" 连接设备")]),s._v(" "),n("p",[s._v("要对设备进一步操作（修改参数，OTA），需要先连接到设备。由于有些设备在连接时可能需要密码验证，所以请注意回调状态PASSWORDVALIDATING：")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{attrs:{class:"token comment"}},[s._v("/*\n  mtCentralManager： MTCentralManager的单例\n  mtPeripheral： MTPeripheral实例\n*/")]),s._v("\nmtCentralManager"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("connect")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("mtPeripheral"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" connectionStatueListener"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 整个连接过程需要经过多个中间状态，如果遇到错误，会通过error抛出")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 只有当status == COMPLETED时，才算是连接成功")]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("private")]),s._v(" ConnectionStatueListener connectionStatueListener "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{attrs:{class:"token class-name"}},[s._v("ConnectionStatueListener")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n        "),n("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("onUpdateConnectionStatus")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token keyword"}},[s._v("final")]),s._v(" ConnectionStatus connectionStatus"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("final")]),s._v(" GetPasswordListener getPasswordListener"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),n("span",{attrs:{class:"token function"}},[s._v("runOnUiThread")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{attrs:{class:"token class-name"}},[s._v("Runnable")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),n("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n                "),n("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("run")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),n("span",{attrs:{class:"token keyword"}},[s._v("switch")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("connectionStatus"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                        "),n("span",{attrs:{class:"token comment"}},[s._v("//如果需要连接密码，会回调这个状态")]),s._v("\n                        "),n("span",{attrs:{class:"token comment"}},[s._v("//密码长度必须为8个长度")]),s._v("\n                        "),n("span",{attrs:{class:"token keyword"}},[s._v("case")]),s._v(" PASSWORDVALIDATING"),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v("\n                            String password "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v('"minew123"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                            getPasswordListener"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("getPassword")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("password"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                            "),n("span",{attrs:{class:"token keyword"}},[s._v("break")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                    "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n                "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n        "),n("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n        "),n("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("onError")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("MTException mtException"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            \n        "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 断开某个设备的连接状态")]),s._v("\nmtCentralManager"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("disconnect")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("mtPeripheral"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br")])]),n("h5",{attrs:{id:"获取基本信息"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#获取基本信息","aria-hidden":"true"}},[s._v("#")]),s._v(" 获取基本信息")]),s._v(" "),n("p",[s._v("成功连接到设备后，就可以获取设备信息以及修改设备参数了。我们先来看看怎么获取各种基础数据。")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{attrs:{class:"token comment"}},[s._v("/*\n   mtPeripheral： MTPeripheral实例\n*/")]),s._v("\nMTConnectionHandler mtConnectionHandler "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" mtPeripheral"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("mMTConnectionHandler"),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("//当前的设备连接状态")]),s._v("\nConnectState connectState "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" mtConnectionHandler"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("getConnectState")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 连接时是否需要密码，None不需要，Require需要")]),s._v("\nPasswordState passwordState "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" mtConnectionHandler"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("getPasswordState")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 设备信息，例如：（Firmware Version： 0.9.1）；")]),s._v("\nHashMap"),n("span",{attrs:{class:"token generics function"}},[n("span",{attrs:{class:"token punctuation"}},[s._v("<")]),s._v("String"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" String"),n("span",{attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" systeminfos "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" mtConnectionHandler"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("systeminfos"),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 设备特性；")]),s._v("\nMTConnectionFeature mtConnectionFeature "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" mtConnectionHandler"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("mTConnectionFeature"),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 设备的广播通道数量，可以根据此动态生成UI；")]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("int")]),s._v(" slotAtitude "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" mtConnectionFeature"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("getSlotAtitude")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 可以调节参数类型：none不可调，adv可调，txpower可调，adv/txpower均可调")]),s._v("\nFeatureSupported featureSupported "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" mtConnectionFeature"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("getFeatureSupported")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 支持的广播帧类型（多种）")]),s._v("\nList"),n("span",{attrs:{class:"token generics function"}},[n("span",{attrs:{class:"token punctuation"}},[s._v("<")]),s._v("FrameType"),n("span",{attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" supportedSlots "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" mtConnectionFeature"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("getSupportedSlots")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 支持的Txpower（多档位）")]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("byte")]),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" supportedTxpowers "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" mtConnectionFeature"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("getSupportedTxpowers")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("//支持的Trigger（多种）")]),s._v("\nArrayList"),n("span",{attrs:{class:"token generics function"}},[n("span",{attrs:{class:"token punctuation"}},[s._v("<")]),s._v("TriggerType"),n("span",{attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" supportTriggers "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" mtConnectionFeature"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("supportTriggers"),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 固件版本枚举，方便处理版本号区分；")]),s._v("\nVersion version "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" mtConnectionFeature"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("getVersion")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br")])]),n("p",[n("strong",[s._v("PS:")]),s._v(" "),n("strong",[s._v("MTConnectionHandler")]),s._v("的"),n("em",[s._v("Version")]),s._v("属性说明：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("Versoin值来自设备的固件版本号，可以通过检查Version的值来判断当前设备支持的功能：\n \n// 初始化值 \nVersionUndefined\n\n// 基础版本，仅支持基础功能\nVersionBase\n\n// 此版本及以上支持自定义连接密码 / 设备信息广播帧\nVersion0_9_8\n\n// 此版本及以上支持远程关机命令\nVersion0_9_9\n\n// 此版本及以上开始支持触发器\nVersion2_0_0\n\n// 此版本及以上开始支持带广播设置的触发器配置\nVersion2_2_60\n\n// 理想值，支持所有特性。\nVersionMax = 1000\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br")])]),n("h5",{attrs:{id:"获取各通道数据"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#获取各通道数据","aria-hidden":"true"}},[s._v("#")]),s._v(" 获取各通道数据")]),s._v(" "),n("p",[s._v("接下来可以获取每个通道对应的参数数据，之所以单独讲这部分，是因为所有与修改相关的内容全部在这里。")]),s._v(" "),n("p",[s._v("在阅读代码之前，我们先来了解通道的概念：通道相当于一个广播工具，它不管里面是什么内容，只管把内容广播出来，例如一个6通道的设备可能是这样的：")]),s._v(" "),n("table",[n("thead",[n("tr",[n("th",[s._v("通道序号")]),s._v(" "),n("th",[s._v("0")]),s._v(" "),n("th",[s._v("1")]),s._v(" "),n("th",[s._v("2")]),s._v(" "),n("th",[s._v("3")]),s._v(" "),n("th",[s._v("4")]),s._v(" "),n("th",[s._v("5")])])]),s._v(" "),n("tbody",[n("tr",[n("td",[s._v("广播内容")]),s._v(" "),n("td",[s._v("iBeacon")]),s._v(" "),n("td",[s._v("TLM")]),s._v(" "),n("td",[s._v("UID")]),s._v(" "),n("td",[s._v("URL")]),s._v(" "),n("td",[s._v("HTSensor")]),s._v(" "),n("td",[s._v("None")])]),s._v(" "),n("tr",[n("td",[s._v("广播间隔（ms）")]),s._v(" "),n("td",[s._v("1000")]),s._v(" "),n("td",[s._v("2000")]),s._v(" "),n("td",[s._v("500")]),s._v(" "),n("td",[s._v("900")]),s._v(" "),n("td",[s._v("3000")]),s._v(" "),n("td",[s._v("0")])]),s._v(" "),n("tr",[n("td",[s._v("RSSI@0/1m（dbm）")]),s._v(" "),n("td",[s._v("-1")]),s._v(" "),n("td",[s._v("0")]),s._v(" "),n("td",[s._v("-4")]),s._v(" "),n("td",[s._v("-10")]),s._v(" "),n("td",[s._v("-3")]),s._v(" "),n("td",[s._v("0")])]),s._v(" "),n("tr",[n("td",[s._v("信号强度（dbm）")]),s._v(" "),n("td",[s._v("4")]),s._v(" "),n("td",[s._v("0")]),s._v(" "),n("td",[s._v("-4")]),s._v(" "),n("td",[s._v("4")]),s._v(" "),n("td",[s._v("0")]),s._v(" "),n("td",[s._v("0")])])])]),s._v(" "),n("p",[s._v("上表的意思是，第0个通道广播iBeacon数据，第1个通道广播TLM数据，…，第5个通道不广播任何数据。它们每个都有独立的广播间隔，信号强度和校准值，互相之间没有关系也不产生任何影响。")]),s._v(" "),n("p",[s._v("PS：校准值：RSSI@0/1m 指的是手机在设备0/1m（iBeacon为1，其它为0）处的信号强度。")]),s._v(" "),n("p",[s._v("接下来我们来看下怎么获取设备的通道数据。")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{attrs:{class:"token comment"}},[s._v("/*\n    mtConnectionHandler: MTConnectionHandler实例\n*/")]),s._v("\n\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 当前设备每一个通道对应的数据帧")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 此数组的数量和通道数量保持一致（也就是mtConnectionFeature.getSlotAtitude()）")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 按照通道顺序严格排序，比如：0. -> MinewiBeacon，1. -> MinewUID ...")]),s._v("\nArrayList"),n("span",{attrs:{class:"token generics function"}},[n("span",{attrs:{class:"token punctuation"}},[s._v("<")]),s._v("MinewFrame"),n("span",{attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" allFrames "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" mtConnectionHandler"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("allFrames"),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{attrs:{class:"token comment"}},[s._v("/*\n   假如第3个通道为iBeacon数据，第4个通道数据为UID，\n   我们尝试解析第3个通道的数据。\n*/")]),s._v("\n\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 由于默认指针是MinewFrame（MinewiBeacon的父级）类型，需要做一下转换。")]),s._v("\n\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 获取第3个通道的数据帧")]),s._v("\nMinewFrame minewFrame "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" allFrames"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("get")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token number"}},[s._v("2")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 确认此通道是iBeacon类型，如果类型确认，可以不需要做这一步判断")]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("if")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("minewFrame"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("getFrameType")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token operator"}},[s._v("==")]),s._v("FrameType"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("FrameiBeacon"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  IBeaconFrame iBeaconFrame "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("IBeaconFrame"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" minewFrame"),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  \n  "),n("span",{attrs:{class:"token comment"}},[s._v("// iBeacon数据")]),s._v("\n  String uuid "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" iBeaconFrame"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("getUuid")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{attrs:{class:"token keyword"}},[s._v("int")]),s._v(" major "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" iBeaconFrame"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("getMajor")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{attrs:{class:"token keyword"}},[s._v("int")]),s._v(" minor "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" iBeaconFrame"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("getMinor")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{attrs:{class:"token comment"}},[s._v("// 所处通道的参数")]),s._v("\n  "),n("span",{attrs:{class:"token keyword"}},[s._v("int")]),s._v(" curSlot "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" iBeaconFrame"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("getCurSlot")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),n("span",{attrs:{class:"token comment"}},[s._v("// 第几通道")]),s._v("\n  "),n("span",{attrs:{class:"token keyword"}},[s._v("int")]),s._v(" advInterval "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" iBeaconFrame"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("getAdvInterval")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),n("span",{attrs:{class:"token comment"}},[s._v("// 此通道的广播间隔")]),s._v("\n  "),n("span",{attrs:{class:"token keyword"}},[s._v("int")]),s._v(" advtxPower "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" iBeaconFrame"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("getAdvtxPower")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),n("span",{attrs:{class:"token comment"}},[s._v("// 此通道的信号校准值 iBeacon：RSSI@1m others： RSSI@0m")]),s._v("\n  "),n("span",{attrs:{class:"token keyword"}},[s._v("int")]),s._v(" radiotxPower "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" iBeaconFrame"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("getRadiotxPower")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),n("span",{attrs:{class:"token comment"}},[s._v("// 此通道信号强度")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br")])]),n("p",[s._v("你可以使用同样的方式来解析其它所有通道，值得注意的是，当frameType == FrameNone 时，说明此通道没有广播数据。")]),s._v(" "),n("h5",{attrs:{id:"修改通道数据"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#修改通道数据","aria-hidden":"true"}},[s._v("#")]),s._v(" 修改通道数据")]),s._v(" "),n("p",[s._v("通过我们的开发套件，开发者可以自由的修改每个通道的广播数据。")]),s._v(" "),n("p",[s._v("我们区分了静态数据帧和动态数据帧，静态数据帧指的是广播数据不会发生变化的：iBeacon，UID，URL等等，动态数据帧指的是广播数据不定时发生变化的：TLM，各类传感器数据等。")]),s._v(" "),n("p",[s._v("可以通过下面的参考代码实现。")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{attrs:{class:"token comment"}},[s._v("/*\n   mtConnectionHandler: MTConnectionHandler实例\n*/")]),s._v("\n\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 生成一个uid实例")]),s._v("\nUidFrame uidFrame "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{attrs:{class:"token class-name"}},[s._v("UidFrame")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nuidFrame"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("setFrameType")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("FrameType"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("FrameUID"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 配置uid的namespaceId和instanceId参数")]),s._v("\nuidFrame"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("setNamespaceId")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('"0123456789abdcdcba12"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nuidFrame"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("setInstanceId")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('"0123456789dc"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 通道相关配置")]),s._v("\nuidFrame"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("setRadiotxPower")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token number"}},[s._v("4")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),n("span",{attrs:{class:"token comment"}},[s._v("// 配置这个通道的广播功率")]),s._v("\nuidFrame"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("setAdvInterval")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token number"}},[s._v("600")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),n("span",{attrs:{class:"token comment"}},[s._v("// 配置这个通道的广播间隔")]),s._v("\nuidFrame"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("setAdvtxPower")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token operator"}},[s._v("-")]),n("span",{attrs:{class:"token number"}},[s._v("3")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),n("span",{attrs:{class:"token comment"}},[s._v("// 配置这个通道的信号校准值 RSSI@0m")]),s._v("\n\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 写入到设备")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 详情：1.把1通道设置为UID广播，namespaceId：0123456789abdcdcba12，instanceId：0123456789dc")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("//      2.设置1通道的广播间隔为600ms，RSSI@0m为-3dbm，广播功率为：4dbm")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 第二个参数为通道序号")]),s._v("\n mtConnectionHandler"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("writeSlotFrame")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("uidFrame"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token number"}},[s._v("1")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{attrs:{class:"token class-name"}},[s._v("MTCOperationCallback")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),n("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n                    "),n("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("onOperation")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" success"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" MTException mtException"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                       "),n("span",{attrs:{class:"token keyword"}},[s._v("if")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("success"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                           Log"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("v")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('"beaconplus"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{attrs:{class:"token string"}},[s._v('"Success!"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                       "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{attrs:{class:"token keyword"}},[s._v("else")]),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                           Log"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("v")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('"beaconplus"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("mtException"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("getMessage"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                       "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n                    "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n                "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br")])]),n("p",[s._v("注意，Slot参数有范围：")]),s._v(" "),n("ul",[n("li",[n("strong",[s._v("Advertisement interval")]),s._v(": 100 - 5000 (ms)")]),s._v(" "),n("li",[n("strong",[s._v("RSSI@0m")]),s._v(": -127 - 0 (dbm)")])]),s._v(" "),n("p",[s._v("注意**: Radio Txpower不是一个范围，它是几个特征值，如：-8，-4，0，4.你可以从“MTConnectionHandler”的feature属性获取所有支持的Radio Txpowers。")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{attrs:{class:"token comment"}},[s._v("/*\n   mtConnectionFeature: a property of MTConnectionHandler.\n*/")]),s._v("\n\n"),n("span",{attrs:{class:"token comment"}},[s._v("// get all supported Radio txpower of current device.")]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("byte")]),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" supportedTxpowers "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" mtConnectionFeature"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("getSupportedTxpowers")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("p",[s._v("你可以通过相同的方式修改任何一个通道的广播数据，如果需要关闭某个通道，只需要创建一个frameType=FrameNone的对象写入到设备即可，当然，别忘了设置通道序号。")]),s._v(" "),n("h5",{attrs:{id:"修改设备全局参数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#修改设备全局参数","aria-hidden":"true"}},[s._v("#")]),s._v(" 修改设备全局参数")]),s._v(" "),n("p",[s._v("设备全局参数指的是设备级的一些特性，比如：配置设备是否可连接，是否需要密码，恢复出厂等。")]),s._v(" "),n("p",[s._v("可以通过以下代码示例参考。")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{attrs:{class:"token comment"}},[s._v("// 恢复出厂设置")]),s._v("\nmtConnectionHandler"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("resetFactorySetting")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{attrs:{class:"token class-name"}},[s._v("MTCOperationCallback")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                            "),n("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n                            "),n("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("onOperation")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" success"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" MTException mtException"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                                "),n("span",{attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("success"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                                  Log"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("v")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('"beaconplus"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{attrs:{class:"token string"}},[s._v('"Success!"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                                "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                                  Log"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("v")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('"beaconplus"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{attrs:{class:"token string"}},[s._v('"Failed!"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                                "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n                            "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n                        "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 更新设备可连接设置")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// CONNECTABLE_YES为可连接，CONNECTABLE_NO不可连接，")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 配置设备不可连接后，可以通过按下设备上的按钮再次连接到设备。")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// !!!:如果设备上没有按钮，且把设备配置为不可连后，设备将无法再次被连接。")]),s._v("\nmtConnectionHandler"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("updateConnectable")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTABLE_NO"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{attrs:{class:"token class-name"}},[s._v("MTCOperationCallback")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                                "),n("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n                                "),n("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("onOperation")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" success"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("final")]),s._v(" MTException mtException"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                                  "),n("span",{attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("success"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                                  \tLog"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("v")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('"beaconplus"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{attrs:{class:"token string"}},[s._v('"Success!"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                                  "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                                    Log"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("v")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('"beaconplus"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{attrs:{class:"token string"}},[s._v('"Failed!"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                                  "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n                                "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n                            "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 修改/增加密码")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// !!!: 只能设置8位密码，数字或英文字母；")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 设备没有密码时，会添加密码，设备有密码时，会更新密码。")]),s._v("\nmtConnectionHandler"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("modifyPassword")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('"minew123"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{attrs:{class:"token class-name"}},[s._v("MTCOperationCallback")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                                "),n("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n                                "),n("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("onOperation")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" success"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" MTException mtException"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                                   "),n("span",{attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("success"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                                     Log"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("v")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('"beaconplus"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{attrs:{class:"token string"}},[s._v('"Success!"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                                   "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                                     Log"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("v")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('"beaconplus"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{attrs:{class:"token string"}},[s._v('"Failed!"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                                   "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n                                "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n                            "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 移除密码")]),s._v("\nmtConnectionHandler"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("removePassword")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{attrs:{class:"token class-name"}},[s._v("MTCOperationCallback")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                                    "),n("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n                                    "),n("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("onOperation")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" success"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" MTException mtException"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                                      "),n("span",{attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("success"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                                  \t\tLog"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("v")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('"beaconplus"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{attrs:{class:"token string"}},[s._v('"Success!"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                                      "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                                        Log"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("v")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('"beaconplus"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{attrs:{class:"token string"}},[s._v('"Failed!"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                                      "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n                                    "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n                                "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 远程关闭设备")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// !!!:请确认设备上有按钮，可以通过按下按钮的方式重启，否则关闭后无法重启设备。")]),s._v("\nmtConnectionHandler"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("powerOff")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{attrs:{class:"token class-name"}},[s._v("MTCOperationCallback")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                                    "),n("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n                                    "),n("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("onOperation")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" success"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" MTException mtException"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t\t\t\t\t\t\t\t"),n("span",{attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("success"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                                  \t\tLog"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("v")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('"beaconplus"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{attrs:{class:"token string"}},[s._v('"Success!"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                                      "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                                        Log"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("v")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('"beaconplus"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{attrs:{class:"token string"}},[s._v('"Failed!"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                                      "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n                                    "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n                                "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br")])]),n("h5",{attrs:{id:"读取设备上的温湿度数据"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#读取设备上的温湿度数据","aria-hidden":"true"}},[s._v("#")]),s._v(" 读取设备上的温湿度数据")]),s._v(" "),n("p",[s._v("BeaconPlus设备整合了温湿度，光感，加速度等多种传感器，目前我们提供了温湿度历史数据的读取接口。")]),s._v(" "),n("p",[s._v("请确认此设备带有温湿度传感器，否则无法正确获取数据。")]),s._v(" "),n("p",[s._v("可以通过以下代码示例参考。")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{attrs:{class:"token comment"}},[s._v("/*\n   mtConnectionHandler: MTConnectionHandler实例\n*/")]),s._v("\n\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 从设备上读取温湿度数据")]),s._v("\nmtConnectionHandler"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("readSensorHistory")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("curTime"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{attrs:{class:"token class-name"}},[s._v("ReadHistoricalDataListener")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                        "),n("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n                        "),n("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("onReceiveHistoricalData")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("SensorModel sensorModel"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                            "),n("span",{attrs:{class:"token keyword"}},[s._v("int")]),s._v(" date "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" sensorModel"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("getDate")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),n("span",{attrs:{class:"token comment"}},[s._v("// 此数据的Unix时间戳；")]),s._v("\n                            "),n("span",{attrs:{class:"token keyword"}},[s._v("float")]),s._v(" temperature "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" sensorModel"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("getTemperature")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),n("span",{attrs:{class:"token comment"}},[s._v("// 温度数据；")]),s._v("\n                            "),n("span",{attrs:{class:"token keyword"}},[s._v("float")]),s._v(" humidity "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" sensorModel"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("getHumidity")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),n("span",{attrs:{class:"token comment"}},[s._v("// 湿度数据；")]),s._v("\n                        "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n                        "),n("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n                        "),n("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("onNoHistoricalData")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                            Log"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("v")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('"beaconplus"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{attrs:{class:"token string"}},[s._v('""')]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                        "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n                    "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br")])]),n("p",[s._v("你可以用表格或者曲线的方式把这些数据生动的呈现出来。")]),s._v(" "),n("h5",{attrs:{id:"配置触发器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#配置触发器","aria-hidden":"true"}},[s._v("#")]),s._v(" 配置触发器")]),s._v(" "),n("p",[s._v("BeaconPlus设备加入了触发器功能，你可以给每个通道独立的配置触发器，仅当满足触发条件时设备才会开启对应通道进行广播，否则，对应通道将会一直处于关闭状态。")]),s._v(" "),n("p",[s._v("可以通过以下代码示例参考。")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{attrs:{class:"token comment"}},[s._v("/*\n   mtConnectionHandler: MTConnectionHandler实例\n*/")]),s._v("\nTrigger trigger "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{attrs:{class:"token class-name"}},[s._v("Trigger")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\ntrigger"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("setCurSlot")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token number"}},[s._v("2")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),n("span",{attrs:{class:"token comment"}},[s._v("// 目标通道：2")]),s._v("\ntrigger"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("setTriggerType")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("TEMPERATURE_ABOVE_ALARM"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),n("span",{attrs:{class:"token comment"}},[s._v("// 触发条件：温度高于")]),s._v("\ntrigger"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("setCondition")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token number"}},[s._v("10")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),n("span",{attrs:{class:"token comment"}},[s._v("// 触发值：10")]),s._v("\nmMTConnectionHandler"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("setTriggerCondition")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("trigger"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{attrs:{class:"token class-name"}},[s._v("SetTriggerListener")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                        "),n("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n                        "),n("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("onSetTrigger")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" success"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" MTException mtException"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t\t\t\t\t\t\t\t"),n("span",{attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("success"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                                  \t\tLog"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("v")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('"beaconplus"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{attrs:{class:"token string"}},[s._v('"Success!"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                                      "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                                        Log"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("v")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('"beaconplus"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{attrs:{class:"token string"}},[s._v('"Failed!"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                                      "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n                        "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n                    "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br")])]),n("p",[s._v("现在，你可以参考以上示例进行开发了。")]),s._v(" "),n("h2",{attrs:{id:"注意事项"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#注意事项","aria-hidden":"true"}},[s._v("#")]),s._v(" 注意事项")]),s._v(" "),n("p",[s._v("1.在Android-6.0以上版本蓝牙扫描需要动态申请地理位置权限，具体如下：")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ContextCompat"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("checkSelfPermission")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token keyword"}},[s._v("this")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" Manifest"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("permission"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ACCESS_COARSE_LOCATION"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n                "),n("span",{attrs:{class:"token operator"}},[s._v("!=")]),s._v(" PackageManager"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("PERMISSION_GRANTED"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            ActivityCompat"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("requestPermissions")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token keyword"}},[s._v("this")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                    "),n("span",{attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{attrs:{class:"token class-name"}},[s._v("String")]),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("Manifest"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("permission"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ACCESS_COARSE_LOCATION"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" PERMISSION_COARSE_LOCATION"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("2.由于设备的连接过程是放在Service中，所以建议在app启动后调用以下方法开启服务，否者连接功能将不能使用。具体如下：")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{attrs:{class:"token comment"}},[s._v("/*\n\tmtCentralManager:MTCentralManager实例\n*/")]),s._v("\nMTCentralManager mtCentralManager "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" MTCentralManager"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("getInstance")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token keyword"}},[s._v("this")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nmtCentralManager"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("startService")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{attrs:{class:"token comment"}},[s._v("//断开服务")]),s._v("\nmtCentralManager"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("stopService")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("h2",{attrs:{id:"文档版本记录"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#文档版本记录","aria-hidden":"true"}},[s._v("#")]),s._v(" 文档版本记录")]),s._v(" "),n("ul",[n("li",[s._v("2017.10.13  v1.0 初版；")])])])}],e=a(0),r=Object(e.a)({},function(){this.$createElement;this._self._c;return this._m(0)},n,!1,null,null,null);r.options.__file="Android_BeaconPlus_Software_Development_Kit_Guide.md";t.default=r.exports}}]);