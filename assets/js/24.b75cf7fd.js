(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{191:function(s,a,t){s.exports=t.p+"assets/img/design.48a5b3ec.png"},192:function(s,a){s.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfEAAAAiCAIAAADAjXcfAAAMkklEQVR4Ae1dW0wUWRo+7TpBGldQ6G4u0o2bAAKNYMRkFAOOO7qK6yRqspMIk4wXMBv3xdWNL4hZxpeZdcaXnXlwHTVZNdlJduZhRmbiZWcgima90dDgoA/QrULf0Eawhd1Nev9Tp6u6uruq+kLTNPDXA33q1H/+y3eq/vOf/xyqVGVlZQQPRAARQAQQgTmBwII5YQUagQggAogAIkAR+IVWq008El6v/t1jf2mofqv/Zt9rlSo2BXR1rUcO7qnd8l5NrrOj61lsTGa2VVxwUDbBm7vrUMvhbb95D4AqW2i6+2QU6CXlxh1PKvr3JVZRF3u9i1bsKFlVpHL1j/+X7/e0iqL1m/MKVukMSycslkmxOaH0rCb3P3anO5bbRlNbXprxasj+P7GUJCknQLdQPKdiOyhctSHV0+328F0ZLTdJfbib88ivBv41MBZLF0erw9yjXzh7TbK3tbS2EfBETQkflYwfnqlxnPyizRohetHSR8g2LJnX+/b7h7e6Ljd+8TD84xFfPAXRdtEDr1JNvB4DrSfEA/lr0+N2EwHPviYjrEFTIvAu1RmWv7L89IaoVF5velmDXm1+cs80AUypdCOxtvUPkOy1ddo0kc5e74RC/eDL8MBOSekoG3NeslBt7u4bBBthBC3UE8f9b21iwENZgnc2uH1QhF6dvhrJ+0Glsl6/Zm85/Af70b+aRR0xfWrMMc4z49Oh22580nQDsJzffTbtOOTlZhFTxwPAOeC+nXa5hJTv3Zf148lIxpIAzQJP4Jkf/K5nECrjcZ8s1qcTs9XJWC1bpB6dJPnpaV1vxkmqJp946ASGqF7a712yQyHQzUEb6XraJlmPxZX6IIceXzyd7T1OsD0eXRMEoerh52dyWpv2rjNfuBN0CU/DIjADPh0i64ObckAzr/nLj/g+864+1FIx3KndWq1V/XzpS7JnXzGxdZ4+fv254d1jzZnXzkHNShpeDUPljaFAFxViJcTFu4yUxuv4/szH/4RQUY4/YyVBT7NDEnIF5Qk53rKJChZb4efj7fqGizIU6IVLYg6UIScacODKPj6sMlocqH4hh5zcEEJ/hd8uHk+4JtYTTn++dOArfjYAWZeaMlPHeUvoA+9zBH7esiWInavKF1FBTy0d7ZzH9dOmFvy20JAB9wMNolmwzMJSqGRUzpsmiFWFFhCYG4zE1fZGNL6NusbSNcts4yRd/dTuytcJxFEVQM8SYn1E9Ezb1z2PWewPTGg6JZ/14+iji4O+4QQsKjBs3JDOpIjpWY0vvk6fFEzz83HbhaBbQS7wgUlJiXHy0UV/hC6Jp1BJ8otqy6l8KbSZXtxVLvYXQPZ6A+zy6ymqV9ZT7n6wXWnrP1X369zbYR92v3JY4hCYAZ8uN8dXGbdlXjrwdcXfdu6p6zx9srOhOROesudUzZX1+8FltD5UgT9qatht5ty0XA+CA9pJzrUepSM8lJv2DrGRQ5r/EKWRpIfmxVSTxtYhTu6WdTcu3GHKQ5PQ3AvoVmpqbL1An2HK89huJ+jJJYgk6SVxYI6y2HyylUvsUHs5PjbO2lB9uGqJP4Ljhmu7Pj27C55VfpiRlCvBgq+Swyd7+4H1jnOtnwiRlN+BZldWZva2TXHirJCT0WwoApfdDumFAkNtXcFrzl3SsHTM2v6d4P39+oApiyt1Wc/sHYGpEqdlskSf6iSLPNZRkp+iBjf7kjc7mt+08qI1bvu9v/ePL4PUjb7ASocZ8GUaS3d7O1UDnF3JjmwPlwOhOlenWK6YJPM2Poc+Zu2ghvBtibX9IrUL+KzZOCGMcKFyB14wvVNXVGs9t7qFUQRqJfFklcA2wtyLP9Lnho21dXTQZYecvXA1VE9J23lO9FelutPXu6+m0nBjKNIMp7j5fC4n0b4XiKnbHxCnw0Z6265zrjwrx8D6RogB6eitqTTmyXYZpHFLy2ydV28zip6rP4yUrTF6vXAqyV+BHpr0X/bNCWzDdqLN1XF85GSDrxQC1R6TSY4sTH1eVbHG1HHFwsiC7I1cH+q4jzb++bPvXd6ur48cgPJHf/o8BierjA/hsRUbBcOS0Zg94hgSV8a37I/BB9wukpK2jGe/PEMj1UfgKDX5KS6Lm6cjJH2RGk4G3J58nSFjwulzhf7rUZW8Qvj8YsLDtwR3KUwUHJZXfDXRGpZ4zFYZp5ZCM+Dg0Pl5CUwvNMsnrd0+zR3dDo/IRkm5IAjGvKynTwTpguhpLcjZC0Ll9FTWB1xBprFK+aFT5jA/r85AnD69QNMMcvbKP56t5sVAukaXR3r40+BfOXpuUAkmVjyn2zwOb83i04tex7AiucxFXU6mc5imKX3H0IgzW5iv8JUJ/JXBxzxEYNg4Q1oPskmAKI3GlHMNw7BEw8yEHeBT7pOiqg8qQGJwAmGFjmaWBwI1GoOl2lHnmN7gto+DH5yKopQVNValGu275IuvIfshXm71uuliLIwuab8kHos4BeQXnFZuUEM26RZ4cB46yPuTFM32Cl90QzlMwBjmZPMJKbnAznnTQqoLS0fpSqmf+zSXJO31yZTRU1kjGkgZlUnwqgQCs82nUxdj7wOHK3evPh9yEVv/Z0E5dxWRS5bK0UtgpVRFcyYNW8mPvpwJTd9vVqKXvWYfHtHkgH+h63T0yM3U2Eb4E1aV0L+K+LA0DssXHf+QCKsjoCGdYz1M9KyZZRJY+qKm1h/t0tD4qV1y7wfL54JDhg05NHKP00F1qNYS85N2bl8NzbeI3JM6PRU2/4SKgtz63VFdbV0x4RcJCA38J11XfGsGfBO5u5+/Tty9tzJqq4sLRoMaCgRxLijbG5uw7BwdDMTifVOx8ZlvrZIo9xIJ9OVbtmb23lfIIXBpuOz1W9ZFwg1ooqVnbKVmheB8CRecQiT19vt7aLQoHFL0wsXAwvN7/c6Kmu2+sAx2jxQ7u8zRTxoCmcZ+Fgk+sIvGbGYJfyqInWZqc2OXGnFL7UY9ZMmD8hiQ83U+9e9z921h7ILQ2H8sTk/xn/AlztXyJ1P9pdl5zygVSvdNVi9h/JhuaqNOMkcENKpBy30z0dcVFyylCUMI/J3PUvSrot7myfMpkBPE9GF/Pe5JNWwBCklbgeal9eU19YYImEjbK5YSbVmjnd4MXrT6zBb6RMfpLKZjmzoI2d9yan/Qrg9J4FbWn22pp1cEYgU+PedP6o41A2fGSmgiyRkqo6WHJrYrZzuNzQc/3QZlxh983z8urznB6Uk351z+YUQUp4fSy+kPDvH6x+cyTzW3bKKxmLBvh9AHPA6HnFy5ehApiU8gPdPzNnggpqKtq2vkMCxj3FYYfRkli6n5fRSG2gZf2kSunrXSbKio3UCLQo4lkJ4lcN1MH9jCqH5mF68WMibT+hd8ce+tVxs5PenmnFsODx+ni3NEoEPovhcfwfYKNbd1x/HTk7QdhbUNPmwFk8PqP95lteYXljQUkIuDDpIKmfpQnBkTRln1AZ3MRs5frICCvWKyyMtsIaf/qgXGtchbISUgoEry970w35F5rVFYfsRumxUISG71SbzmNEZu0HmEVEbiNZi7ErmE0oSwtzK+htIdX9o2cTYvvvznMLdZlnuZwz0xx0zrOX/O9U7z71bHaX4RKzrcouXjoORMrMywnR8BOjEyLiH84qf/QjxKsBzV9I79m/O+3WvxYDmPeCQ69zKPoJ3fptJk1OncQw27dQ/o/3zNbzDmjvXizS2xZWnCYkGn5pt18K+FYRN3YVnNT4Jkz73Mz15BqxEBRAARiA0BzL3Ehhu2QgQQAUQgGRFAn56MvYI6IQKIACIQGwLo02PDDVshAogAIpCMCEiskcKi84n6SuGVT8moNeqECCACiAAiIIWAxHeOVLa77Ve/fZHXuHO1a5Z+P0jKUqxDBBABRGDuI7CgtLRU0kr6ZsFwbyKUbIiViAAigAggAjOFwIK+vj45tz5TOqFcRAARQAQQgdgQoGuk0m4dXhAYG0tshQggAogAIjBDCCjue1H8+sQMKYxiEQFEABFABGQR8K2RajQap1P0JQZ4udfYo39ffbP2xIldq9/qv9kn+e5pWa54ARFABBABRGAmEJDYy8jU4L7ak9NxtPEreFkHvq9jJvoGZSICiAAiEC0C8rmX4I+oRcsZ6REBRAARQAQSjYC8T0+0JigPEUAEEAFEYKoILMSNjFOFENsjAogAIpA0CCyEjYySyuAHXiVhwUpEABFABJIZAYk1Uv59L8Odp+E7I/g1g2TuPtQNEUAEEIEABPCbGAFw4AkigAggArMaAVwjndXdh8ojAogAIhCAwP8BiCHQuZdhxlIAAAAASUVORK5CYII="},219:function(s,a,t){"use strict";t.r(a);var n=[function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("div",{staticClass:"content"},[n("h2",{attrs:{id:"minewtrackerkit开发套件说明文档"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#minewtrackerkit开发套件说明文档","aria-hidden":"true"}},[s._v("#")]),s._v(" MinewTrackerKit开发套件说明文档")]),s._v(" "),n("p",[s._v("本套SDK仅支持基于的nordic52芯片寻物器，"),n("strong",[s._v("与过去的51芯片不兼容")]),s._v("。请仔细阅读此文档以便尽快上手开发。")]),s._v(" "),n("p",[n("strong",[s._v("兼容性说明：过去用过MinewFinderSDK的开发者请注意：MinewFinder与MTTrackerKit互相不兼容，切不可用于同一个项目。")])]),s._v(" "),n("h3",{attrs:{id:"前期工作"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#前期工作","aria-hidden":"true"}},[s._v("#")]),s._v(" 前期工作")]),s._v(" "),n("p",[s._v("此开发套件和过去的MinewFinder有些类似。我们在之前的基础上全面更新了加密算法和设备端稳定性，性能实际表现远远高于51版本的Tracker。")]),s._v(" "),n("p",[s._v("MTTrackerManager为设备管理类，在APP运行时始终是单例。MTTracker是设备实例类，此套件会为每一个设备生成一个MTTracker实例以便于对监听设备和操作设备。")]),s._v(" "),n("p",[s._v("整体设计思路如下图所示：")]),s._v(" "),n("p",[n("img",{attrs:{src:t(191),alt:"设计说明"}})]),s._v(" "),n("p",[s._v("为了区分设备，我们")]),s._v(" "),n("p",[s._v("*MTTrackerManager：*设备管理类，可以扫描周围的Tracker设备，并且可以连接它们，校验它们等。")]),s._v(" "),n("p",[s._v("MTTracker：设备实例类，当Manager发现一个物理设备时，Manager会生成一个Tracker实例，这个实例就对应一个物理设备。")]),s._v(" "),n("h3",{attrs:{id:"开始上手"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#开始上手","aria-hidden":"true"}},[s._v("#")]),s._v(" 开始上手")]),s._v(" "),n("h5",{attrs:{id:"开发环境："}},[n("a",{staticClass:"header-anchor",attrs:{href:"#开发环境：","aria-hidden":"true"}},[s._v("#")]),s._v(" 开发环境：")]),s._v(" "),n("ul",[n("li",[s._v("Android Studio")])]),s._v(" "),n("h5",{attrs:{id:"导入到工程："}},[n("a",{staticClass:"header-anchor",attrs:{href:"#导入到工程：","aria-hidden":"true"}},[s._v("#")]),s._v(" 导入到工程：")]),s._v(" "),n("ol",[n("li",[n("p",[s._v("将开发套件MTTrackerKit.jar文件拷贝到libs目录下，然后在build.gradle中添加依赖。如下图所示：")]),s._v(" "),n("p",[n("img",{attrs:{src:t(192),alt:"添加 jar包"}})])]),s._v(" "),n("li",[n("p",[s._v("AndroidManifest.xml 文件下添加蓝牙权限和相应的组件注册。如下所示：")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[s._v("   "),n("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v("uses"),n("span",{attrs:{class:"token operator"}},[s._v("-")]),s._v("permission android"),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v("name"),n("span",{attrs:{class:"token operator"}},[s._v("=")]),n("span",{attrs:{class:"token string"}},[s._v('"android.permission.ACCESS_COARSE_LOCATION"')]),n("span",{attrs:{class:"token operator"}},[s._v("/")]),n("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("\n   "),n("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v("uses"),n("span",{attrs:{class:"token operator"}},[s._v("-")]),s._v("permission android"),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v("name"),n("span",{attrs:{class:"token operator"}},[s._v("=")]),n("span",{attrs:{class:"token string"}},[s._v('"android.permission.ACCESS_FINE_LOCATION"')]),n("span",{attrs:{class:"token operator"}},[s._v("/")]),n("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("\n   "),n("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v("uses"),n("span",{attrs:{class:"token operator"}},[s._v("-")]),s._v("permission android"),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v("name"),n("span",{attrs:{class:"token operator"}},[s._v("=")]),n("span",{attrs:{class:"token string"}},[s._v('"android.permission.BLUETOOTH"')]),n("span",{attrs:{class:"token operator"}},[s._v("/")]),n("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("\n   "),n("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v("uses"),n("span",{attrs:{class:"token operator"}},[s._v("-")]),s._v("permission android"),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v("name"),n("span",{attrs:{class:"token operator"}},[s._v("=")]),n("span",{attrs:{class:"token string"}},[s._v('"android.permission.BLUETOOTH_ADMIN"')]),n("span",{attrs:{class:"token operator"}},[s._v("/")]),n("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("在Android-6.0以上版本蓝牙扫描需要动态申请地理位置权限，具体如下：")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ContextCompat"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("checkSelfPermission")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token keyword"}},[s._v("this")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" Manifest"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("permission"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ACCESS_COARSE_LOCATION"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n                "),n("span",{attrs:{class:"token operator"}},[s._v("!=")]),s._v(" PackageManager"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("PERMISSION_GRANTED"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            ActivityCompat"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("requestPermissions")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token keyword"}},[s._v("this")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                    "),n("span",{attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{attrs:{class:"token class-name"}},[s._v("String")]),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("Manifest"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("permission"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ACCESS_COARSE_LOCATION"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" PERMISSION_COARSE_LOCATION"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])])])]),s._v(" "),n("h4",{attrs:{id:"开始开发"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#开始开发","aria-hidden":"true"}},[s._v("#")]),s._v(" 开始开发")]),s._v(" "),n("h5",{attrs:{id:"扫描设备"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#扫描设备","aria-hidden":"true"}},[s._v("#")]),s._v(" 扫描设备")]),s._v(" "),n("p",[s._v("首先需要获取到MTTrackerManager的单例，然后检查手机当前的蓝牙状态，接着就可以进行设备扫描了。")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{attrs:{class:"token comment"}},[s._v("// 获取Manager单例 Context ")]),s._v("\nMTTrackerManager manager "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" MTTrackerManager"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("getInstance")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("context"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 手机端当前的蓝牙开关状态")]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("if")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("manager"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("checkBluetoothState "),n("span",{attrs:{class:"token operator"}},[s._v("==")]),s._v(" BluetoothStatePowerOn"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n     "),n("span",{attrs:{class:"token comment"}},[s._v("// 开始进行设备扫描 扫描到设备后会通过接口回调数据。")]),s._v("\n   manager"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("startScan")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("scanTrackerCallback"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n\t\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("p",[s._v("PS：trackers集合里包含的只有"),n("strong",[s._v("未绑定的设备")]),s._v("（下文将会提供绑定相关说明）。")]),s._v(" "),n("h5",{attrs:{id:"绑定校验"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#绑定校验","aria-hidden":"true"}},[s._v("#")]),s._v(" 绑定校验")]),s._v(" "),n("p",[s._v("某个Tracker只有被绑定了才能正常使用，我们建议进行绑定操作时，Tracker与手机的距离不要超过10cm。")]),s._v(" "),n("p",[s._v("基于以前的经验，我们使用了全新的加密算法来保证手机和设备之间通信的安全性。另外，Tracker在出厂时默认密码为空，每个设备在绑定时都需要一个密码，一旦绑定成功，这个Tracker将只接受来自主人手机的连接。")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{attrs:{class:"token comment"}},[s._v("/*\n  manager: MTTrackerManager单例\n*/")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 设置密码,长度必须是8位,可以是大小写字母，数字，特殊符号。")]),s._v("\nmanager"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("setPassword")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('"********"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 开始进行设备绑定验证操作")]),s._v("\nmanager"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("bindingVerify")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("mtTracker"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("connectionStateCallback"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 如果绑定验证成功了，tracker将会被自动添加到manager的bindTrackers数组里，")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 否则说明此设备因为种种原因无法成功绑定。")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("p",[s._v("PS：无法绑定的设备是不能正常使用的。")]),s._v(" "),n("h5",{attrs:{id:"解绑设备"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#解绑设备","aria-hidden":"true"}},[s._v("#")]),s._v(" 解绑设备")]),s._v(" "),n("p",[s._v("如果用户丢失了某个Tracker，或者想把Tracker送给别人。就需要进行解绑操作，严格的来说，除非Tracker丢失了。其它情况下都应该在保持设备与手机连接的状态下进行解绑操作。这是由于Tracker内部记录了当前主人的密码，解绑时需要擦除密码才能保证下一次的正常使用。")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{attrs:{class:"token comment"}},[s._v("/*\n  manager: MTTrackerManager单例\n*/")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 解除设备绑定")]),s._v("\n\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 你想要解除绑定设备的mac地址")]),s._v("\nString mac "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v('"acd498765432"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 解除设备绑定")]),s._v("\nmanager"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("unBindMTTracker")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("mac "),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" operationCallback"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 同样的，操作成功后 回调success为YES，否则为NO。")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("h5",{attrs:{id:"获取设备信息"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#获取设备信息","aria-hidden":"true"}},[s._v("#")]),s._v(" 获取设备信息")]),s._v(" "),n("p",[s._v("你可以通过MTTracker实例获取到对应物理设备的信息，例如蓝牙名称，mac地址，rssi等数据。")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{attrs:{class:"token comment"}},[s._v("// aTracker MTTracker实例")]),s._v("\nString mac "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" mtTracker"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("getMacAddress")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),n("span",{attrs:{class:"token comment"}},[s._v("// mac 地址")]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("int")]),s._v(" rssi "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" mtTracker"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("getRssi")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("   "),n("span",{attrs:{class:"token comment"}},[s._v("// 信号强度")]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("int")]),s._v(" battery "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" mtTracker"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("getBattery")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),n("span",{attrs:{class:"token comment"}},[s._v("// 电池 0～100")]),s._v("\nConnectionState connectionState "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" mtTracker"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("getConnectionState")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),n("span",{attrs:{class:"token comment"}},[s._v("// 设备当前的连接状态")]),s._v("\nTrackerModel name "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" mtTracker"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("getName")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("    "),n("span",{attrs:{class:"token comment"}},[s._v("// 设备型号")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("h5",{attrs:{id:"呼叫设备"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#呼叫设备","aria-hidden":"true"}},[s._v("#")]),s._v(" 呼叫设备")]),s._v(" "),n("p",[s._v("通过我们提供的APi，可以对设备进行呼叫，当然是在设备保持连接的状态下。")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{attrs:{class:"token comment"}},[s._v("// mtTracker MTTracker实例")]),s._v("\n\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 当ring 为true的时候是让设备响铃，为false的时候是停止设备响铃。")]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" ring "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token boolean"}},[s._v("true")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 切换设备响铃状态")]),s._v("\nmtTracker"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("switchBellStatus")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ring"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{attrs:{class:"token class-name"}},[s._v("OperationCallback")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                        "),n("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n                        "),n("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("onOperation")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" success"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" TrackerException mtException"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                            "),n("span",{attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("success"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                                "),n("span",{attrs:{class:"token function"}},[s._v("Log")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('"tracker"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{attrs:{class:"token string"}},[s._v('"响铃状态切换成功。"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  \n                            "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n                        "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n                    "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("h5",{attrs:{id:"配置设备断开时的事件处理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#配置设备断开时的事件处理","aria-hidden":"true"}},[s._v("#")]),s._v(" 配置设备断开时的事件处理")]),s._v(" "),n("p",[s._v("Tracker在断开时会有相应的事件处理，比如断开响铃以告知用户等。")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{attrs:{class:"token comment"}},[s._v("// mtTracker MTTracker实例")]),s._v("\n\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 为true表示Tracker断开时将会响铃，否则不响铃")]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" alert "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token boolean"}},[s._v("true")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nmtTracker"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("setLoseAlert")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("alert"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{attrs:{class:"token class-name"}},[s._v("OperationCallback")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),n("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n                    "),n("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("onOperation")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" success"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" TrackerException mtException"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                        "),n("span",{attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token operator"}},[s._v("!")]),s._v("success"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                            Log"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("e")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('"tag"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v('"发送设备响铃命令失败"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                        "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n                    "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n                "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("h5",{attrs:{id:"接受来自设备的事件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#接受来自设备的事件","aria-hidden":"true"}},[s._v("#")]),s._v(" 接受来自设备的事件")]),s._v(" "),n("p",[s._v("手机可以接受来自设备的事件，需要做好相关监听。")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{attrs:{class:"token comment"}},[s._v("// mtTracker MTTracker实例")]),s._v("\n\nmtTracker"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("setReceiveListener")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{attrs:{class:"token class-name"}},[s._v("ReceiveListener")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),n("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n            "),n("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("onReceive")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ReceiveIndex receiveIndex"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                 "),n("span",{attrs:{class:"token comment"}},[s._v("// Tracker上的按钮被按下，")]),s._v("\n                "),n("span",{attrs:{class:"token comment"}},[s._v("// 你可以在这里处理拍照，手机端报警等操作。")]),s._v("\n                "),n("span",{attrs:{class:"token keyword"}},[s._v("if")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("receiveIndex "),n("span",{attrs:{class:"token operator"}},[s._v("==")]),s._v(" InstrucIndex_ButtonPushed"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                   Log"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("v")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('"tracker"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{attrs:{class:"token string"}},[s._v('"按下了设备上的按钮。"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n                "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nmtTracker"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("setTrackerListener")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{attrs:{class:"token class-name"}},[s._v("MTTrackerListener")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),n("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n            "),n("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("onUpdateTracker")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("MTTracker mtTracker"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),n("span",{attrs:{class:"token comment"}},[s._v("/*\n                  设备的属性或状态更新了，你可以刷新UI界面了。\n                */")]),s._v("\n            "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n            "),n("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n            "),n("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("onUpdateConnectionState")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ConnectionState connectionState"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t\t\t"),n("span",{attrs:{class:"token comment"}},[s._v("// 监听设备连接状态变化")]),s._v("\n              \t\n            "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br")])]),n("h5",{attrs:{id:"重启app后的相关处理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#重启app后的相关处理","aria-hidden":"true"}},[s._v("#")]),s._v(" 重启APP后的相关处理")]),s._v(" "),n("p",[s._v("你可能会发现，SDK的操作只涉及到内存数据，如果APP被Kill掉，之前的绑定数据什么的就失效了。所以需要你自行做数据永久化存储，比如当前用户的绑定密码，每个已绑定设备的Mac地址等。")]),s._v(" "),n("p",[s._v("当然，我们也提供了一些APi用于APP恢复后的相关操作。")]),s._v(" "),n("p",[s._v("以下代码均在APP重新运行时处理的。")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{attrs:{class:"token comment"}},[s._v("// 获取一个已绑定Tracker的实例")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("/*\n  SDK会智能解析mac地址并生成一个MTTracker实例，如果Tracker在手机附近正常工作。SDK会自动处理连接配置等的相关操作。\n  唯一需要注意的就是需要保证所提供的mac地址是已绑定的，就是使用过 “bindingVerify(MTTracker mtTracker, ConnectionStateCallback connectionStateCallback)” 方法并且获得了成功的回调。\n  在获取到MTTracker实例的同时，此Tracker实例也被添加到BindTrackers数组里。\n*/")]),s._v("\nMTTracker bindTracker "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" manager"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("bindMTTracker")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("macAddress"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("h5",{attrs:{id:"关于用户切换"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#关于用户切换","aria-hidden":"true"}},[s._v("#")]),s._v(" 关于用户切换")]),s._v(" "),n("p",[s._v("有的时候可能出现当前用户注销自己的登录，然后登入另外一个账号，此时就需要从Manager中移除已经绑定的设备，然后加载新用户的已绑定设备。")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{attrs:{class:"token comment"}},[s._v("// 移除当前用户的绑定设备")]),s._v("\nmanager"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("unBindMTTracker")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("String macAddress"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" OperationCallback operationCallback"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 设置密码")]),s._v("\nmanager"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("setPassword")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('"********"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  \n"),n("span",{attrs:{class:"token comment"}},[s._v("/*\n     此处加载新用户的绑定设备Mac地址，假设为数组：bindMacs\n*/")]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("for")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token keyword"}},[s._v("int")]),s._v(" i "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token number"}},[s._v("0")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i "),n("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v(" bindMacs"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("length"),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i "),n("span",{attrs:{class:"token operator"}},[s._v("++")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n   "),n("span",{attrs:{class:"token comment"}},[s._v("// tracker就是新用户的已绑定设备")]),s._v("\n   MTTracker bindTracker "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" manager"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("bindMTTracker")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("bindMacs"),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("i"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("h4",{attrs:{id:"高级操作"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#高级操作","aria-hidden":"true"}},[s._v("#")]),s._v(" !!!高级操作")]),s._v(" "),n("p",[s._v("此部分APi属于高级APi，我们把这部分开放给高级开发。除非你明白这些操作的将会导致什么样子的结果，否则不要轻易尝试。")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{attrs:{class:"token comment"}},[s._v("// mtTracker MTTracker实例")]),s._v("\n\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 修改设备的断开延迟。")]),s._v("\n\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 这个参数指的是在断开响铃的状态下，设备端将等待delay秒后开始发出声音。")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 需要注意，它的范围是1s-7s，如果设置的数据太小将会出现误报的问题。")]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("int")]),s._v(" delay "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token number"}},[s._v("7")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 写入断开延迟")]),s._v("\nmtTracker"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("setDisAlarmDelay")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("delay"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{attrs:{class:"token class-name"}},[s._v("OperationCallback")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),n("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n            "),n("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("onOperation")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" success"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" TrackerException mtException"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),n("span",{attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token operator"}},[s._v("!")]),s._v("success"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    Log"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("e")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('"mtag"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v('"sendDisAlarmDelaytoDeviceFail"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 这个参数指的是设备的断开距离，设备将在配置的距离断开连接。")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 例如：如果配置的是“远”，设备将在30米左右断开连接。“中”：将在20米左右，“近”，将在10米左右。")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 需要注意的是，上述30米/20米/10米是举例值，实际使用中受限于环境")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 有远/中/近三档可选，默认情况下是“远”。")]),s._v("\nDistanceLevel level "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" PowerLevel_Far"),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nmtTracker"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("setDisAlarmDistance")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("level"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{attrs:{class:"token class-name"}},[s._v("OperationCallback")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),n("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n                "),n("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("onOperation")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" success"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" TrackerException mtException"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),n("span",{attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token operator"}},[s._v("!")]),s._v("success"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                        Log"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("e")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('"mtag"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v('"sendDisAlarmDistancetoDeviceFail"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                    "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n                "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br")])])])}],e=t(0),r=Object(e.a)({},function(){this.$createElement;this._self._c;return this._m(0)},n,!1,null,null,null);r.options.__file="Android_MinewTrackerKit_Software_Development_Kit_Guide.md";a.default=r.exports}}]);