<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>BeaconPlus iOS Software Development Kit Guide | SDK &amp; API</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="SDKs and APIs for MBeacon, BeaconPlus, MSensor, etc.">
    
    <link rel="preload" href="/assets/css/0.styles.44c319ae.css" as="style"><link rel="preload" href="/assets/js/app.34ff7344.js" as="script"><link rel="preload" href="/assets/js/2.31f2ce87.js" as="script"><link rel="preload" href="/assets/js/1.a9521bca.js" as="script"><link rel="preload" href="/assets/js/21.3cb3cefa.js" as="script"><link rel="prefetch" href="/assets/js/100.84baab85.js"><link rel="prefetch" href="/assets/js/101.7c09b580.js"><link rel="prefetch" href="/assets/js/102.4f3ba6a6.js"><link rel="prefetch" href="/assets/js/103.36141cf3.js"><link rel="prefetch" href="/assets/js/104.6be6237e.js"><link rel="prefetch" href="/assets/js/105.d0a9d9cd.js"><link rel="prefetch" href="/assets/js/106.b405692e.js"><link rel="prefetch" href="/assets/js/107.664c760e.js"><link rel="prefetch" href="/assets/js/108.45a509fd.js"><link rel="prefetch" href="/assets/js/109.0edef8bf.js"><link rel="prefetch" href="/assets/js/11.b61f3949.js"><link rel="prefetch" href="/assets/js/110.c385b9bd.js"><link rel="prefetch" href="/assets/js/111.52111840.js"><link rel="prefetch" href="/assets/js/112.31b23db6.js"><link rel="prefetch" href="/assets/js/113.c1d220a8.js"><link rel="prefetch" href="/assets/js/114.1e231e2b.js"><link rel="prefetch" href="/assets/js/115.9d79ab8e.js"><link rel="prefetch" href="/assets/js/116.5f0ee7c3.js"><link rel="prefetch" href="/assets/js/117.1d875d61.js"><link rel="prefetch" href="/assets/js/118.2462fd13.js"><link rel="prefetch" href="/assets/js/119.4856f7c6.js"><link rel="prefetch" href="/assets/js/12.19e2c148.js"><link rel="prefetch" href="/assets/js/120.26b0cfed.js"><link rel="prefetch" href="/assets/js/121.9fa8feb3.js"><link rel="prefetch" href="/assets/js/122.565dd746.js"><link rel="prefetch" href="/assets/js/123.149974a7.js"><link rel="prefetch" href="/assets/js/124.b0057d70.js"><link rel="prefetch" href="/assets/js/125.08c340d8.js"><link rel="prefetch" href="/assets/js/13.bf35e539.js"><link rel="prefetch" href="/assets/js/14.478ed167.js"><link rel="prefetch" href="/assets/js/15.83a1a568.js"><link rel="prefetch" href="/assets/js/16.f27bc1db.js"><link rel="prefetch" href="/assets/js/17.e90a58a0.js"><link rel="prefetch" href="/assets/js/18.f7a469a3.js"><link rel="prefetch" href="/assets/js/19.0f7527b6.js"><link rel="prefetch" href="/assets/js/20.d1fa983b.js"><link rel="prefetch" href="/assets/js/22.938c9457.js"><link rel="prefetch" href="/assets/js/23.76e99741.js"><link rel="prefetch" href="/assets/js/24.7c2798c6.js"><link rel="prefetch" href="/assets/js/25.7a2c4183.js"><link rel="prefetch" href="/assets/js/26.144632a3.js"><link rel="prefetch" href="/assets/js/27.bbba3e2f.js"><link rel="prefetch" href="/assets/js/28.94e3a977.js"><link rel="prefetch" href="/assets/js/29.32b8b022.js"><link rel="prefetch" href="/assets/js/3.4daa0608.js"><link rel="prefetch" href="/assets/js/30.7666f34e.js"><link rel="prefetch" href="/assets/js/31.efc60d8c.js"><link rel="prefetch" href="/assets/js/32.8f2bb9b7.js"><link rel="prefetch" href="/assets/js/33.0ac7306b.js"><link rel="prefetch" href="/assets/js/34.b05cd920.js"><link rel="prefetch" href="/assets/js/35.13f1bf76.js"><link rel="prefetch" href="/assets/js/36.b42f0e74.js"><link rel="prefetch" href="/assets/js/37.cdabc070.js"><link rel="prefetch" href="/assets/js/38.e4485167.js"><link rel="prefetch" href="/assets/js/39.f912f646.js"><link rel="prefetch" href="/assets/js/4.54dd87c7.js"><link rel="prefetch" href="/assets/js/40.39b7a973.js"><link rel="prefetch" href="/assets/js/41.9c3be8b2.js"><link rel="prefetch" href="/assets/js/42.182ff86b.js"><link rel="prefetch" href="/assets/js/43.8acbd117.js"><link rel="prefetch" href="/assets/js/44.68d56362.js"><link rel="prefetch" href="/assets/js/45.db8a393e.js"><link rel="prefetch" href="/assets/js/46.e01d23ab.js"><link rel="prefetch" href="/assets/js/47.61660617.js"><link rel="prefetch" href="/assets/js/48.f85a4831.js"><link rel="prefetch" href="/assets/js/49.e6e930f7.js"><link rel="prefetch" href="/assets/js/5.17cd0efc.js"><link rel="prefetch" href="/assets/js/50.e2d00833.js"><link rel="prefetch" href="/assets/js/51.d1194bb4.js"><link rel="prefetch" href="/assets/js/52.4053d2b0.js"><link rel="prefetch" href="/assets/js/53.9b11c529.js"><link rel="prefetch" href="/assets/js/54.0d451237.js"><link rel="prefetch" href="/assets/js/55.fdf978f1.js"><link rel="prefetch" href="/assets/js/56.527a09c4.js"><link rel="prefetch" href="/assets/js/57.c3ee2482.js"><link rel="prefetch" href="/assets/js/58.03e7ac11.js"><link rel="prefetch" href="/assets/js/59.fb0641ef.js"><link rel="prefetch" href="/assets/js/6.4693f4d7.js"><link rel="prefetch" href="/assets/js/60.7f360777.js"><link rel="prefetch" href="/assets/js/61.71e5e7f1.js"><link rel="prefetch" href="/assets/js/62.bc9f001f.js"><link rel="prefetch" href="/assets/js/63.1c0e5f82.js"><link rel="prefetch" href="/assets/js/64.a6de6d85.js"><link rel="prefetch" href="/assets/js/65.475b228c.js"><link rel="prefetch" href="/assets/js/66.2845d8d8.js"><link rel="prefetch" href="/assets/js/67.8393d034.js"><link rel="prefetch" href="/assets/js/68.f28b1d17.js"><link rel="prefetch" href="/assets/js/69.9a62578c.js"><link rel="prefetch" href="/assets/js/7.28c424b4.js"><link rel="prefetch" href="/assets/js/70.5a0a876a.js"><link rel="prefetch" href="/assets/js/71.a4971a34.js"><link rel="prefetch" href="/assets/js/72.2736ddd7.js"><link rel="prefetch" href="/assets/js/73.f23a38b0.js"><link rel="prefetch" href="/assets/js/74.72100acf.js"><link rel="prefetch" href="/assets/js/75.223d11ae.js"><link rel="prefetch" href="/assets/js/76.c5aeeac3.js"><link rel="prefetch" href="/assets/js/77.654bb823.js"><link rel="prefetch" href="/assets/js/78.f87f0380.js"><link rel="prefetch" href="/assets/js/79.66b75a8e.js"><link rel="prefetch" href="/assets/js/8.957badf2.js"><link rel="prefetch" href="/assets/js/80.e82e60be.js"><link rel="prefetch" href="/assets/js/81.ff7393fe.js"><link rel="prefetch" href="/assets/js/82.32258b08.js"><link rel="prefetch" href="/assets/js/83.f7eefebe.js"><link rel="prefetch" href="/assets/js/84.de090cb5.js"><link rel="prefetch" href="/assets/js/85.3f4b4d42.js"><link rel="prefetch" href="/assets/js/86.3b6d2577.js"><link rel="prefetch" href="/assets/js/87.d750b44e.js"><link rel="prefetch" href="/assets/js/88.2eb6d962.js"><link rel="prefetch" href="/assets/js/89.aa71fba8.js"><link rel="prefetch" href="/assets/js/90.d3873577.js"><link rel="prefetch" href="/assets/js/91.51168428.js"><link rel="prefetch" href="/assets/js/92.c3dfe4bd.js"><link rel="prefetch" href="/assets/js/93.dece2ab2.js"><link rel="prefetch" href="/assets/js/94.051b35f6.js"><link rel="prefetch" href="/assets/js/95.aab71c64.js"><link rel="prefetch" href="/assets/js/96.11416d90.js"><link rel="prefetch" href="/assets/js/97.f035bcde.js"><link rel="prefetch" href="/assets/js/98.99f391e3.js"><link rel="prefetch" href="/assets/js/99.2683732e.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.0053ac3f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.44c319ae.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="https://www.minew.com/" target="_blank" class="home-link"><img src="/header-logo.png" alt="SDK &amp; API" class="logo"> <span class="site-name can-hide"></span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="iOS" class="dropdown-title"><span class="title">iOS</span> <span class="arrow down"></span></button> <button type="button" aria-label="iOS" class="mobile-dropdown-title"><span class="title">iOS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/iOS/iOS_MTSensorKit_Software_Development_Kit_Guide.html" class="nav-link">
  Sensor
</a></li><li class="dropdown-item"><!----> <a href="/iOS/iOS_MTSensorV3Kit_Software_Development_Kit_Guide.html" class="nav-link">
  Sensor-V3
</a></li><li class="dropdown-item"><!----> <a href="/iOS/iOS_MTIndustrialSensorKit_Software_Development_Kit_Guide.html" class="nav-link">
  MTIndustrialSensorKit
</a></li><li class="dropdown-item"><!----> <a href="/iOS/iOS_MTIndustrialSensorKit_Radar_Development_Kit_Guide.html" class="nav-link">
  RadarSensorKit
</a></li><li class="dropdown-item"><!----> <a href="/iOS/iOS_MTIndustrialSensorKit_mbt02_Development_Kit_Guide.html" class="nav-link">
  Connectable Asset Tag
</a></li><li class="dropdown-item"><!----> <a href="/iOS/iOS_MTIndustrialSensorKit_mst03_Software_Development_Kit_Guide.html" class="nav-link">
  Mst03SensorKit
</a></li><li class="dropdown-item"><!----> <a href="/iOS/iOS_MTIndustrialSensorKit_pt100_Software_Development_Kit_Guide.html" class="nav-link">
  PT100SensorKit
</a></li><li class="dropdown-item"><!----> <a href="/iOS/iOS_BeaconPlus_Software_Development_Kit_Guide.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  BeaconSET Plus
</a></li><li class="dropdown-item"><!----> <a href="/iOS/iOS_MinewTrackerKit_Software_Development_Kit_Guide.html" class="nav-link">
  TrackerKit
</a></li><li class="dropdown-item"><!----> <a href="/iOS/iOS_MinewModuleKit_Software_Development_Kit_Guide.html" class="nav-link">
  ModuleKit
</a></li><li class="dropdown-item"><!----> <a href="/iOS/iOS_BeaconAdmin_Software_Development_Kit_Guide.html" class="nav-link">
  BeaconAdmin
</a></li><li class="dropdown-item"><!----> <a href="/iOS/iOS_MinewToolsKit_Software_Development_Kit_Guide.html" class="nav-link">
  Tools
</a></li><li class="dropdown-item"><!----> <a href="/iOS/iOS_GatewayConfig_Develop_Kit_EN.html" class="nav-link">
  GatewayConfig
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Android" class="dropdown-title"><span class="title">Android</span> <span class="arrow down"></span></button> <button type="button" aria-label="Android" class="mobile-dropdown-title"><span class="title">Android</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Android/Android_MinewSensorKit_Software_Development_Kit_Guide.html" class="nav-link">
  Sensor
</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_MinewSensorKit_v3_Software_Development_Kit_Guide.html" class="nav-link">
  Sensor-V3
</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_MinewSensorKit_v3_MTIndustrialSensorKit_Software_Development_Kit_Guide.html" class="nav-link">
  MTIndustrialSensorKit
</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_MinewSensorKit_v3_RadarSensorKit_Software_Development_Kit_Guide.html" class="nav-link">
  RadarSensorKit
</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_MinewSensorKit_v3_Mst03_Software_Development_Kit_Guide.html" class="nav-link">
  Mst03SensorKit
</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_MinewSensorKit_v3_S4_Software_Development_Kit_Guide.html" class="nav-link">
  S4V3SensorKit
</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_MinewSensorKit_v3_Mst01_PT100_Software_Development_Kit_Guide.html" class="nav-link">
  MST01_PT100_V3SensorKit
</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_MinewSensorKit_v3_MTB02_Software_Development_Kit_Guide.html" class="nav-link">
  MTB02_V3SensorKit
</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_BeaconPlus_Software_Development_Kit_Guide.html" class="nav-link">
  BeaconSET Plus
</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_MinewTrackerKit_Software_Development_Kit_Guide.html" class="nav-link">
  TrackerKit
</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_MinewModuleKit_Software_Development_Kit_Guide.html" class="nav-link">
  ModuleKit
</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_BeaconAdmin_Software_Development_Kit_Guide.html" class="nav-link">
  BeaconAdmin
</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_MinewToolsKit_Software_Development_Kit_Guide.html" class="nav-link">
  Tools
</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_GatewayConfig_Develop_Kit_EN.html" class="nav-link">
  GatewayConfig
</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_MinewSensorKit_v3_Mbt02_version2_Software_Development_Kit_Guide.html" class="nav-link">
  Repeater
</a></li><li class="dropdown-item"><!----> <a href="/iOS/Android/Android_MinewSensorKit_v3_Mwc01_Software_Development_Kit_Guide.html" class="nav-link">
  Badge Bluetooth® Repeater
</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_MinewSensorKit_v3_Mbt02_Connectable_Asset_Tag_Software_Development_Kit_Guide.html" class="nav-link">
  Connectable Asset Tag
</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_MinewSensorKit_v3_MTB06_Software_Development_Kit_Guide.html" class="nav-link">
  MTB06_V3SensorKit
</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_MinewMWC03Kit_Software_Development_Kit_Guide.html" class="nav-link">
  MWC03Kit
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Language</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Language</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/iOS/iOS_BeaconPlus_Software_Development_Kit_Guide.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_BeaconPlus_Software_Development_Kit_Guide.html" class="nav-link">
  简体中文
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="iOS" class="dropdown-title"><span class="title">iOS</span> <span class="arrow down"></span></button> <button type="button" aria-label="iOS" class="mobile-dropdown-title"><span class="title">iOS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/iOS/iOS_MTSensorKit_Software_Development_Kit_Guide.html" class="nav-link">
  Sensor
</a></li><li class="dropdown-item"><!----> <a href="/iOS/iOS_MTSensorV3Kit_Software_Development_Kit_Guide.html" class="nav-link">
  Sensor-V3
</a></li><li class="dropdown-item"><!----> <a href="/iOS/iOS_MTIndustrialSensorKit_Software_Development_Kit_Guide.html" class="nav-link">
  MTIndustrialSensorKit
</a></li><li class="dropdown-item"><!----> <a href="/iOS/iOS_MTIndustrialSensorKit_Radar_Development_Kit_Guide.html" class="nav-link">
  RadarSensorKit
</a></li><li class="dropdown-item"><!----> <a href="/iOS/iOS_MTIndustrialSensorKit_mbt02_Development_Kit_Guide.html" class="nav-link">
  Connectable Asset Tag
</a></li><li class="dropdown-item"><!----> <a href="/iOS/iOS_MTIndustrialSensorKit_mst03_Software_Development_Kit_Guide.html" class="nav-link">
  Mst03SensorKit
</a></li><li class="dropdown-item"><!----> <a href="/iOS/iOS_MTIndustrialSensorKit_pt100_Software_Development_Kit_Guide.html" class="nav-link">
  PT100SensorKit
</a></li><li class="dropdown-item"><!----> <a href="/iOS/iOS_BeaconPlus_Software_Development_Kit_Guide.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  BeaconSET Plus
</a></li><li class="dropdown-item"><!----> <a href="/iOS/iOS_MinewTrackerKit_Software_Development_Kit_Guide.html" class="nav-link">
  TrackerKit
</a></li><li class="dropdown-item"><!----> <a href="/iOS/iOS_MinewModuleKit_Software_Development_Kit_Guide.html" class="nav-link">
  ModuleKit
</a></li><li class="dropdown-item"><!----> <a href="/iOS/iOS_BeaconAdmin_Software_Development_Kit_Guide.html" class="nav-link">
  BeaconAdmin
</a></li><li class="dropdown-item"><!----> <a href="/iOS/iOS_MinewToolsKit_Software_Development_Kit_Guide.html" class="nav-link">
  Tools
</a></li><li class="dropdown-item"><!----> <a href="/iOS/iOS_GatewayConfig_Develop_Kit_EN.html" class="nav-link">
  GatewayConfig
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Android" class="dropdown-title"><span class="title">Android</span> <span class="arrow down"></span></button> <button type="button" aria-label="Android" class="mobile-dropdown-title"><span class="title">Android</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Android/Android_MinewSensorKit_Software_Development_Kit_Guide.html" class="nav-link">
  Sensor
</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_MinewSensorKit_v3_Software_Development_Kit_Guide.html" class="nav-link">
  Sensor-V3
</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_MinewSensorKit_v3_MTIndustrialSensorKit_Software_Development_Kit_Guide.html" class="nav-link">
  MTIndustrialSensorKit
</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_MinewSensorKit_v3_RadarSensorKit_Software_Development_Kit_Guide.html" class="nav-link">
  RadarSensorKit
</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_MinewSensorKit_v3_Mst03_Software_Development_Kit_Guide.html" class="nav-link">
  Mst03SensorKit
</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_MinewSensorKit_v3_S4_Software_Development_Kit_Guide.html" class="nav-link">
  S4V3SensorKit
</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_MinewSensorKit_v3_Mst01_PT100_Software_Development_Kit_Guide.html" class="nav-link">
  MST01_PT100_V3SensorKit
</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_MinewSensorKit_v3_MTB02_Software_Development_Kit_Guide.html" class="nav-link">
  MTB02_V3SensorKit
</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_BeaconPlus_Software_Development_Kit_Guide.html" class="nav-link">
  BeaconSET Plus
</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_MinewTrackerKit_Software_Development_Kit_Guide.html" class="nav-link">
  TrackerKit
</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_MinewModuleKit_Software_Development_Kit_Guide.html" class="nav-link">
  ModuleKit
</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_BeaconAdmin_Software_Development_Kit_Guide.html" class="nav-link">
  BeaconAdmin
</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_MinewToolsKit_Software_Development_Kit_Guide.html" class="nav-link">
  Tools
</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_GatewayConfig_Develop_Kit_EN.html" class="nav-link">
  GatewayConfig
</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_MinewSensorKit_v3_Mbt02_version2_Software_Development_Kit_Guide.html" class="nav-link">
  Repeater
</a></li><li class="dropdown-item"><!----> <a href="/iOS/Android/Android_MinewSensorKit_v3_Mwc01_Software_Development_Kit_Guide.html" class="nav-link">
  Badge Bluetooth® Repeater
</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_MinewSensorKit_v3_Mbt02_Connectable_Asset_Tag_Software_Development_Kit_Guide.html" class="nav-link">
  Connectable Asset Tag
</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_MinewSensorKit_v3_MTB06_Software_Development_Kit_Guide.html" class="nav-link">
  MTB06_V3SensorKit
</a></li><li class="dropdown-item"><!----> <a href="/Android/Android_MinewMWC03Kit_Software_Development_Kit_Guide.html" class="nav-link">
  MWC03Kit
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Language</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Language</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/iOS/iOS_BeaconPlus_Software_Development_Kit_Guide.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/iOS/iOS_BeaconPlus_Software_Development_Kit_Guide.html" class="nav-link">
  简体中文
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>BeaconPlus iOS Software Development Kit Guide</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/iOS/iOS_BeaconPlus_Software_Development_Kit_Guide.html#design-instructions" class="sidebar-link">Design instructions</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/iOS/iOS_BeaconPlus_Software_Development_Kit_Guide.html#overall-structure" class="sidebar-link">Overall structure</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/iOS/iOS_BeaconPlus_Software_Development_Kit_Guide.html#get-started" class="sidebar-link">Get Started</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/iOS/iOS_BeaconPlus_Software_Development_Kit_Guide.html#prepare" class="sidebar-link">Prepare</a></li><li class="sidebar-sub-header"><a href="/iOS/iOS_BeaconPlus_Software_Development_Kit_Guide.html#import-to-project" class="sidebar-link">Import to Project</a></li><li class="sidebar-sub-header"><a href="/iOS/iOS_BeaconPlus_Software_Development_Kit_Guide.html#start-developing" class="sidebar-link">Start Developing</a></li><li class="sidebar-sub-header"><a href="/iOS/iOS_BeaconPlus_Software_Development_Kit_Guide.html#other-related-configurations-of-the-vibration-sensor" class="sidebar-link">Other related configurations of the vibration sensor</a></li><li class="sidebar-sub-header"><a href="/iOS/iOS_BeaconPlus_Software_Development_Kit_Guide.html#set-broadcast-rate" class="sidebar-link">Set broadcast rate</a></li><li class="sidebar-sub-header"><a href="/iOS/iOS_BeaconPlus_Software_Development_Kit_Guide.html#set-the-parameter-configuration-items-of-the-configurable-firmware-of-the-acc-sensor" class="sidebar-link">Set the parameter configuration items of the configurable firmware of the Acc sensor</a></li></ul></li><li><a href="/iOS/iOS_BeaconPlus_Software_Development_Kit_Guide.html#notes" class="sidebar-link">Notes</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/iOS/iOS_BeaconPlus_Software_Development_Kit_Guide.html#other" class="sidebar-link">Other</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/iOS/iOS_BeaconPlus_Software_Development_Kit_Guide.html#change-log" class="sidebar-link">Change log</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="beaconplus-ios-software-development-kit-guide"><a href="#beaconplus-ios-software-development-kit-guide" class="header-anchor">#</a> BeaconPlus iOS Software Development Kit Guide</h1> <ul><li><strong>Updating…</strong></li></ul> <p>This SDK only support devices based on miniBeaconPlus firmware, not supporting products produced by other companies anymore. BeaconSET+ SDK support more feature than BeaconSET SDK. We encountered some issues in the development process, So, please read this document carefully in order to help you get started as soon as possible. At the same time, this document will also inform the notes and issues.</p> <p>Please read the part of this document which you need,  part 1 we will explain the architecture of this SDK, part 2 will help developers to get started, part 3 will explain notes in your developing progress, part 4 you can get error codes and descriptions.</p> <h2 id="design-instructions"><a href="#design-instructions" class="header-anchor">#</a> Design instructions</h2> <p>We divide the communications between SDK and devices into two stages: Scanning stage, Connection stage. For ease of understanding, let's take a look at the related classes and the relationships between them.</p> <p><strong>MTCentralManager:</strong> global manager, check system's bluetooth status, listen status changes, the most important is scan and connect to devices;</p> <p><strong>MTPeripheral:</strong> instance of devices, MTCentralManager will create an MTPeripheral instance while it found a physical device, a device corresponds to an instance. every MTPeripheral instance has a MTFrameHandler property and a MTConnectionHandler property(These two properties are explained below);</p> <p><strong>MTFrameHandler:</strong> Advertisement frame analysis, it can analyze all frames from advertisement data of a device. in other words, it's the core of the scanning stage;</p> <p><strong>MTConnectionHandler:</strong> connection Operator. this class control all the operation of device in connection stage.</p> <p><strong>MTSensorHandler:</strong> sensor Operator, this class control all the sensor operation of device in connection stage.</p> <p>**MinewFrame:**data frame, every minewframe(or subclass) instance corresponds to a data frame, usually created by &quot;MTFrameHandler&quot;, if a device advertises mutiple data frames(such as iBeacon, UID, URL) &quot;MTFrameHandler&quot; will create multiple corresponding MinewFrame instances.</p> <p><strong>MTOTAManager:</strong> OTA, use this class for update device's firmware only.</p> <h2 id="overall-structure"><a href="#overall-structure" class="header-anchor">#</a> Overall structure</h2> <p><img src="/assets/img/BeaconSET+.3b64ceba.png" alt="BeaconSET+"></p> <h4 id="advertisement-stage"><a href="#advertisement-stage" class="header-anchor">#</a> Advertisement Stage</h4> <p>in this stage, <strong>MTCentralManager</strong> will scan and analyze the advertisement data of miniBeaconPlus devices, <strong>MTCentralManager</strong> will create <strong>&quot;MTPeripheral&quot;</strong> instance for every physical devices, developers can get all advertisement data by its <strong>MTFrameHandler</strong> property.</p> <h4 id="connection-stage"><a href="#connection-stage" class="header-anchor">#</a> Connection Stage</h4> <p>After a <strong>MTPeripheral</strong> connected, developer can make some changes of the device by <strong>MTConnectionHandler</strong>(a Property of <strong>MTPeripheral</strong> instance).</p> <h4 id="ota-operations"><a href="#ota-operations" class="header-anchor">#</a> OTA Operations</h4> <p>In general, OTA operations is complicated, so we encapsulates the <strong>MTOTAManager</strong> to perform firmware update operations, please note developer can update devices only in connection status.</p> <h2 id="get-started"><a href="#get-started" class="header-anchor">#</a> Get Started</h2> <h3 id="prepare"><a href="#prepare" class="header-anchor">#</a> Prepare</h3> <h4 id="development-environment"><a href="#development-environment" class="header-anchor">#</a> Development environment:</h4> <ul><li><strong>Xcode9+</strong>， due to the DFU and Zip Framework based on Swift4.0, so please use Xcode9 or high version to develop;</li> <li><strong>iOS8</strong>, we limit the minimum iOS system version to 8.0;</li></ul> <h3 id="import-to-project"><a href="#import-to-project" class="header-anchor">#</a> Import to Project</h3> <h4 id="manually"><a href="#manually" class="header-anchor">#</a> Manually</h4> <ol><li><p>copy the framework files to your project folder，include <strong>&quot;MTBeaconPlus.framework&quot;</strong>, <strong>&quot;iOSDFULibrary.framework&quot;</strong>, <strong>&quot;Zip.framework&quot;</strong>, then add them to your project, make sure the <strong>&quot;target&quot;</strong> is checked. as the screenshot below:      <img src="/assets/img/add_frameworks.8a932d1c.png" alt="add frameworks"></p></li> <li><p>find: <strong>&quot;Target&quot;</strong> -&gt; <strong>General</strong> -&gt; <strong>Embedded Binaries</strong>, click the <strong>&quot;+&quot;</strong> below, add that 3 framework files. at the same time, make sure add them to <strong>&quot;Linked Frameworks and Librarys&quot;</strong>, as the screenshot blew:</p> <p><img src="/assets/img/make_sure_frameworks.d4466176.png" alt="make sure frameworks"></p></li> <li><p>*about using swift, the developer should add a <strong>&quot;Objective C BridgingHeader.h&quot;</strong> file to the project(please do this by yourself), then add <strong>&quot;import &lt; MTBeaconPlus/MTBeaconPlus.h &gt;&quot;</strong> to the file.</p></li> <li><p>*using Objective-C, find: “Target” -&gt; Building Settings -&gt; Always Embed Swift Standard Libraries&quot; ,then set yes</p></li> <li><p>!!!on iOS 10 and above, Apple add authority  control of bluetooth, you need add the string to &quot;info.plist&quot; file of your project: <em>Privacy - Bluetooth Peripheral Usage Description</em> - <em>&quot;your description&quot;</em>. as the screenshot below.</p> <p><img src="/assets/img/bp_access.795e088e.png" alt="bp_access"></p> <ol start="6"><li>!!! In iOS13 and above, Apple added permission restrictions on Bluetooth APi. You need to add a string to the project's info.plist file: Privacy-Bluetooth Always Usage Description-&quot;Your usage description&quot;.</li></ol></li></ol> <h3 id="start-developing"><a href="#start-developing" class="header-anchor">#</a> Start Developing</h3> <h5 id="get-sharedinstance-of-manager"><a href="#get-sharedinstance-of-manager" class="header-anchor">#</a> Get sharedInstance of Manager</h5> <p>First of all, the developer should get the sharedInstance of Manager:</p> <div class="language-objc line-numbers-mode"><pre class="language-objc"><code><span class="token comment">// get sharedInstance</span>
MTCentralManager <span class="token operator">*</span>manager <span class="token operator">=</span> <span class="token punctuation">[</span>MTCentralManager sharedInstance<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// listen the change of iPhone bluetooth</span>
<span class="token comment">// *** also get from &quot;state&quot; property.</span>
<span class="token comment">// *** this SDK will work normally only while state == PowerStatePoweredOn!</span>
manager<span class="token punctuation">.</span>stateBlock <span class="token operator">=</span> <span class="token operator">^</span><span class="token punctuation">(</span>PowerState state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">&quot;current bluetooth state：%d&quot;</span><span class="token punctuation">,</span>state<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h5 id="scan-devices"><a href="#scan-devices" class="header-anchor">#</a> Scan devices</h5> <p>start scanning task to find devices around you, then you can get their advertisement content, connect to device and change parsameters.</p> <div class="language-objc line-numbers-mode"><pre class="language-objc"><code><span class="token comment">/*
  manager: sharedInstance of MTCentralManager
*/</span>

<span class="token comment">// start scanning task</span>
<span class="token punctuation">[</span>manager startScan<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>NSArray<span class="token operator">&lt;</span>MTPeripheral <span class="token operator">*</span><span class="token operator">&gt;</span> <span class="token operator">*</span>peris<span class="token punctuation">)</span><span class="token punctuation">{</span>
  
   <span class="token comment">// Traverse the array，get instance of every device.</span>
   <span class="token comment">// ** you can also display them on views.</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span>NSInteger i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> peris<span class="token punctuation">.</span>count<span class="token punctuation">;</span> i <span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        MTPeripheral <span class="token operator">*</span>peri <span class="token operator">=</span> peris<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        
        <span class="token comment">// get FrameHandler of a device.</span>
        <span class="token comment">// **some properties maybe nil</span>
        MTFrameHandler <span class="token operator">*</span>framer <span class="token operator">=</span> peri<span class="token punctuation">.</span>framer<span class="token punctuation">;</span> 
        NSString <span class="token operator">*</span>name <span class="token operator">=</span> framer<span class="token punctuation">.</span>name<span class="token punctuation">;</span>          <span class="token comment">// name of device, may nil</span>
        NSInteger rssi <span class="token operator">=</span> framer<span class="token punctuation">.</span>rssi<span class="token punctuation">;</span>          <span class="token comment">// rssi</span>
        NSInteger battery <span class="token operator">=</span> framer<span class="token punctuation">.</span>battery<span class="token punctuation">;</span>    <span class="token comment">// battery,may nil</span>
        NSString <span class="token operator">*</span>mac <span class="token operator">=</span> framer<span class="token punctuation">.</span>mac<span class="token punctuation">;</span>            <span class="token comment">// mac address,may nil</span>
        NSArray <span class="token operator">*</span>frames <span class="token operator">=</span> framer<span class="token punctuation">.</span>advFrames<span class="token punctuation">;</span>    <span class="token comment">// all data frames of device（such as:iBeacon，UID，URL...）</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>at the sometime, you can stop the scanning task in this way:</p> <div class="language-objc line-numbers-mode"><pre class="language-objc"><code><span class="token comment">/*
  manager: sharedInstance of MTCentralManager
*/</span>

<span class="token comment">// stop the task.</span>
<span class="token punctuation">[</span>manager stopScan<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>now the developer can get all advertisement data of device in this way. Next, we will talk about how to get frame data, such as <strong>iBeacon</strong>, <strong>URL</strong>, <strong>UID</strong> and etc...</p> <p>Please refer to the code example below.</p> <div class="language-objc line-numbers-mode"><pre class="language-objc"><code><span class="token comment">/*
  aFrameHandler: a MTFrameHandler instance.
*/</span>


NSArray <span class="token operator">*</span>frames <span class="token operator">=</span> aFrameHandler<span class="token punctuation">.</span>advFrames<span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span>NSInteger i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> frames<span class="token punctuation">.</span>count<span class="token punctuation">;</span> i <span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    MinewFrame <span class="token operator">*</span>frame <span class="token operator">=</span> frames<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    
    <span class="token keyword">switch</span><span class="token punctuation">(</span>frame<span class="token punctuation">.</span>frameType<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">case</span> FrameiBeacon<span class="token punctuation">:</span>
        <span class="token punctuation">{</span>
          MinewiBeacon <span class="token operator">*</span>bea <span class="token operator">=</span> <span class="token punctuation">(</span>MinewiBeacon <span class="token operator">*</span><span class="token punctuation">)</span>frame<span class="token punctuation">;</span>
          <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;iBeacon:%@, %ld, %ld, %@&quot;</span><span class="token punctuation">,</span>bea<span class="token punctuation">.</span>uuid<span class="token punctuation">,</span> bea<span class="token punctuation">.</span>major<span class="token punctuation">,</span> bea<span class="token punctuation">.</span>minor<span class="token punctuation">,</span> bea<span class="token punctuation">.</span>lastUpdate<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
           <span class="token keyword">break</span><span class="token punctuation">;</span>
        
      <span class="token keyword">case</span> FrameUID<span class="token punctuation">:</span>
        <span class="token punctuation">{</span>
           MinewUID <span class="token operator">*</span>uid <span class="token operator">=</span> <span class="token punctuation">(</span>MinewUID <span class="token operator">*</span><span class="token punctuation">)</span>frame<span class="token punctuation">;</span>
           <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;UID:%@, %@, %ld, %@&quot;</span><span class="token punctuation">,</span> uid<span class="token punctuation">.</span>namespaceId<span class="token punctuation">,</span> uid<span class="token punctuation">.</span>instanceId<span class="token punctuation">,</span> uid<span class="token punctuation">.</span>txPower<span class="token punctuation">,</span> uid<span class="token punctuation">.</span>lastUpdate<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
           <span class="token keyword">break</span><span class="token punctuation">;</span>
        
        <span class="token keyword">case</span> FrameDeviceInfo<span class="token punctuation">:</span>
        <span class="token punctuation">{</span>
            MinewDeviceInfo <span class="token operator">*</span>info <span class="token operator">=</span> <span class="token punctuation">(</span>MinewDeviceInfo <span class="token operator">*</span><span class="token punctuation">)</span>frame<span class="token punctuation">;</span>
            <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;DeviceInfo: %ld, %@, %@, %@&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">long</span><span class="token punctuation">)</span>info<span class="token punctuation">.</span>battery<span class="token punctuation">,</span> info<span class="token punctuation">.</span>mac<span class="token punctuation">,</span> info<span class="token punctuation">.</span>name<span class="token punctuation">,</span> info<span class="token punctuation">.</span>lastUpdate<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        
        <span class="token keyword">case</span> FrameTLM<span class="token punctuation">:</span>
        <span class="token punctuation">{</span>
            MinewTLM <span class="token operator">*</span>tlm <span class="token operator">=</span> <span class="token punctuation">(</span>MinewTLM <span class="token operator">*</span><span class="token punctuation">)</span>frame<span class="token punctuation">;</span>
            <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;TLM: %ld, %f, %ld, %ld, %@&quot;</span><span class="token punctuation">,</span> tlm<span class="token punctuation">.</span>batteryVol<span class="token punctuation">,</span> tlm<span class="token punctuation">.</span>temperature<span class="token punctuation">,</span> tlm<span class="token punctuation">.</span>advCount<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">long</span><span class="token punctuation">)</span>tlm<span class="token punctuation">.</span>secCount<span class="token punctuation">,</span> tlm<span class="token punctuation">.</span>lastUpdate<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        
        <span class="token keyword">case</span> FrameURL<span class="token punctuation">:</span>
        <span class="token punctuation">{</span>
            MinewURL <span class="token operator">*</span>url <span class="token operator">=</span> <span class="token punctuation">(</span>MinewURL <span class="token operator">*</span><span class="token punctuation">)</span>frame<span class="token punctuation">;</span>
            <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;URL: %ld, %@, %@&quot;</span><span class="token punctuation">,</span> url<span class="token punctuation">.</span>txPower<span class="token punctuation">,</span> url<span class="token punctuation">.</span>urlString<span class="token punctuation">,</span> url<span class="token punctuation">.</span>lastUpdate<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        
        <span class="token keyword">case</span> FrameLineBeacon<span class="token punctuation">:</span>
        <span class="token punctuation">{</span>
            MinewLineBeacon <span class="token operator">*</span>lineBeacon <span class="token operator">=</span> <span class="token punctuation">(</span>MinewLineBeacon <span class="token operator">*</span><span class="token punctuation">)</span>frame<span class="token punctuation">;</span>
            <span class="token comment">// If necessary, vendorKey and lotKey can be obtained after the connection by other operations. For details, refer to the section &quot;Getting the data of each channel&quot;.</span>
            <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;LineBeacon:%@, %@, %@, %ld, %@&quot;</span><span class="token punctuation">,</span> lineBeacon<span class="token punctuation">.</span>hwId<span class="token punctuation">,</span> lineBeacon<span class="token punctuation">.</span>authenticationCode<span class="token punctuation">,</span> lineBeacon<span class="token punctuation">.</span>timestamp<span class="token punctuation">,</span> lineBeacon<span class="token punctuation">.</span>txPower<span class="token punctuation">,</span> lineBeacon<span class="token punctuation">.</span>lastUpdate<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
                    
      <span class="token comment">/*
         You can handle other types of data if you need to. 
      */</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br></div></div><p><strong>Important:</strong> for all types of sensor value, if it equals to <em>MTNAValue</em>（a not available value we defined, in file &quot;MTPublicHeader.h&quot;), it means that this value is not available.</p> <p>Please refer to the code example below:</p> <div class="language-objc line-numbers-mode"><pre class="language-objc"><code><span class="token comment">/*
    aHT: a MinewHTSensor instance
    aLight: a MinewLightSensor instance
    aAcc：a MinewAccSensor instance
*/</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>aHT<span class="token punctuation">.</span>temperature <span class="token operator">==</span> MTNAValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;this value is not available.&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>aLight<span class="token punctuation">.</span>luxValue <span class="token operator">==</span> MTNAValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;this value is not available.&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>aAcc<span class="token punctuation">.</span>XAxis <span class="token operator">==</span> MTNAValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;this value is not available.&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h5 id="connect-to-device"><a href="#connect-to-device" class="header-anchor">#</a> Connect to device</h5> <p>Connect to the device in order to do more operations(change parameter, OTA). you will find that when connect to device password may need, so <strong>the &quot;password Validating Block&quot; must not be NULL, otherwise the app will crash!!!!</strong></p> <p>Please refer to the code example below.</p> <div class="language-objc line-numbers-mode"><pre class="language-objc"><code><span class="token comment">/*
  manager： a MTCentralManager sharedInstance
  aMTPeripheral： a MTPeripheral instance
*/</span>

<span class="token comment">// listen the change of device connection state</span>
aMTPeripheral<span class="token punctuation">.</span>connector<span class="token punctuation">.</span>statusChangeHandler <span class="token operator">=</span> <span class="token operator">^</span><span class="token punctuation">(</span>ConnectionStatus status<span class="token punctuation">,</span> NSError <span class="token operator">*</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    
    <span class="token comment">/*
     typedef NS_ENUM(NSInteger, ConnectionStatus) {
         StatusConnectFailed = -2,
         StatusDisconnected = -1,
         StatusUndifined = 0,
         StatusConnecting,
         StatusConnected,
         StatusReadingInfo,
         StatusDeviceValidating,
         StatusPasswordValidating,
         StatusSycingTime,
         StatusReadingConnectable,
         StatusReadingFeature,
         StatusReadingFrames,
         StatusReadingTriggers,
         StatusReadingSensorInfo,
         StatusCompleted,
     };
     */</span>
     
    <span class="token comment">/*
     there is mutiple state when connect to the device,
     only &quot;status == StatusCompleted&quot; means connection operations success.
     if exception appears, error will not be NULL
    */</span>
    
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Connect to the device</span>
<span class="token comment">// the aMTPeripheral is a device instance</span>
<span class="token comment">// !!!:Warnning: passwordRequire must not be NULL!!!</span>
<span class="token punctuation">[</span>manager connectToPeripheral<span class="token punctuation">:</span>aMTPeripheral passwordRequire<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>MTPasswordBlock passwordBlock<span class="token punctuation">)</span><span class="token punctuation">{</span>
     <span class="token comment">// the length of password string must be 8.</span>
    <span class="token comment">// !!! read the input content from the UITextField as a password in development.</span>
    NSString <span class="token operator">*</span>password <span class="token operator">=</span> <span class="token string">@&quot;minew123&quot;</span><span class="token punctuation">;</span>
    <span class="token function">passwordBlock</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// disconnec from the device.</span>
<span class="token punctuation">[</span>manager disconnectFromPeriperal<span class="token punctuation">:</span>aMTPeripheral<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br></div></div><h5 id="get-base-information"><a href="#get-base-information" class="header-anchor">#</a> Get base information</h5> <p>the developer can get device information and modify parameters when a device connected.</p> <p>the code example below let the developer get the base data of the device.</p> <div class="language-objc line-numbers-mode"><pre class="language-objc"><code><span class="token comment">/*
   aMTPeripheral：a MTPeripheral instance
*/</span>

MTConnectionHandler <span class="token operator">*</span>con <span class="token operator">=</span> aMTPeripheral<span class="token punctuation">.</span>connector<span class="token punctuation">;</span>

ConnectionStatus conSte <span class="token operator">=</span> con<span class="token punctuation">.</span>status<span class="token punctuation">;</span>  <span class="token comment">// current connection status</span>
NSDictionary <span class="token operator">*</span>infoDict <span class="token operator">=</span> con<span class="token punctuation">.</span>infoDict<span class="token punctuation">;</span> <span class="token comment">// device info, such as：（Firmware Version： 0.9.1）;</span>
NSString <span class="token operator">*</span>mac <span class="token operator">=</span> con<span class="token punctuation">.</span>macString<span class="token punctuation">;</span> <span class="token comment">// mac address；</span>
Connectable able <span class="token operator">=</span> con<span class="token punctuation">.</span>connectable<span class="token punctuation">;</span> <span class="token comment">// device connectable，None Unknown，No disable，Yes enable</span>
Version version <span class="token operator">=</span> con<span class="token punctuation">.</span>version<span class="token punctuation">;</span> <span class="token comment">// Version of firmware；</span>
PasswordStatus pwdStatus <span class="token operator">=</span> con<span class="token punctuation">.</span>passwordStatus<span class="token punctuation">;</span> <span class="token comment">// password require or not. None, Require</span>

MTConnectionFeature <span class="token operator">*</span>feature <span class="token operator">=</span> con<span class="token punctuation">.</span>feature<span class="token punctuation">;</span> <span class="token comment">// device features</span>
NSInteger slotAtitude <span class="token operator">=</span> feature<span class="token punctuation">.</span>slotAtitude<span class="token punctuation">;</span> <span class="token comment">// atitude of slot(s), </span>
FeatureSupported feaSup <span class="token operator">=</span> feature<span class="token punctuation">.</span>featureSupported<span class="token punctuation">;</span> <span class="token comment">// parameters can be modified：none，adv,txpower,adv/txpower</span>
NSArray<span class="token operator">&lt;</span>NSNumber <span class="token operator">*</span><span class="token operator">&gt;</span> <span class="token operator">*</span>supFrames <span class="token operator">=</span> feature<span class="token punctuation">.</span>supportedSlots<span class="token punctuation">;</span> <span class="token comment">// frames supported（multiple）</span>
NSArray<span class="token operator">&lt;</span>NSNumber <span class="token operator">*</span><span class="token operator">&gt;</span> <span class="token operator">*</span>supTxpower <span class="token operator">=</span> feature<span class="token punctuation">.</span>supportedTxpowers<span class="token punctuation">;</span> <span class="token comment">// Txpower supported（multiple）</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p><strong>PS:</strong> <strong>MTConnectionHandler</strong>’s <em>Version</em> property.</p> <div class="language-objc line-numbers-mode"><pre class="language-objc"><code>The version value comes form firmware version， check the version value to find out functions the device support<span class="token punctuation">:</span>
 
<span class="token comment">// init value</span>
VersionUndefined

<span class="token comment">// base version, base function only.</span>
VersionBase

<span class="token comment">// this version or above support custom connection password and device info frame.</span>
Version0_9_8

<span class="token comment">// this version or above support remote shut down.</span>
Version0_9_9

<span class="token comment">// this version or above support triggers.</span>
Version2_0_0

<span class="token comment">// this version or above support triggers with adv configs.</span>
Version2_2_60

<span class="token comment">// ideal value, support all features.</span>
VersionMax <span class="token operator">=</span> <span class="token number">1000</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h5 id="get-data-of-each-slot"><a href="#get-data-of-each-slot" class="header-anchor">#</a> Get data of each Slot</h5> <p>Next, let talk about the parameter data of every slot, the reason why we speak about this is because all the content of changing parameters is here.</p> <p><strong>Slot</strong> :Before read the code, let's talk about slot, you can think slot as a advertisement tool, it advertise the content of advertisement data even &quot;don't know&quot; what the content is. such as the 6 slots may like this:</p> <table><thead><tr><th>Slot Number</th> <th>0</th> <th>1</th> <th>2</th> <th>3</th> <th>4</th> <th>5</th></tr></thead> <tbody><tr><td>Adv content</td> <td>iBeacon</td> <td>TLM</td> <td>UID</td> <td>URL</td> <td>HTSensor</td> <td>None</td></tr> <tr><td>Adv interval（ms）</td> <td>1000</td> <td>2000</td> <td>500</td> <td>900</td> <td>3000</td> <td>0</td></tr> <tr><td>RSSI@0/1m（dbm）</td> <td>-1</td> <td>0</td> <td>-4</td> <td>-10</td> <td>-3</td> <td>0</td></tr> <tr><td>Txpower（dbm）</td> <td>4</td> <td>0</td> <td>-4</td> <td>4</td> <td>0</td> <td>0</td></tr></tbody></table> <p>By meaning of the table, the <strong>No.0</strong>  slot will advertise <strong>iBeacon</strong> data, the <strong>No.1</strong> slot will advertise <strong>TLM</strong> data, …, the <strong>No.5</strong> slot will not advertise any data. each of them have their own <strong>advertising interval</strong>, <strong>Txpower</strong> and <strong>Calibration RSSI</strong>. They are independent of each other.</p> <p>PS: <strong>Calibration RSSI(RSSI@0/1m)</strong> is the RSSI when device @ 0/1m(iBeacon is 1, others 0).</p> <p>How to get the slot advertisement data? please refer to the code example below.</p> <div class="language-objc line-numbers-mode"><pre class="language-objc"><code><span class="token comment">/*
    con: a MTConnectionHandler instance
*/</span>

<span class="token comment">// each slot has a frame of current device.</span>
<span class="token comment">// atitude of this array is equals to slot atitude(feature.slotAtitude)</span>
<span class="token comment">// </span>
<span class="token comment">// In strict accordance with the order of the slot，such as：0. -&gt; MinewiBeacon，1. -&gt; MinewUID ...</span>
NSArray<span class="token operator">&lt;</span>MinewFrame <span class="token operator">*</span><span class="token operator">&gt;</span> <span class="token operator">*</span>frames <span class="token operator">=</span> con<span class="token punctuation">.</span>allFrames<span class="token punctuation">;</span>

<span class="token comment">/*
   We assume the No.3 slot has iBeacon data, the No.4 slot has UID data.
   let's try to analyze the data of No.3 slot.
*/</span>

<span class="token comment">// due to the defualt point is MinewFrame(the superclass of MinewiBeacon), so we need make a conversion.</span>

<span class="token comment">// get the frame of No.3 slot</span>
MinewFrame <span class="token operator">*</span>frame <span class="token operator">=</span> frames<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// check this slot has iBeacon data or not,</span>
<span class="token comment">// *You can not check if you confirm its type.</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span>NSInteger i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> frames<span class="token punctuation">.</span>count<span class="token punctuation">;</span> i <span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
MinewFrame <span class="token operator">*</span>frame <span class="token operator">=</span> frames<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">switch</span> <span class="token punctuation">(</span>frame<span class="token punctuation">.</span>frameType<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">case</span> FrameiBeacon<span class="token punctuation">:</span>
<span class="token punctuation">{</span>
    MinewiBeacon <span class="token operator">*</span>iBeacon <span class="token operator">=</span> <span class="token punctuation">(</span>MinewiBeacon <span class="token operator">*</span><span class="token punctuation">)</span>frame<span class="token punctuation">;</span>

    <span class="token comment">// iBeacon</span>
    NSString <span class="token operator">*</span>uuid <span class="token operator">=</span> iBeacon<span class="token punctuation">.</span>uuid<span class="token punctuation">;</span>   <span class="token comment">// uuid</span>
    NSInteger major <span class="token operator">=</span> iBeacon<span class="token punctuation">.</span>major<span class="token punctuation">;</span>  <span class="token comment">// major</span>
    NSInteger minor <span class="token operator">=</span> iBeacon<span class="token punctuation">.</span>minor<span class="token punctuation">;</span>  <span class="token comment">// minor</span>

    <span class="token comment">// The parameters of the slot</span>
    NSInteger slotNumber <span class="token operator">=</span> iBeacon<span class="token punctuation">.</span>slotNumber<span class="token punctuation">;</span>           <span class="token comment">// number of the slot</span>
    NSInteger slotAdvInterval <span class="token operator">=</span> iBeacon<span class="token punctuation">.</span>slotAdvInterval<span class="token punctuation">;</span> <span class="token comment">// advertisement interval</span>
    NSInteger slotAdvTxpower <span class="token operator">=</span> iBeacon<span class="token punctuation">.</span>slotAdvTxpower<span class="token punctuation">;</span>   <span class="token comment">// iBeacon：RSSI@1m others： RSSI@0m</span>
    NSInteger slotRadioTxpower <span class="token operator">=</span> iBeacon<span class="token punctuation">.</span>slotRadioTxpower<span class="token punctuation">;</span> <span class="token comment">// radio Txpower  </span>
<span class="token punctuation">}</span>
    <span class="token keyword">break</span><span class="token punctuation">;</span>
    
<span class="token keyword">case</span> FrameURL<span class="token punctuation">:</span>
<span class="token punctuation">{</span>
    <span class="token comment">// URL</span>
    MinewURL <span class="token operator">*</span>url <span class="token operator">=</span> <span class="token punctuation">(</span>MinewURL <span class="token operator">*</span><span class="token punctuation">)</span>frame<span class="token punctuation">;</span>
    NSString <span class="token operator">*</span>urlStr <span class="token operator">=</span> url<span class="token punctuation">.</span>urlString<span class="token punctuation">;</span>
    
    <span class="token comment">// The parameters of the slot are obtained in the same way</span>
<span class="token punctuation">}</span>
    <span class="token keyword">break</span><span class="token punctuation">;</span>
    
<span class="token keyword">case</span> FrameUID<span class="token punctuation">:</span>
<span class="token punctuation">{</span>
    <span class="token comment">// UID</span>
    MinewUID <span class="token operator">*</span>uid <span class="token operator">=</span> <span class="token punctuation">(</span>MinewUID <span class="token operator">*</span><span class="token punctuation">)</span>frame<span class="token punctuation">;</span>
    NSString <span class="token operator">*</span>namespaceId <span class="token operator">=</span> uid<span class="token punctuation">.</span>namespaceId<span class="token punctuation">;</span>
    NSString <span class="token operator">*</span>instanceId <span class="token operator">=</span> uid<span class="token punctuation">.</span>instanceId<span class="token punctuation">;</span>
    
    <span class="token comment">// The parameters of the slot are obtained in the same way</span>
<span class="token punctuation">}</span>
    <span class="token keyword">break</span><span class="token punctuation">;</span>

<span class="token keyword">case</span> FrameLineBeacon<span class="token punctuation">:</span>
<span class="token punctuation">{</span>
    <span class="token comment">// LineBeacon(The acquisition method is special)</span>
    MTLineBeaconData <span class="token operator">*</span>lineBeaconData <span class="token operator">=</span> <span class="token keyword">self</span><span class="token punctuation">.</span>currentPeripheral<span class="token punctuation">.</span>connector<span class="token punctuation">.</span>slotHandler<span class="token punctuation">.</span>slotFrameDataDic<span class="token punctuation">[</span><span class="token function">FrameTypeString</span><span class="token punctuation">(</span>FrameLineBeacon<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    NSString <span class="token operator">*</span>hwid <span class="token operator">=</span> lineBeaconData<span class="token punctuation">.</span>hwId<span class="token punctuation">;</span>
    NSString <span class="token operator">*</span>vendorKey <span class="token operator">=</span> lineBeaconData<span class="token punctuation">.</span>vendorKey<span class="token punctuation">;</span>
    NSString <span class="token operator">*</span>lotKey <span class="token operator">=</span> lineBeaconData<span class="token punctuation">.</span>lotKey<span class="token punctuation">;</span>
    
    <span class="token comment">// The parameters of the slot are obtained in the same way</span>
<span class="token punctuation">}</span>
    <span class="token keyword">break</span><span class="token punctuation">;</span>
<span class="token comment">/*
   You can handle other types of data if you need to. 
*/</span>
<span class="token keyword">default</span><span class="token punctuation">:</span>
    <span class="token keyword">break</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br></div></div><p>You can analyze the data of other slots in the same way, it's worth noting that when <strong>frameType == FrameNone</strong> means the slot has no data: From another perspective it means this slot is closed.</p> <h5 id="change-slot-data"><a href="#change-slot-data" class="header-anchor">#</a> Change slot data</h5> <p>The developer can modify advertisement and parameters of every slot freely via our APi.</p> <p>We divide the data frame into <strong>static frames</strong> and <strong>dynamic frames</strong>:</p> <ul><li><strong>Static frame</strong>: advertisement data will not change when it was advertise, such as <strong>iBeacon</strong>, <strong>UID</strong>, <strong>URL</strong></li> <li><strong>Dynamic frame</strong>: advertisement data will change while it was advertise, such as <strong>TLM</strong>, <strong>Sensor</strong></li></ul> <p>Please refer to the code example below:</p> <div class="language-objc line-numbers-mode"><pre class="language-objc"><code><span class="token comment">/*
   aConnectionHandler:a MTConnectionHandler instance
*/</span>

<span class="token comment">// create a uid instance</span>
MinewUID <span class="token operator">*</span>uid <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>MinewUID alloc<span class="token punctuation">]</span>init<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// set &quot;namespaceId&quot; and &quot;instanceId&quot; of UID</span>
uid<span class="token punctuation">.</span>namespaceId <span class="token operator">=</span> <span class="token string">@&quot;0123456789abdcdcba12&quot;</span><span class="token punctuation">;</span>
uid<span class="token punctuation">.</span>instanceId <span class="token operator">=</span> <span class="token string">@&quot;0123456789dc&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// the other parameters of slot</span>
uid<span class="token punctuation">.</span>slot <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token comment">// The number of slot which you want to modify</span>
uid<span class="token punctuation">.</span>slotAdvInterval <span class="token operator">=</span> <span class="token number">600</span><span class="token punctuation">;</span>  <span class="token comment">// advertisement interval</span>
uid<span class="token punctuation">.</span>slotAdvTxpower <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">;</span>    <span class="token comment">// RSSI@0m</span>
uid<span class="token punctuation">.</span>slotRadioTxpower <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>   <span class="token comment">// Radio txpower.</span>

<span class="token comment">// write to device.</span>
<span class="token comment">// detail: 1.let No.1 slot advertise UID data, namespaceId：0123456789abdcdcba12 instanceId：0123456789dc</span>
<span class="token comment">//         2.set No.1 slot advertisement interval to 600ms, RSSI@0m to -3dbm, radio txpower to 4dbm </span>
<span class="token punctuation">[</span>aConnectionHandler writeFrame<span class="token punctuation">:</span>uid completion<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>BOOL success<span class="token punctuation">,</span> NSError <span class="token operator">*</span>error<span class="token punctuation">)</span><span class="token punctuation">{</span>
     <span class="token keyword">if</span> <span class="token punctuation">(</span>success<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;write frame to device successfully.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   
     <span class="token punctuation">}</span> 
     <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;Error:%@&quot;</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span>
     <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p>Becareful, the slot parameter has ranges:</p> <ul><li><strong>Advertisement interval</strong>: 100 - 5000 (ms)</li> <li><strong>RSSI@0m</strong>: -127 - 0 (dbm)</li></ul> <p><strong>The most import</strong>: Radio txpower is not a range, it's grade, such as: -8, -4, 0, 4. you can get all supported Radio Txpowers from the feature property of the &quot;MTConnectionHandler&quot;</p> <div class="language-objc line-numbers-mode"><pre class="language-objc"><code><span class="token comment">/*
   feature: a property of MTConnectionHandler.
*/</span>

<span class="token comment">// get all supported Radio txpower of current device.</span>
NSArray<span class="token operator">&lt;</span>NSNumber <span class="token operator">*</span><span class="token operator">&gt;</span> <span class="token operator">*</span>supTx <span class="token operator">=</span> feature<span class="token punctuation">.</span>supportedTxpowers
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>OK, you can modify any slot in the way above, if you want to close a slot, only need to create a <strong>MinewFrame</strong> instance and make its <strong>frameType</strong> property to <strong>FrameNone</strong>, then write this frame to device. oh don't forget to set a slotnumber for the slot which you want to close.</p> <h5 id="set-linebeacon"><a href="#set-linebeacon" class="header-anchor">#</a> Set lineBeacon</h5> <p>The LineBeacon frame needs to call writeFrame  method, and then the following two methods are called to set the lineBeacon's hwid, vendorKey, and lotKey.</p> <div class="language-objc line-numbers-mode"><pre class="language-objc"><code><span class="token comment">// lotKey:Length of 16, hwid:Length of 10,vendorKey:Length of 8，include a-f/A-F/0-9.</span>

<span class="token comment">// set LineBeacon's lotKey</span>
<span class="token punctuation">[</span><span class="token keyword">self</span><span class="token punctuation">.</span>currentPeripheral<span class="token punctuation">.</span>connector<span class="token punctuation">.</span>slotHandler lineBeaconSetLotkey<span class="token punctuation">:</span><span class="token string">@&quot;0011223344556677&quot;</span> completion<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>BOOL success<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>success<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;Set LineBeacon's lotKey success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;Set LineBeacon's lotKey failed&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>


<span class="token comment">// set LineBeacon's hwid LineBeacon's vendorKey</span>
<span class="token punctuation">[</span><span class="token keyword">self</span><span class="token punctuation">.</span>currentPeripheral<span class="token punctuation">.</span>connector<span class="token punctuation">.</span>slotHandler lineBeaconSetHWID<span class="token punctuation">:</span><span class="token string">@&quot;0011223344&quot;</span> VendorKey<span class="token punctuation">:</span><span class="token string">@&quot;00112233&quot;</span> completion<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>BOOL success<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>success<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;Set LineBeacon's hwid and vendorKey success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;Set LineBeacon's hwid and vendorKey failed&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h5 id="change-global-parameter"><a href="#change-global-parameter" class="header-anchor">#</a> Change global parameter</h5> <p>Global parameter of device is a device level feature, such as connectable, password require, reset to default and etc.</p> <p>Please refer to the code example below.</p> <div class="language-objc line-numbers-mode"><pre class="language-objc"><code><span class="token comment">/*
   aConnectionHandler: a MTConnectionHandler instance
*/</span>
<span class="token comment">// reset the device</span>
<span class="token punctuation">[</span>aConnectionHandler resetFactorySettings<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>BOOL success<span class="token punctuation">,</span> NSError <span class="token operator">*</span>error<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>success<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;Operation success!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;Opertion failed!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// update connectable settings</span>
<span class="token comment">// ConnectableYES: app can connect to the device, ConnectableNO app can't connect to the device.</span>
<span class="token comment">// if you set connectableNO, you can connect to device by press the button on device maybe next time.</span>
<span class="token comment">// DANGER!!!:if there is no button on device and set ConnectableNO, the app can't connect to device even forever.</span>
<span class="token punctuation">[</span>aConnectionHandler updateConnectable<span class="token punctuation">:</span>ConnectableYES completion<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>BOOL success<span class="token punctuation">,</span> NSError <span class="token operator">*</span>error<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>success<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;Operation success!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;Opertion failed!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// Modify/Add password</span>
<span class="token comment">// !!!: the password string length must be 8, digits or letters；</span>
<span class="token comment">// it will add password if device has no password, update password if device has a password</span>
<span class="token punctuation">[</span>aConnectinoHandler modifyPassword<span class="token punctuation">:</span><span class="token string">@&quot;12345678&quot;</span> completion<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>BOOL success<span class="token punctuation">,</span> NSError <span class="token operator">*</span>error<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>success<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;Operation success!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;Opertion failed!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// remove password</span>
<span class="token punctuation">[</span>aConnectionHandler removePassword<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>BOOL success<span class="token punctuation">,</span> NSError <span class="token operator">*</span>error<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>success<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;Operation success!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;Opertion failed!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// remote shut down the device.</span>
<span class="token comment">// DANGER!!!: please make sure there a button on device, otherwise it may not boot again.if the Model Number String is Beacon Plus-BL,not work.</span>
<span class="token punctuation">[</span>aConnectionHandler poweroff<span class="token operator">^</span><span class="token punctuation">(</span>BOOL success<span class="token punctuation">,</span> NSError <span class="token operator">*</span>error<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>success<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;Operation success!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;Opertion failed!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br></div></div><h5 id="sensor-data"><a href="#sensor-data" class="header-anchor">#</a> Sensor data</h5> <p>BeaconPlus devices integrated a variety of sensors: <strong>HT(Temperature and Humidity )</strong>, <strong>Light</strong>, <strong>Acceleration</strong> and etc, currently we provide APi  for read HT/Sixaxis/Magnetometer/AtmosphericPressure History data and set PIR param data.</p> <p>Please make sure the device has <strong>HT Sensor</strong>, otherwise you can't get data correctly.</p> <p>Please refer to the code example below.</p> <div class="language-objc line-numbers-mode"><pre class="language-objc"><code><span class="token comment">/*
   aConnectionHandler: a MTConnectionHandler instance
*/</span>

<span class="token comment">// read HT History from the device</span>
<span class="token punctuation">[</span>aConnectionHandler<span class="token punctuation">.</span>sensorHandler readSensorHistory<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>MTSensorData <span class="token operator">*</span>data<span class="token punctuation">)</span><span class="token punctuation">{</span>
  
   <span class="token comment">// a record corresponds to an instance</span>
   NSInteger time <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>MTSensorHTData <span class="token operator">*</span><span class="token punctuation">)</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span>timestamp<span class="token punctuation">;</span>   <span class="token comment">// the Unix timestamp；</span>
   <span class="token keyword">double</span> temp <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>MTSensorHTData <span class="token operator">*</span><span class="token punctuation">)</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span>temperature<span class="token punctuation">;</span>    <span class="token comment">// temperature data；</span>
   <span class="token keyword">double</span> humi <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>MTSensorHTData <span class="token operator">*</span><span class="token punctuation">)</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span>humidity<span class="token punctuation">;</span>       <span class="token comment">// humidity data；</span>
   NSInteger index <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>MTSensorHTData <span class="token operator">*</span><span class="token punctuation">)</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span>index<span class="token punctuation">;</span>      <span class="token comment">// number of this data；</span>
  
   <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>MTSensorHTData <span class="token operator">*</span><span class="token punctuation">)</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span>endStatus <span class="token operator">==</span> EndStatusNone<span class="token punctuation">)</span><span class="token punctuation">{</span>
       <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;there is no data.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>MTSensorHTData <span class="token operator">*</span><span class="token punctuation">)</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span>endStatus <span class="token operator">==</span> EndStatusSuccess<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;sensor data sync successfully!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>MTSensorHTData <span class="token operator">*</span><span class="token punctuation">)</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span>endStatus <span class="token operator">==</span> EndStatusError<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;something wrong in syncing progress.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>you can vividly display these data with the curve, table or other.</p> <p>Please make sure the device has <strong>PIR Sensor</strong>, otherwise you can't get data correctly.</p> <p>Please refer to the code example below.</p> <div class="language-objc line-numbers-mode"><pre class="language-objc"><code><span class="token comment">/*
   aConnectionHandler: a MTConnectionHandler instance
   aRepeat: a bool,whether to allow repeated triggers
   aTime:trigger time, the infrared sensor can be triggered again after the trigger time
*/</span>

<span class="token comment">// set PIR param to the device</span>
<span class="token punctuation">[</span>aConnectionHandler<span class="token punctuation">.</span>sensorHandler pirSet<span class="token punctuation">:</span>aRepeat andDelayTime<span class="token punctuation">:</span>aTime completion<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>MTSensorData <span class="token operator">*</span>data<span class="token punctuation">)</span><span class="token punctuation">{</span>
   
    <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span>status<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;failed&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h5 id="set-triggers"><a href="#set-triggers" class="header-anchor">#</a> Set triggers</h5> <p>BeaconPlus device has triggers, you can set triggers for every slot, the device will advertise the corresponding slot only when the trigger condition is met.</p> <p>Please refer to the code example below.</p> <div class="language-objc line-numbers-mode"><pre class="language-objc"><code><span class="token comment">/*
   aConnectionHandler: a MTConnectionHandler instance
*/</span>

NSInteger sn <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>                          <span class="token comment">// Target slot：2</span>
TriggerType type <span class="token operator">=</span> TriggerTypeTempAbove<span class="token punctuation">;</span>   <span class="token comment">// Triggering condition：temperature above。Disabled when the value is None</span>
NSInteger value <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>                      <span class="token comment">// value：10</span>

<span class="token comment">// create a trigger instance</span>
<span class="token comment">// this trigger means when temperature &gt; 10 meet the condition.</span>
MTTriggerData <span class="token operator">*</span>trigger <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>MTTriggerData alloc<span class="token punctuation">]</span>initWithSlot<span class="token punctuation">:</span>sn triggerType<span class="token punctuation">:</span>type value<span class="token punctuation">:</span>value<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// write to the device.</span>
<span class="token punctuation">[</span>aConnectionHandler writeTrigger<span class="token punctuation">:</span>trigger completion<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>BOOL success<span class="token punctuation">,</span> NSError<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>success<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;write trigger successfully!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;write trigger failed!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

NSInteger slotAtitude <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>                 <span class="token comment">// Target slot：2</span>
TriggerType type <span class="token operator">=</span> TriggerTypeTempAbove<span class="token punctuation">;</span>   <span class="token comment">// Triggering condition：temperature above</span>
NSInteger value <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>                      <span class="token comment">// temperature above：10</span>

<span class="token comment">// create a trigger instance</span>
<span class="token comment">// this trigger means when temperature &gt; 10 meet the condition.</span>
MTTriggerData <span class="token operator">*</span>trigger <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>MTTriggerData alloc<span class="token punctuation">]</span> initWithSlot<span class="token punctuation">:</span>slotAtitude paramSupport<span class="token punctuation">:</span>true triggerType<span class="token punctuation">:</span>type value<span class="token punctuation">:</span>value<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// Continue broadcasting after triggering if necessary</span>
trigger<span class="token punctuation">.</span>always <span class="token operator">=</span> true<span class="token punctuation">;</span>        <span class="token comment">// Whether to continue broadcasting after triggering</span>
trigger<span class="token punctuation">.</span>advInterval <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>    <span class="token comment">// The broadcast interval</span>
trigger<span class="token punctuation">.</span>radioTxpower <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">;</span>   <span class="token comment">// The broadcast signal strength</span>

<span class="token comment">// write to the device.</span>
<span class="token punctuation">[</span><span class="token keyword">self</span><span class="token punctuation">.</span>connectedPeripheral<span class="token punctuation">.</span>connector writeTrigger<span class="token punctuation">:</span>trigger completion<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>BOOL success<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>success<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;write trigger successfully!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;write trigger failed!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br></div></div><h3 id="other-related-configurations-of-the-vibration-sensor"><a href="#other-related-configurations-of-the-vibration-sensor" class="header-anchor">#</a> Other related configurations of the vibration sensor</h3> <p>Set and query whether the vibration is turned on, the broadcast frame of the vibration sensor will be received when the vibration is turned on, and the broadcast frame of the vibration sensor will not be broadcast when the vibration is turned off.</p> <div class="language-objc line-numbers-mode"><pre class="language-objc"><code>   
 	<span class="token comment">//    MTVibrationTypeOpen,</span>
	<span class="token comment">//    MTVibrationTypeClose,</span>
	<span class="token comment">//    MTVibrationTypeError,</span>
  <span class="token punctuation">[</span><span class="token keyword">self</span><span class="token punctuation">.</span>currentPeripheral<span class="token punctuation">.</span>connector<span class="token punctuation">.</span>sensorHandler setVibrationStatus<span class="token punctuation">:</span>MTVibrationTypeOpen CompletionHandler<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>BOOL isSuccess<span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>


  <span class="token punctuation">[</span><span class="token keyword">self</span><span class="token punctuation">.</span>currentPeripheral<span class="token punctuation">.</span>connector<span class="token punctuation">.</span>sensorHandler queryVibrationStatu<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>BOOL isSuccess<span class="token punctuation">,</span> MTVibrationType type<span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>Set and query the sensitivity of the vibration sensor.</p> <div class="language-objc line-numbers-mode"><pre class="language-objc"><code>    <span class="token comment">//    MTSensitivityTypeSuperHigh,</span>
    <span class="token comment">//    MTSensitivityTypeHigh,</span>
    <span class="token comment">//    MTSensitivityTypeMiddle,</span>
    <span class="token comment">//    MTSensitivityTypeLow,</span>
    <span class="token comment">//    MTSensitivityTypeSuperLow,</span>
    <span class="token punctuation">[</span><span class="token keyword">self</span><span class="token punctuation">.</span>currentPeripheral<span class="token punctuation">.</span>connector<span class="token punctuation">.</span>sensorHandler setSensitivity<span class="token punctuation">:</span>MTSensitivityTypeHigh CompletionHandler<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>BOOL isSuccess<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    

    <span class="token punctuation">[</span><span class="token keyword">self</span><span class="token punctuation">.</span>currentPeripheral<span class="token punctuation">.</span>connector<span class="token punctuation">.</span>sensorHandler querySensitivity<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>BOOL isSuccess<span class="token punctuation">,</span> MTSensitivityType type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>Set and query the vibration sensor warning time interval. The start time must be less than the end time, accurate to the hour and minute.
In addition, the parameters need to be calculated. For example, from 6:10 in the morning to 10:00 in the evening, startTime = 6 * 3600 + 10 * 60 = 22200, endTime = 22 * 3600 + 0 * 60 = 79200.</p> <div class="language-objc line-numbers-mode"><pre class="language-objc"><code>    <span class="token comment">// timeZone = hours*3600 + minutes*60</span>
    <span class="token comment">// 22200 = 6*3600 + 10*60 = 6:30</span>
    <span class="token punctuation">[</span><span class="token keyword">self</span><span class="token punctuation">.</span>currentPeripheral<span class="token punctuation">.</span>connector<span class="token punctuation">.</span>sensorHandler setFirstAlarmTimeIntervalWithAlarmStatus<span class="token punctuation">:</span>MTVibrationTypeOpen StartTime<span class="token punctuation">:</span><span class="token number">22200</span> EndTime<span class="token punctuation">:</span><span class="token number">79200</span> CompletionHandler<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>BOOL isSuccess<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    
    <span class="token punctuation">[</span><span class="token keyword">self</span><span class="token punctuation">.</span>currentPeripheral<span class="token punctuation">.</span>connector<span class="token punctuation">.</span>sensorHandler queryFirstAlarmTimeInterval<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>BOOL isSuccess<span class="token punctuation">,</span> MTVibrationType type<span class="token punctuation">,</span> uint32_t startTime<span class="token punctuation">,</span> uint32_t endTime<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;vibrationType:%@, startTime:%dhour %dminute, endTime:%dhour %dminute&quot;</span><span class="token punctuation">,</span> type <span class="token operator">==</span> MTVibrationTypeOpen <span class="token operator">?</span> <span class="token string">@&quot;Open&quot;</span> <span class="token punctuation">:</span> <span class="token string">@&quot;Close or Error&quot;</span><span class="token punctuation">,</span> startTime<span class="token operator">/</span><span class="token number">3600</span><span class="token punctuation">,</span> startTime<span class="token operator">%</span><span class="token number">3600</span><span class="token operator">/</span><span class="token number">60</span><span class="token punctuation">,</span> endTime<span class="token operator">/</span><span class="token number">3600</span><span class="token punctuation">,</span> endTime<span class="token operator">%</span><span class="token number">3600</span><span class="token operator">/</span><span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    
    <span class="token punctuation">[</span><span class="token keyword">self</span><span class="token punctuation">.</span>currentPeripheral<span class="token punctuation">.</span>connector<span class="token punctuation">.</span>sensorHandler setSecondAlarmTimeIntervalWithAlarmStatus<span class="token punctuation">:</span>MTVibrationTypeOpen StartTime<span class="token punctuation">:</span><span class="token number">22200</span> EndTime<span class="token punctuation">:</span><span class="token number">79200</span> CompletionHandler<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>BOOL isSuccess<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    
    <span class="token punctuation">[</span><span class="token keyword">self</span><span class="token punctuation">.</span>currentPeripheral<span class="token punctuation">.</span>connector<span class="token punctuation">.</span>sensorHandler querySecondAlarmTimeInterval<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>BOOL isSuccess<span class="token punctuation">,</span> MTVibrationType type<span class="token punctuation">,</span> uint32_t startTime<span class="token punctuation">,</span> uint32_t endTime<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    
    <span class="token punctuation">[</span><span class="token keyword">self</span><span class="token punctuation">.</span>currentPeripheral<span class="token punctuation">.</span>connector<span class="token punctuation">.</span>sensorHandler setThirdAlarmTimeIntervalWithAlarmStatus<span class="token punctuation">:</span>MTVibrationTypeOpen StartTime<span class="token punctuation">:</span><span class="token number">22200</span> EndTime<span class="token punctuation">:</span><span class="token number">79200</span> CompletionHandler<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>BOOL isSuccess<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    
    <span class="token punctuation">[</span><span class="token keyword">self</span><span class="token punctuation">.</span>currentPeripheral<span class="token punctuation">.</span>connector<span class="token punctuation">.</span>sensorHandler queryThirdAlarmTimeInterval<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>BOOL isSuccess<span class="token punctuation">,</span> MTVibrationType type<span class="token punctuation">,</span> uint32_t startTime<span class="token punctuation">,</span> uint32_t endTime<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h3 id="set-broadcast-rate"><a href="#set-broadcast-rate" class="header-anchor">#</a> Set broadcast rate</h3> <p>When the model is MBM01 and the firmware version is 2.5.x, you can set the Bluetooth 4.0 1Mbps broadcast rate or Bluetooth 5.0 125Kbps broadcast rate for the frame channel.</p> <p>Each of the six broadcast channels occupies a value. When the value is set to 0, it represents the Bluetooth 4.2 1Mbps broadcast mode, and when the value is set to 1, it represents the Bluetooth 5.0 125Kbps broadcast mode.</p> <p>**It should be noted that iOS currently cannot obtain the radio package with a radio frequency of 125Kbps, and Android does not have this problem. That is, the frame channel of the Bluetooth 5.0 broadcast rate is set to 125Kbps on iOS. After the setting is completed, the frame cannot be scanned on the iPhone, but the frame can be scanned on the Android. **</p> <div class="language-objc line-numbers-mode"><pre class="language-objc"><code>    <span class="token punctuation">[</span><span class="token keyword">self</span><span class="token punctuation">.</span>currentPeripheral<span class="token punctuation">.</span>connector<span class="token punctuation">.</span>sensorHandler queryBroadcastSpeed<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>BOOL isSuccess<span class="token punctuation">,</span> NSArray <span class="token operator">*</span> _Nonnull broadcastSpeedOfSlotArray<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;The broadcast rate of the first channel is %@&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>broadcastSpeedOfSlotArray<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> intValue<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token string">@&quot;Bluetooth5.0 125Kbps&quot;</span> <span class="token punctuation">:</span> <span class="token string">@&quot;Bluetooth4.0 1Mbps&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    
    <span class="token comment">// When setting the broadcast rate, the incoming array has six values, and each value corresponds to six channels. 0 means that the broadcast rate of Bluetooth 4.0 is 1Mbps, and 1 means that the broadcast rate of Bluetooth 5.0 is 125Kbps. For example, if the first and second channels are set to 125Kbps broadcast, and the other channels are set to 1Mbps broadcast, then the settings are as follows:</span>
    <span class="token punctuation">[</span><span class="token keyword">self</span><span class="token punctuation">.</span>currentPeripheral<span class="token punctuation">.</span>connector<span class="token punctuation">.</span>sensorHandler setBroadcastSpeed<span class="token punctuation">:</span><span class="token operator">@</span><span class="token punctuation">[</span><span class="token operator">@</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">@</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">@</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token operator">@</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token operator">@</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token operator">@</span><span class="token number">0</span><span class="token punctuation">]</span> CompletionHandler<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>BOOL isSuccess<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="set-the-parameter-configuration-items-of-the-configurable-firmware-of-the-acc-sensor"><a href="#set-the-parameter-configuration-items-of-the-configurable-firmware-of-the-acc-sensor" class="header-anchor">#</a> Set the parameter configuration items of the configurable firmware of the Acc sensor</h3> <p>This function belongs to the exclusive supporting function of customized firmware, please consult relevant business personnel before using it.</p> <p>Acc sensor can be configured with firmware and parameter configuration items that can be set.</p> <p>ODR ( Output rate ) :</p> <table><thead><tr><th>description</th> <th>value</th></tr></thead> <tbody><tr><td>1Hz</td> <td>0</td></tr> <tr><td>10Hz</td> <td>1</td></tr> <tr><td>25Hz</td> <td>2</td></tr> <tr><td>50Hz</td> <td>3</td></tr> <tr><td>100Hz</td> <td>4</td></tr> <tr><td>200Hz</td> <td>5</td></tr> <tr><td>400Hz</td> <td>6</td></tr> <tr><td>1600Hz（low power）</td> <td>7</td></tr> <tr><td>1344HZ (HR/normal) /5000HZ(low power)</td> <td>8</td></tr></tbody></table> <p>wakeup_threshold ( mg ) : 0 ~ 2000</p> <p>wakeup_duration  ( ms ) : 0 ~ 127000</p> <div class="language-objc line-numbers-mode"><pre class="language-objc"><code>    <span class="token punctuation">[</span><span class="token keyword">self</span><span class="token punctuation">.</span>currentPeripheral<span class="token punctuation">.</span>connector<span class="token punctuation">.</span>sensorHandler queryAccSensorParameterWithCompletionHandler<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>BOOL isSuccess<span class="token punctuation">,</span> NSInteger odr<span class="token punctuation">,</span> NSInteger wakeupThreshold<span class="token punctuation">,</span> NSInteger wakeupDuration<span class="token punctuation">)</span> <span class="token punctuation">{</span>  
      
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    

		<span class="token punctuation">[</span><span class="token keyword">self</span><span class="token punctuation">.</span>currentPeripheral<span class="token punctuation">.</span>connector<span class="token punctuation">.</span>sensorHandler setAccSensorParameterWithOdr<span class="token punctuation">:</span><span class="token number">0</span> WakeupThreshold<span class="token punctuation">:</span><span class="token number">200</span> WakeupDuration<span class="token punctuation">:</span><span class="token number">1000</span> CompletionHandler<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>BOOL isSuccess<span class="token punctuation">)</span> <span class="token punctuation">{</span>   
      
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>At the end of this part, you can refer all code above to develop. Of course we made a note for every APi in the SDK, if there is something new, we will update this document.</p> <h2 id="notes"><a href="#notes" class="header-anchor">#</a> Notes</h2> <ol><li><p>In development progress, you may find there are <strong>multiple MTPeripheral instance</strong> correspond to a physical device. On this point, we consulted Apple's engineers. they told us that currently on the iOS platform, CoreBluetooth framework  unfriendly to the multiple slot devices(especially the advertisement data in changing). due to that sometimes app can't connect to the device, Google Eddystone solve this issue by <strong>press button on eddystone devices</strong>, our device support this operation too.</p> <p>iOS11 doesn't has this issue.</p></li> <li><p>In scanning stage, some properties may nil, especially MAC address(restriction of iOS),if current device advertise <strong>DeviceInfo</strong> frame, then you can get name, MAC address and battery.</p></li> <li><p>After 5 minus the app connected to device, the device will take the initiative to disconnect.</p></li> <li><p>If the running display cannot find the path after adding the SDK, remove the package and add it again at General-&gt; Frameworks,Libraries,and Embedded Content</p></li></ol> <h2 id="other"><a href="#other" class="header-anchor">#</a> Other</h2> <p>BeaconPlus SDK is also used in our BeaconSET+ app. If you need a more intuitive understanding of our beaconPlus equipment and the corresponding functions of the SDK, you can also download the BeaconSET+ app to learn more. (Reminder: BeaconSET+ app and BeaconPlus SDK need to be used with equipment produced by our company)</p> <h2 id="change-log"><a href="#change-log" class="header-anchor">#</a> Change log</h2> <ul><li>2017.10.11  v1.0 first version;</li> <li>2019.01.07  v1.1 second version;</li> <li>2019.07.11  v1.2 change the poweroff;</li> <li>2020.03.27  v1.10.0 add LineBeacon;</li> <li>2020.07.27  v1.10.1 Optimize getting and setting of LineBeacon frame</li> <li>2020.10.27 v1.10.2 Added lastUpdate property for each broadcast frame</li> <li>2021.4.21 v1.11.0 Added Sixaxis/Magnetometer/AtmosphericPressure sensor</li> <li>2021.4.28 v1.11.1 Added vibration sensor</li> <li>2021.09.16 v1.13.0 Added pir sensor</li> <li>2021.10.9 v1.14.0 Newly set Bluetooth 5.0 broadcast rate</li> <li>2021.12.27 v1.14.1 Added new parameter configuration items for adaptable acceleration sensor configurable firmware</li> <li>2022.5.10 Support parameter modification of ACC frame</li> <li>2022.6.1 v1.16.0 Added IN100 broadcast frame MinewMBeaconInfo</li> <li>2023.11.13 v1.17.0 Fixed WriteFrame crash; support background scanning</li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated::</span> <span class="time">10/24/2025, 2:29:48 PM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.34ff7344.js" defer></script><script src="/assets/js/2.31f2ce87.js" defer></script><script src="/assets/js/1.a9521bca.js" defer></script><script src="/assets/js/21.3cb3cefa.js" defer></script>
  </body>
</html>
